<!DOCTYPE html>
<!-- saved from url=(0057)https://deepwiki.com/coddrago/Heroku/7.1-creating-modules -->
<html lang="en" class="light" style="color-scheme: light;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="preload" href="https://deepwiki.com/_next/static/media/4cf2300e9c8272f7-s.p.woff2" as="font" crossorigin="" type="font/woff2"><link rel="preload" href="https://deepwiki.com/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"><link rel="stylesheet" href="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/de70bee13400563f.css" data-precedence="next"><link rel="stylesheet" href="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/4095ef47de7c7e40.css" data-precedence="next"><link rel="preload" as="script" fetchpriority="low" href="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/webpack-acbbbb548492d4a6.js.Без названия"><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/4bd1b696-cebf68b71ed1e85d.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/1684-03cb56c847c25d40.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/main-app-8ab5af3d6b81086e.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/b1298b8d-549c141f97a3b262.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/378e5a93-3b0f971d3611a8a5.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/f7f68e2d-40290491c524df5c.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/4420-863691215dce8f1b.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/6417-34cc3208366c5e5f.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/4348-824485747071bae4.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/3224-7e9887ea92eab174.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/layout-37a15e31a18fac3d.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/7bf36345-06f80506190927ed.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/c16f53c3-1a60b9b77b3e1d4b.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/2249-342d7235b3a68051.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/9970-31fea4ade6367f07.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/1769-6bbc7ae2dcadfa9c.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/655-b5574efc1f81bad2.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/4154-f7634cd651686b21.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/8613-04ed56064abeb81e.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/4870-3ddb59732948b175.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/page-78fac26cbb8eb9a1.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/3449-942ed8b66729962b.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/7553-2bb9c132a5788553.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/1127-b475c4cc62d0a830.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/736-90a1c8956f4d3102.js.Без названия" async=""></script><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/layout-99964eedd99460bc.js.Без названия" async=""></script><meta name="next-size-adjust" content=""><title data-vivaldi-translated="">Создание модулей | coddrago/Heroku | DeepWiki</title><meta name="description" content="This document provides a detailed guide for developing custom modules for the Heroku Telegram Userbot. It covers the module structure, registration mechanisms, command handlers, and best practices for"><meta property="og:title" content="Creating Modules | coddrago/Heroku | DeepWiki"><meta property="og:description" content="This document provides a detailed guide for developing custom modules for the Heroku Telegram Userbot. It covers the module structure, registration mechanisms, command handlers, and best practices for"><meta property="og:url" content="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules"><meta property="og:site_name" content="DeepWiki"><meta property="og:type" content="website"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Creating Modules | coddrago/Heroku | DeepWiki"><meta name="twitter:description" content="This document provides a detailed guide for developing custom modules for the Heroku Telegram Userbot. It covers the module structure, registration mechanisms, command handlers, and best practices for"><link rel="icon" href="https://deepwiki.com/favicon.ico" type="image/x-icon" sizes="48x48"><link rel="icon" href="https://deepwiki.com/icon.png?66aaf51e0e68c818" type="image/png" sizes="16x16"><link rel="apple-touch-icon" href="https://deepwiki.com/apple-icon.png?a4f658907db0ab87" type="image/png" sizes="180x180"><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/polyfills-42372ed130431b0a.js.Без названия" nomodule=""></script><link rel="stylesheet" href="chrome-extension://ihcjicgdanjaechkgeegckofjjedodee/app/content-style.css"><style type="text/css">[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}</style><script id="hotjar-init-script" crossorigin="anonymous">(function(h,o,t,j,a,r){h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};h._hjSettings={hjid:6382967,hjsv:6,hjdebug:false};a=o.getElementsByTagName('head')[0];r=o.createElement('script');r.async=1;r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;a.appendChild(r);})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');</script><script async="" src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/hotjar-6382967.js.Без названия"></script></head><body class="__variable_188709 font-geist-sans relative min-h-screen __variable_9a8899 bg-background antialiased" data-vivaldi-translated="" style="overflow: auto;"><section aria-label="Notifications alt+T" tabindex="-1" aria-live="polite" aria-relevant="additions text" aria-atomic="false" data-vivaldi-translated=""></section><script>((e,t,r,n,o,a,i,s)=>{let l=document.documentElement,u=["light","dark"];function c(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&a?o.map(e=>a[e]||e):o;r?(l.classList.remove(...n),l.classList.add(a&&a[t]?a[t]:t)):l.setAttribute(e,t)}),r=t,s&&u.includes(r)&&(l.style.colorScheme=r)}if(n)c(n);else try{let e=localStorage.getItem(t)||r,n=i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(n)}catch(e){}})("class","theme","light",null,["light","dark"],null,true,true)</script><!--$--><div class="flex min-h-screen w-full flex-col text-white" id="codebase-wiki-repo-page" data-vivaldi-translated=""><div class="bg-background border-b-border sticky top-0 z-30 border-b border-dashed" data-vivaldi-translated=""><div class="font-geist-mono relative flex h-8 items-center justify-center text-xs font-medium sm:hidden"><div class="powered-by-devin-gradient absolute inset-0 z-[-1] h-8 w-full"></div><a class="flex items-center gap-2" href="https://deepwiki.com/private-repo"><svg class="size-3 [&amp;_path]:stroke-0 [&amp;_path]:animate-[custom-pulse_1.8s_infinite_var(--delay,0s)]" xmlns="http://www.w3.org/2000/svg" viewBox="110 110 460 500"><path style="fill:#21c19a" class="[--delay:0.6s]" d="M418.73,332.37c9.84-5.68,22.07-5.68,31.91,0l25.49,14.71c.82.48,1.69.8,2.58,1.06.19.06.37.11.55.16.87.21,1.76.34,2.65.35.04,0,.08.02.13.02.1,0,.19-.03.29-.04.83-.02,1.64-.13,2.45-.32.14-.03.28-.05.42-.09.87-.24,1.7-.59,2.5-1.03.08-.04.17-.06.25-.1l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-.08.04-.13.11-.2.16-.78.48-1.51,1.02-2.15,1.66-.1.1-.18.21-.28.31-.57.6-1.08,1.26-1.51,1.97-.07.12-.15.22-.22.34-.44.77-.77,1.6-1.03,2.47-.05.19-.1.37-.14.56-.22.89-.37,1.81-.37,2.76v29.43c0,11.36-6.11,21.95-15.95,27.63-9.84,5.68-22.06,5.68-31.91,0l-25.49-14.71c-.82-.48-1.69-.8-2.57-1.06-.19-.06-.37-.11-.56-.16-.88-.21-1.76-.34-2.65-.34-.13,0-.26.02-.4.02-.84.02-1.66.13-2.47.32-.13.03-.27.05-.4.09-.87.24-1.71.6-2.51,1.04-.08.04-.16.06-.24.1l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22l50.97,29.43c.08.04.17.06.24.1.8.44,1.64.79,2.5,1.03.14.04.28.06.42.09.81.19,1.62.3,2.45.32.1,0,.19.04.29.04.04,0,.08-.02.13-.02.89,0,1.77-.13,2.65-.35.19-.04.37-.1.56-.16.88-.26,1.75-.59,2.58-1.06l25.49-14.71c9.84-5.68,22.06-5.68,31.91,0,9.84,5.68,15.95,16.27,15.95,27.63v29.43c0,.95.15,1.87.37,2.76.05.19.09.37.14.56.25.86.59,1.69,1.03,2.47.07.12.15.22.22.34.43.71.94,1.37,1.51,1.97.1.1.18.21.28.31.65.63,1.37,1.18,2.15,1.66.07.04.13.11.2.16l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-.08-.04-.16-.06-.24-.1-.8-.44-1.64-.8-2.51-1.04-.13-.04-.26-.05-.39-.09-.82-.2-1.65-.31-2.49-.33-.13,0-.25-.02-.38-.02-.89,0-1.78.13-2.66.35-.18.04-.36.1-.54.15-.88.26-1.75.59-2.58,1.07l-25.49,14.72c-9.84,5.68-22.07,5.68-31.9,0-9.84-5.68-15.95-16.27-15.95-27.63s6.11-21.95,15.95-27.63Z"></path><path style="fill:#3969ca" d="M141.09,317.65l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c.08-.04.13-.11.2-.16.78-.48,1.51-1.02,2.15-1.66.1-.1.18-.21.28-.31.57-.6,1.08-1.26,1.51-1.97.07-.12.15-.22.22-.34.44-.77.77-1.6,1.03-2.47.05-.19.1-.37.14-.56.22-.89.37-1.81.37-2.76v-29.43c0-11.36,6.11-21.95,15.96-27.63s22.06-5.68,31.91,0l25.49,14.71c.82.48,1.69.8,2.57,1.06.19.06.37.11.56.16.87.21,1.76.34,2.64.35.04,0,.09.02.13.02.1,0,.19-.04.29-.04.83-.02,1.65-.13,2.45-.32.14-.03.28-.05.41-.09.87-.24,1.71-.6,2.51-1.04.08-.04.16-.06.24-.1l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-.08.04-.13.11-.2.16-.78.48-1.51,1.02-2.15,1.66-.1.1-.18.21-.28.31-.57.6-1.08,1.26-1.51,1.97-.07.12-.15.22-.22.34-.44.77-.77,1.6-1.03,2.47-.05.19-.1.37-.14.56-.22.89-.37,1.81-.37,2.76v29.43c0,11.36-6.11,21.95-15.95,27.63-9.84,5.68-22.07,5.68-31.91,0l-25.49-14.71c-.82-.48-1.69-.8-2.58-1.06-.19-.06-.37-.11-.55-.16-.88-.21-1.76-.34-2.65-.35-.13,0-.26.02-.4.02-.83.02-1.66.13-2.47.32-.13.03-.27.05-.4.09-.87.24-1.71.6-2.51,1.04-.08.04-.16.06-.24.1l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22Z"></path><path style="fill:#0294de" class="[--delay:1.2s]" d="M396.88,484.35l-50.97-29.43c-.08-.04-.17-.06-.24-.1-.8-.44-1.64-.79-2.51-1.03-.14-.04-.27-.06-.41-.09-.81-.19-1.64-.3-2.47-.32-.13,0-.26-.02-.39-.02-.89,0-1.78.13-2.66.35-.18.04-.36.1-.54.15-.88.26-1.76.59-2.58,1.07l-25.49,14.72c-9.84,5.68-22.06,5.68-31.9,0-9.84-5.68-15.96-16.27-15.96-27.63v-29.43c0-.95-.15-1.87-.37-2.76-.05-.19-.09-.37-.14-.56-.25-.86-.59-1.69-1.03-2.47-.07-.12-.15-.22-.22-.34-.43-.71-.94-1.37-1.51-1.97-.1-.1-.18-.21-.28-.31-.65-.63-1.37-1.18-2.15-1.66-.07-.04-.13-.11-.2-.16l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22l50.97,29.43c.08.04.17.06.25.1.8.44,1.63.79,2.5,1.03.14.04.29.06.43.09.8.19,1.61.3,2.43.32.1,0,.2.04.3.04.04,0,.09-.02.13-.02.88,0,1.77-.13,2.64-.34.19-.04.37-.1.56-.16.88-.26,1.75-.59,2.57-1.06l25.49-14.71c9.84-5.68,22.06-5.68,31.91,0,9.84,5.68,15.95,16.27,15.95,27.63v29.43c0,.95.15,1.87.37,2.76.05.19.09.37.14.56.25.86.59,1.69,1.03,2.47.07.12.15.22.22.34.43.71.94,1.37,1.51,1.97.1.1.18.21.28.31.65.63,1.37,1.18,2.15,1.66.07.04.13.11.2.16l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22Z"></path></svg>Index your code with Devin</a></div><div class="container-wrapper" data-vivaldi-translated=""><div class="container mx-auto flex w-full flex-row items-center gap-2 py-4 md:py-6" data-vivaldi-translated=""><a class="flex items-center gap-3" href="https://deepwiki.com/" data-vivaldi-translated=""><span class="text-base font-medium leading-none md:text-lg hidden sm:block" data-vivaldi-translated="">DeepWiki</span></a><div class="flex-1" data-vivaldi-translated=""><div class="flex flex-row items-center gap-2" data-vivaldi-translated=""><a class="block text-xs font-medium leading-none text-white sm:hidden md:text-lg" href="https://deepwiki.com/">DeepWiki</a><p class="text-sm font-normal leading-none md:text-lg" data-vivaldi-translated=""><a href="https://github.com/coddrago/Heroku" target="_blank" rel="noopener noreferrer" title="Открытый репозиторий" class="text-muted-foreground hover:text-muted-foreground/80 group inline-flex items-center gap-1 transition-colors" data-vivaldi-translated="">коддраго/Хероку<!-- --> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256" class="opacity-0 transition-opacity group-hover:opacity-100"><path d="M224,104a8,8,0,0,1-16,0V59.32l-66.33,66.34a8,8,0,0,1-11.32-11.32L196.68,48H152a8,8,0,0,1,0-16h64a8,8,0,0,1,8,8Zm-40,24a8,8,0,0,0-8,8v72H48V80h72a8,8,0,0,0,0-16H48A16,16,0,0,0,32,80V208a16,16,0,0,0,16,16H176a16,16,0,0,0,16-16V136A8,8,0,0,0,184,128Z"></path></svg></a></p></div></div><div class="flex items-center gap-4" data-vivaldi-translated=""><a class="group hidden items-center gap-1.5 md:flex" href="https://deepwiki.com/private-repo" data-vivaldi-translated=""><div class="relative" data-vivaldi-translated=""><span class="text-foreground/70 group-hover:text-foreground text-xs font-light transition-colors" data-vivaldi-translated="">Индексируйте свой код с помощью</span><div class="bg-foreground/30 absolute bottom-0 left-0 h-[1px] w-0 transition-all duration-300 group-hover:w-full" data-vivaldi-translated=""></div></div><div class="flex items-center gap-1 transition-transform duration-300 group-hover:translate-x-0.5" data-vivaldi-translated=""><svg class="size-4 transform transition-transform duration-700 group-hover:rotate-180 [&amp;_path]:stroke-0" xmlns="http://www.w3.org/2000/svg" viewBox="110 110 460 500"><path style="fill:#21c19a" class="" d="M418.73,332.37c9.84-5.68,22.07-5.68,31.91,0l25.49,14.71c.82.48,1.69.8,2.58,1.06.19.06.37.11.55.16.87.21,1.76.34,2.65.35.04,0,.08.02.13.02.1,0,.19-.03.29-.04.83-.02,1.64-.13,2.45-.32.14-.03.28-.05.42-.09.87-.24,1.7-.59,2.5-1.03.08-.04.17-.06.25-.1l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-.08.04-.13.11-.2.16-.78.48-1.51,1.02-2.15,1.66-.1.1-.18.21-.28.31-.57.6-1.08,1.26-1.51,1.97-.07.12-.15.22-.22.34-.44.77-.77,1.6-1.03,2.47-.05.19-.1.37-.14.56-.22.89-.37,1.81-.37,2.76v29.43c0,11.36-6.11,21.95-15.95,27.63-9.84,5.68-22.06,5.68-31.91,0l-25.49-14.71c-.82-.48-1.69-.8-2.57-1.06-.19-.06-.37-.11-.56-.16-.88-.21-1.76-.34-2.65-.34-.13,0-.26.02-.4.02-.84.02-1.66.13-2.47.32-.13.03-.27.05-.4.09-.87.24-1.71.6-2.51,1.04-.08.04-.16.06-.24.1l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22l50.97,29.43c.08.04.17.06.24.1.8.44,1.64.79,2.5,1.03.14.04.28.06.42.09.81.19,1.62.3,2.45.32.1,0,.19.04.29.04.04,0,.08-.02.13-.02.89,0,1.77-.13,2.65-.35.19-.04.37-.1.56-.16.88-.26,1.75-.59,2.58-1.06l25.49-14.71c9.84-5.68,22.06-5.68,31.91,0,9.84,5.68,15.95,16.27,15.95,27.63v29.43c0,.95.15,1.87.37,2.76.05.19.09.37.14.56.25.86.59,1.69,1.03,2.47.07.12.15.22.22.34.43.71.94,1.37,1.51,1.97.1.1.18.21.28.31.65.63,1.37,1.18,2.15,1.66.07.04.13.11.2.16l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-.08-.04-.16-.06-.24-.1-.8-.44-1.64-.8-2.51-1.04-.13-.04-.26-.05-.39-.09-.82-.2-1.65-.31-2.49-.33-.13,0-.25-.02-.38-.02-.89,0-1.78.13-2.66.35-.18.04-.36.1-.54.15-.88.26-1.75.59-2.58,1.07l-25.49,14.72c-9.84,5.68-22.07,5.68-31.9,0-9.84-5.68-15.95-16.27-15.95-27.63s6.11-21.95,15.95-27.63Z"></path><path style="fill:#3969ca" d="M141.09,317.65l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c.08-.04.13-.11.2-.16.78-.48,1.51-1.02,2.15-1.66.1-.1.18-.21.28-.31.57-.6,1.08-1.26,1.51-1.97.07-.12.15-.22.22-.34.44-.77.77-1.6,1.03-2.47.05-.19.1-.37.14-.56.22-.89.37-1.81.37-2.76v-29.43c0-11.36,6.11-21.95,15.96-27.63s22.06-5.68,31.91,0l25.49,14.71c.82.48,1.69.8,2.57,1.06.19.06.37.11.56.16.87.21,1.76.34,2.64.35.04,0,.09.02.13.02.1,0,.19-.04.29-.04.83-.02,1.65-.13,2.45-.32.14-.03.28-.05.41-.09.87-.24,1.71-.6,2.51-1.04.08-.04.16-.06.24-.1l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-.08.04-.13.11-.2.16-.78.48-1.51,1.02-2.15,1.66-.1.1-.18.21-.28.31-.57.6-1.08,1.26-1.51,1.97-.07.12-.15.22-.22.34-.44.77-.77,1.6-1.03,2.47-.05.19-.1.37-.14.56-.22.89-.37,1.81-.37,2.76v29.43c0,11.36-6.11,21.95-15.95,27.63-9.84,5.68-22.07,5.68-31.91,0l-25.49-14.71c-.82-.48-1.69-.8-2.58-1.06-.19-.06-.37-.11-.55-.16-.88-.21-1.76-.34-2.65-.35-.13,0-.26.02-.4.02-.83.02-1.66.13-2.47.32-.13.03-.27.05-.4.09-.87.24-1.71.6-2.51,1.04-.08.04-.16.06-.24.1l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22Z"></path><path style="fill:#0294de" class="" d="M396.88,484.35l-50.97-29.43c-.08-.04-.17-.06-.24-.1-.8-.44-1.64-.79-2.51-1.03-.14-.04-.27-.06-.41-.09-.81-.19-1.64-.3-2.47-.32-.13,0-.26-.02-.39-.02-.89,0-1.78.13-2.66.35-.18.04-.36.1-.54.15-.88.26-1.76.59-2.58,1.07l-25.49,14.72c-9.84,5.68-22.06,5.68-31.9,0-9.84-5.68-15.96-16.27-15.96-27.63v-29.43c0-.95-.15-1.87-.37-2.76-.05-.19-.09-.37-.14-.56-.25-.86-.59-1.69-1.03-2.47-.07-.12-.15-.22-.22-.34-.43-.71-.94-1.37-1.51-1.97-.1-.1-.18-.21-.28-.31-.65-.63-1.37-1.18-2.15-1.66-.07-.04-.13-.11-.2-.16l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22l50.97,29.43c.08.04.17.06.25.1.8.44,1.63.79,2.5,1.03.14.04.29.06.43.09.8.19,1.61.3,2.43.32.1,0,.2.04.3.04.04,0,.09-.02.13-.02.88,0,1.77-.13,2.64-.34.19-.04.37-.1.56-.16.88-.26,1.75-.59,2.57-1.06l25.49-14.71c9.84-5.68,22.06-5.68,31.91,0,9.84,5.68,15.95,16.27,15.95,27.63v29.43c0,.95.15,1.87.37,2.76.05.19.09.37.14.56.25.86.59,1.69,1.03,2.47.07.12.15.22.22.34.43.71.94,1.37,1.51,1.97.1.1.18.21.28.31.65.63,1.37,1.18,2.15,1.66.07.04.13.11.2.16l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22Z"></path></svg><span class="text-sm font-medium" data-vivaldi-translated="">Девин</span></div></a><button aria-label="Edit Wiki" class="flex items-center rounded-md cursor-pointer transition-all border border-border bg-surface hover:border-border-hover hover:bg-component disabled:cursor-default disabled:opacity-50 disabled:hover:border-border disabled:hover:bg-surface gap-2 px-3 py-1.5 text-sm" data-vivaldi-translated=""><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256"><path d="M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H216a8,8,0,0,0,0-16H115.32l112-112A16,16,0,0,0,227.32,73.37ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.69,147.32,64l24-24L216,84.69Z"></path></svg>Редактировать Вики</button><button class="flex items-center rounded-md !text-white cursor-pointer transition-all border bg-blue-500 hover:bg-blue-600 border-blue-500 hover:border-blue-600 dark:bg-blue-900 dark:hover:bg-blue-800 dark:border-blue-900 dark:hover:border-blue-800 disabled:cursor-default disabled:opacity-50 disabled:hover:bg-blue-500 disabled:hover:border-blue-500 dark:disabled:hover:bg-blue-900 dark:disabled:hover:border-blue-900 gap-1.5 px-3 py-1.5 text-sm" aria-label="Share" data-state="closed" data-slot="tooltip-trigger" data-vivaldi-translated=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg><span data-vivaldi-translated="">Поделиться</span></button><button class="hover:bg-surface-hover flex h-8 w-8 cursor-pointer items-center justify-center rounded-md transition-colors" aria-label="Switch to dark mode" data-vivaldi-translated=""><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-5 w-5 text-gray-700"><path d="M235.54,150.21a104.84,104.84,0,0,1-37,52.91A104,104,0,0,1,32,120,103.09,103.09,0,0,1,52.88,57.48a104.84,104.84,0,0,1,52.91-37,8,8,0,0,1,10,10,88.08,88.08,0,0,0,109.8,109.8,8,8,0,0,1,10,10Z"></path></svg></button></div></div></div></div><!--$--><div class="w-full flex-1" data-vivaldi-translated=""><div class="container-wrapper relative mx-auto h-full px-0" data-vivaldi-translated=""><div class="container relative mx-auto flex h-full w-full flex-col gap-0 max-md:!px-0 md:flex-row md:gap-6 lg:gap-10" data-vivaldi-translated=""><div class="border-r-border hidden max-h-screen border-r border-dashed py-6 pr-4 transition-[border-radius] md:sticky md:left-0 md:top-20 md:block md:h-[calc(100vh-82px)] md:w-64 md:flex-shrink-0 md:overflow-y-auto lg:py-9 xl:w-72" data-vivaldi-translated=""><div class="flex h-full w-full max-w-full flex-shrink-0 flex-col overflow-hidden" style="scrollbar-color:var(--color-border) transparent" data-vivaldi-translated=""><div class="flex-shrink-0 px-2" data-vivaldi-translated=""><div class="text-secondary pb-1 text-xs" data-vivaldi-translated="">Последний раз индексировался: <!-- -->21 августа 2025 г<!-- --> (<a href="https://github.com/coddrago/Heroku/commits/431b8e1a" target="_blank" rel="noopener noreferrer" data-vivaldi-translated="">431b8e</a>)</div></div><ul class="flex-1 flex-shrink-0 space-y-1 overflow-y-auto py-1" style="scrollbar-width:none"><li style="padding-left:0" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/1-overview" data-vivaldi-translated="">Обзор</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/1.1-installation-guide" data-vivaldi-translated="">Руководство по установке</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/1.2-core-architecture" data-vivaldi-translated="">Основная архитектура</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/1.3-getting-started" data-vivaldi-translated="">Начало работы</a></li><li style="padding-left:0" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/2-core-systems" data-vivaldi-translated="">Основные системы</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/2.1-main-module-and-entry-point" data-vivaldi-translated="">Основной модуль и точка входа</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/2.2-module-system" data-vivaldi-translated="">Модульная система</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/2.3-command-dispatcher" data-vivaldi-translated="">Командный диспетчер</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/2.4-database-system" data-vivaldi-translated="">Система баз данных</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/2.5-web-interface" data-vivaldi-translated="">Веб-интерфейс</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/2.6-configuration-and-visual-feedback" data-vivaldi-translated="">Конфигурация и визуальная обратная связь</a></li><li style="padding-left:0" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/3-security-system" data-vivaldi-translated="">Система безопасности</a></li><li style="padding-left:0" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/4-inline-system" data-vivaldi-translated="">Встроенная система</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/4.1-inline-manager" data-vivaldi-translated="">Встроенный менеджер</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/4.2-forms" data-vivaldi-translated="">Формы</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/4.3-galleries" data-vivaldi-translated="">Галереи</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/4.4-lists" data-vivaldi-translated="">Списки</a></li><li style="padding-left:0" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/5-translation-and-internationalization" data-vivaldi-translated="">Перевод и интернационализация</a></li><li style="padding-left:0" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/6-utility-systems" data-vivaldi-translated="">Коммунальные системы</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/6.1-development-environment" data-vivaldi-translated="">Окружающая среда развития</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/6.2-dependency-management" data-vivaldi-translated="">Управление зависимостями</a></li><li style="padding-left:0" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/7-extending-heroku" data-vivaldi-translated="">Расширение Heroku</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="true" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules" data-vivaldi-translated="">Создание модулей</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/7.2-using-inline-features" data-vivaldi-translated="">Использование встроенных функций</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/7.3-working-with-the-database" data-vivaldi-translated="">Работа с базой данных</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/7.4-best-practices" data-vivaldi-translated="">Лучшие практики</a></li><li style="padding-left:0" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/8-deployment-and-maintenance" data-vivaldi-translated="">Развертывание и обслуживание</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/8.1-docker-deployment" data-vivaldi-translated="">Развертывание Docker</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/8.2-cloud-platform-deployment" data-vivaldi-translated="">Развертывание облачной платформы</a></li><li style="padding-left:12px" data-vivaldi-translated=""><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="https://deepwiki.com/coddrago/Heroku/8.3-mobile-and-termux-deployment" data-vivaldi-translated="">Развертывание мобильных устройств и Termux</a></li></ul></div></div><div class="flex h-full flex-1 flex-col overflow-hidden" data-vivaldi-translated=""><div class="bg-background border-b-border sticky top-0 z-10 border-b border-dashed md:hidden"><div class="flex cursor-pointer items-center gap-2 p-3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256" class="transition-transform"><path d="M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"></path></svg><span class="truncate text-base font-normal">Menu</span></div></div><div class="relative flex-1 overflow-y-auto px-3 pt-3 md:rounded-md md:px-0 md:pt-0 [&amp;_::selection]:bg-purple-500/40" style="scrollbar-color:var(--color-night) transparent" data-vivaldi-translated=""><div class="pb-30 mx-auto max-w-2xl md:pb-40 md:pt-6 lg:pt-8" data-vivaldi-translated=""><div class="prose prose-invert dark:prose-invert prose-headings:text-inherit prose-p:text-inherit max-w-none" data-vivaldi-translated=""><div data-vivaldi-translated=""><div class="prose-custom prose-custom-md prose-custom-gray !max-w-none text-neutral-300 [overflow-wrap:anywhere]" data-vivaldi-translated=""><h1 id="creating-modules" class="group" data-header="true" data-vivaldi-translated="">Создание модулей<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header" data-vivaldi-translated=""><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h1>
<details>
<summary data-vivaldi-translated="">Соответствующие исходные файлы</summary>
<ul>
<li><a href="https://github.com/coddrago/Heroku/blob/431b8e1a/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>CHANGELOG.md</span></a></li>
</ul>
</details>
<p data-vivaldi-translated="">В этом документе представлено подробное руководство по разработке пользовательских модулей для Heroku Telegram Userbot. В нем рассматриваются структура модуля, механизмы регистрации, обработчики команд и передовой опыт расширения функциональности фреймворка.</p>
<p data-vivaldi-translated="">Информацию об использовании встроенных функций в модулях см <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/7.2" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75" data-vivaldi-translated=""><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r" data-vivaldi-translated=""><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>7.2</span></a> Для работы с базой данных в модулях см <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/7.3" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75" data-vivaldi-translated=""><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r" data-vivaldi-translated=""><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>7.3</span></a> Передовой опыт и рекомендации по безопасности см <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/7.4" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75" data-vivaldi-translated=""><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r" data-vivaldi-translated=""><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>7.4</span></a></p>
<h2 id="module-fundamentals" class="group" data-header="true" data-vivaldi-translated="">Основы модуля<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header" data-vivaldi-translated=""><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p data-vivaldi-translated="">Модули являются строительными блоками функциональности Heroku Userbot. Каждый модуль — это класс Python, который наследуется от <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">Module</code> базовый класс и предоставляет определенные функции с помощью команд, наблюдателей, встроенных обработчиков и других механизмов.</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0" data-vivaldi-translated=""><div class="group relative cursor-pointer overflow-x-auto rounded-md bg-[#f2f1f0] p-4 transition-colors hover:bg-[#ededed] dark:bg-[#1f1f1f] dark:hover:bg-[#242424]" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«r3»" data-state="closed" data-slot="dialog-trigger" data-vivaldi-translated=""><div class="flex justify-center" data-vivaldi-translated=""><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="429.9405095398002 51.67792012082596 853.8959431198407 138.15748106758548" style="max-width: 100%; touch-action: none; user-select: none; cursor: grab; min-height: fit-content; max-height: 100%;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="mermaid-ha67r25roh" preserveAspectRatio="xMidYMid meet"><style>#mermaid-ha67r25roh{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-ha67r25roh .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-ha67r25roh .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-ha67r25roh .error-icon{fill:#dddddd;}#mermaid-ha67r25roh .error-text{fill:#222222;stroke:#222222;}#mermaid-ha67r25roh .edge-thickness-normal{stroke-width:1px;}#mermaid-ha67r25roh .edge-thickness-thick{stroke-width:3.5px;}#mermaid-ha67r25roh .edge-pattern-solid{stroke-dasharray:0;}#mermaid-ha67r25roh .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-ha67r25roh .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-ha67r25roh .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-ha67r25roh .marker{fill:#999;stroke:#999;}#mermaid-ha67r25roh .marker.cross{stroke:#999;}#mermaid-ha67r25roh svg{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;}#mermaid-ha67r25roh p{margin:0;}#mermaid-ha67r25roh .label{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;color:#333;}#mermaid-ha67r25roh .cluster-label text{fill:#444;}#mermaid-ha67r25roh .cluster-label span{color:#444;}#mermaid-ha67r25roh .cluster-label span p{background-color:transparent;}#mermaid-ha67r25roh .label text,#mermaid-ha67r25roh span{fill:#333;color:#333;}#mermaid-ha67r25roh .node rect,#mermaid-ha67r25roh .node circle,#mermaid-ha67r25roh .node ellipse,#mermaid-ha67r25roh .node polygon,#mermaid-ha67r25roh .node path{fill:#ffffff;stroke:#dddddd;stroke-width:1px;}#mermaid-ha67r25roh .rough-node .label text,#mermaid-ha67r25roh .node .label text,#mermaid-ha67r25roh .image-shape .label,#mermaid-ha67r25roh .icon-shape .label{text-anchor:middle;}#mermaid-ha67r25roh .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-ha67r25roh .rough-node .label,#mermaid-ha67r25roh .node .label,#mermaid-ha67r25roh .image-shape .label,#mermaid-ha67r25roh .icon-shape .label{text-align:center;}#mermaid-ha67r25roh .node.clickable{cursor:pointer;}#mermaid-ha67r25roh .root .anchor path{fill:#999!important;stroke-width:0;stroke:#999;}#mermaid-ha67r25roh .arrowheadPath{fill:#0b0b0b;}#mermaid-ha67r25roh .edgePath .path{stroke:#999;stroke-width:2.0px;}#mermaid-ha67r25roh .flowchart-link{stroke:#999;fill:none;}#mermaid-ha67r25roh .edgeLabel{background-color:#ffffff;text-align:center;}#mermaid-ha67r25roh .edgeLabel p{background-color:#ffffff;}#mermaid-ha67r25roh .edgeLabel rect{opacity:0.5;background-color:#ffffff;fill:#ffffff;}#mermaid-ha67r25roh .labelBkg{background-color:rgba(255, 255, 255, 0.5);}#mermaid-ha67r25roh .cluster rect{fill:#f8f8f8;stroke:#dddddd;stroke-width:1px;}#mermaid-ha67r25roh .cluster text{fill:#444;}#mermaid-ha67r25roh .cluster span{color:#444;}#mermaid-ha67r25roh div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:12px;background:#dddddd;border:1px solid hsl(0, 0%, 76.6666666667%);border-radius:2px;pointer-events:none;z-index:100;}#mermaid-ha67r25roh .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-ha67r25roh rect.text{fill:none;stroke-width:0;}#mermaid-ha67r25roh .icon-shape,#mermaid-ha67r25roh .image-shape{background-color:#ffffff;text-align:center;}#mermaid-ha67r25roh .icon-shape p,#mermaid-ha67r25roh .image-shape p{background-color:#ffffff;padding:2px;}#mermaid-ha67r25roh .icon-shape rect,#mermaid-ha67r25roh .image-shape rect{opacity:0.5;background-color:#ffffff;fill:#ffffff;}#mermaid-ha67r25roh :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-ha67r25roh_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-ha67r25roh_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-ha67r25roh_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-ha67r25roh_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-ha67r25roh_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-ha67r25roh_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-ha67r25roh_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M803.375,40.476L688.203,48.23C573.031,55.984,342.687,71.492,227.516,82.746C112.344,94,112.344,101,112.344,104.5L112.344,108"></path><path marker-end="url(#mermaid-ha67r25roh_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_C_0" d="M803.375,42.964L728.414,50.303C653.452,57.642,503.529,72.321,428.568,83.161C353.606,94,353.606,101,353.606,104.5L353.606,108"></path><path marker-end="url(#mermaid-ha67r25roh_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_D_0" d="M803.375,50.065L770.14,56.221C736.904,62.377,670.433,74.688,637.198,84.344C603.962,94,603.962,101,603.962,104.5L603.962,108"></path><path marker-end="url(#mermaid-ha67r25roh_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_E_0" d="M884.712,62L884.712,66.167C884.712,70.333,884.712,78.667,884.712,86.333C884.712,94,884.712,101,884.712,104.5L884.712,108"></path><path marker-end="url(#mermaid-ha67r25roh_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_F_0" d="M966.05,50.418L998.216,56.515C1030.381,62.612,1094.712,74.806,1126.878,84.403C1159.044,94,1159.044,101,1159.044,104.5L1159.044,108"></path><path marker-end="url(#mermaid-ha67r25roh_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_G_0" d="M966.05,42.929L1041.398,50.274C1116.746,57.619,1267.442,72.31,1342.79,83.155C1418.137,94,1418.137,101,1418.137,104.5L1418.137,108"></path><path marker-end="url(#mermaid-ha67r25roh_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_H_0" d="M966.05,40.589L1078.625,48.324C1191.2,56.059,1416.35,71.53,1528.925,82.765C1641.5,94,1641.5,101,1641.5,104.5L1641.5,108"></path><path marker-end="url(#mermaid-ha67r25roh_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_I_0" d="M112.344,166L112.344,170.167C112.344,174.333,112.344,182.667,112.344,190.333C112.344,198,112.344,205,112.344,208.5L112.344,212"></path><path marker-end="url(#mermaid-ha67r25roh_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_J_0" d="M353.606,166L353.606,170.167C353.606,174.333,353.606,182.667,353.606,190.333C353.606,198,353.606,205,353.606,208.5L353.606,212"></path><path marker-end="url(#mermaid-ha67r25roh_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_K_0" d="M603.962,166L603.962,170.167C603.962,174.333,603.962,182.667,603.962,190.333C603.962,198,603.962,205,603.962,208.5L603.962,212"></path><path marker-end="url(#mermaid-ha67r25roh_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_L_0" d="M884.712,166L884.712,170.167C884.712,174.333,884.712,182.667,884.712,190.333C884.712,198,884.712,205,884.712,208.5L884.712,212"></path><path marker-end="url(#mermaid-ha67r25roh_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_F_M_0" d="M1159.044,166L1159.044,170.167C1159.044,174.333,1159.044,182.667,1159.044,190.333C1159.044,198,1159.044,205,1159.044,208.5L1159.044,212"></path><path marker-end="url(#mermaid-ha67r25roh_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_N_0" d="M1418.137,166L1418.137,170.167C1418.137,174.333,1418.137,182.667,1418.137,190.333C1418.137,198,1418.137,205,1418.137,208.5L1418.137,212"></path><path marker-end="url(#mermaid-ha67r25roh_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_H_O_0" d="M1641.5,166L1641.5,170.167C1641.5,174.333,1641.5,182.667,1641.5,190.333C1641.5,198,1641.5,205,1641.5,208.5L1641.5,212"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="edgeLabel" data-vivaldi-translated=""></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="edgeLabel" data-vivaldi-translated=""></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="edgeLabel" data-vivaldi-translated=""></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="edgeLabel" data-vivaldi-translated=""></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="edgeLabel" data-vivaldi-translated=""></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="edgeLabel" data-vivaldi-translated=""></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="edgeLabel" data-vivaldi-translated=""></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="edgeLabel" data-vivaldi-translated=""></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="edgeLabel" data-vivaldi-translated=""></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="edgeLabel" data-vivaldi-translated=""></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="edgeLabel" data-vivaldi-translated=""></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="edgeLabel" data-vivaldi-translated=""></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="edgeLabel" data-vivaldi-translated=""></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="edgeLabel" data-vivaldi-translated=""></span></div></foreignobject></g></g></g><g class="nodes"><g transform="translate(884.7124938964844, 35)" id="flowchart-A-0" class="node default"><rect height="54" width="162.6750030517578" y="-27" x="-81.3375015258789" style="" class="basic label-container"></rect><g transform="translate(-51.337501525878906, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="102.67500305175781"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="nodeLabel" data-vivaldi-translated=""><p data-vivaldi-translated="">загрузчик.Модуль</p></span></div></foreignobject></g></g><g transform="translate(112.34375, 139)" id="flowchart-B-1" class="node default"><rect height="54" width="194.4375" y="-27" x="-97.21875" style="" class="basic label-container"></rect><g transform="translate(-67.21875, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="134.4375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="nodeLabel" data-vivaldi-translated=""><p data-vivaldi-translated="">@loader.command</p></span></div></foreignobject></g></g><g transform="translate(353.6062469482422, 139)" id="flowchart-C-3" class="node default"><rect height="54" width="179" y="-27" x="-89.5" style="" class="basic label-container"></rect><g transform="translate(-59.5, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="119"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="nodeLabel" data-vivaldi-translated=""><p data-vivaldi-translated="">@loader.watcher</p></span></div></foreignobject></g></g><g transform="translate(603.9624938964844, 139)" id="flowchart-D-5" class="node default"><rect height="54" width="221.71250915527344" y="-27" x="-110.85625457763672" style="" class="basic label-container"></rect><g transform="translate(-80.85625457763672, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="161.71250915527344"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="nodeLabel" data-vivaldi-translated=""><p data-vivaldi-translated="">@loader.inline_handler</p></span></div></foreignobject></g></g><g transform="translate(884.7124938964844, 139)" id="flowchart-E-7" class="node default"><rect height="54" width="239.78750610351562" y="-27" x="-119.89375305175781" style="" class="basic label-container"></rect><g transform="translate(-89.89375305175781, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="179.78750610351562"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="nodeLabel" data-vivaldi-translated=""><p data-vivaldi-translated="">@loader.callback_handler</p></span></div></foreignobject></g></g><g transform="translate(1159.0437469482422, 139)" id="flowchart-F-9" class="node default"><rect height="54" width="208.875" y="-27" x="-104.4375" style="" class="basic label-container"></rect><g transform="translate(-74.4375, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="148.875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="nodeLabel" data-vivaldi-translated=""><p data-vivaldi-translated="">@loader.raw_handler</p></span></div></foreignobject></g></g><g transform="translate(1418.1374969482422, 139)" id="flowchart-G-11" class="node default"><rect height="54" width="209.3125" y="-27" x="-104.65625" style="" class="basic label-container"></rect><g transform="translate(-74.65625, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="149.3125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="nodeLabel" data-vivaldi-translated=""><p data-vivaldi-translated="">загрузчик.ModuleConfig</p></span></div></foreignobject></g></g><g transform="translate(1641.5, 139)" id="flowchart-H-13" class="node default"><rect height="54" width="137.4124984741211" y="-27" x="-68.70624923706055" style="" class="basic label-container"></rect><g transform="translate(-38.70624923706055, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="77.4124984741211"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="nodeLabel" data-vivaldi-translated=""><p data-vivaldi-translated="">строки диктовка</p></span></div></foreignobject></g></g><g transform="translate(112.34375, 243)" id="flowchart-I-15" class="node default"><rect height="54" width="208.6875" y="-27" x="-104.34375" style="" class="basic label-container"></rect><g transform="translate(-74.34375, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="148.6875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="nodeLabel" data-vivaldi-translated=""><p data-vivaldi-translated="">CommandDispatcher</p></span></div></foreignobject></g></g><g transform="translate(353.6062469482422, 243)" id="flowchart-J-17" class="node default"><rect height="54" width="173.8375015258789" y="-27" x="-86.91875076293945" style="" class="basic label-container"></rect><g transform="translate(-56.91875076293945, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="113.8375015258789"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="nodeLabel" data-vivaldi-translated=""><p data-vivaldi-translated="">EventDispatcher</p></span></div></foreignobject></g></g><g transform="translate(603.9624938964844, 243)" id="flowchart-K-19" class="node default"><rect height="54" width="161.5500030517578" y="-27" x="-80.7750015258789" style="" class="basic label-container"></rect><g transform="translate(-50.775001525878906, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="101.55000305175781"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="nodeLabel" data-vivaldi-translated=""><p data-vivaldi-translated="">InlineManager</p></span></div></foreignobject></g></g><g transform="translate(884.7124938964844, 243)" id="flowchart-L-21" class="node default"><rect height="54" width="161.5500030517578" y="-27" x="-80.7750015258789" style="" class="basic label-container"></rect><g transform="translate(-50.775001525878906, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="101.55000305175781"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="nodeLabel" data-vivaldi-translated=""><p data-vivaldi-translated="">InlineManager</p></span></div></foreignobject></g></g><g transform="translate(1159.0437469482422, 243)" id="flowchart-M-23" class="node default"><rect height="54" width="164.8375015258789" y="-27" x="-82.41875076293945" style="" class="basic label-container"></rect><g transform="translate(-52.41875076293945, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="104.8375015258789"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="nodeLabel" data-vivaldi-translated=""><p data-vivaldi-translated="">TelegramКлиент</p></span></div></foreignobject></g></g><g transform="translate(1418.1374969482422, 243)" id="flowchart-N-25" class="node default"><rect height="54" width="149.76250457763672" y="-27" x="-74.88125228881836" style="" class="basic label-container"></rect><g transform="translate(-44.88125228881836, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="89.76250457763672"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="nodeLabel" data-vivaldi-translated=""><p data-vivaldi-translated="">Конфигуратор</p></span></div></foreignobject></g></g><g transform="translate(1641.5, 243)" id="flowchart-O-27" class="node default"><rect height="54" width="128.9250030517578" y="-27" x="-64.4625015258789" style="" class="basic label-container"></rect><g transform="translate(-34.462501525878906, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="68.92500305175781"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span class="nodeLabel" data-vivaldi-translated=""><p data-vivaldi-translated="">Переводчик</p></span></div></foreignobject></g></g></g></g></g></svg></div><div class="bg-input-dark absolute right-2 top-2 rounded-sm p-1 opacity-0 transition-opacity group-hover:opacity-100" data-vivaldi-translated=""><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M216,48V96a8,8,0,0,1-16,0V67.31l-42.34,42.35a8,8,0,0,1-11.32-11.32L188.69,56H160a8,8,0,0,1,0-16h48A8,8,0,0,1,216,48ZM98.34,146.34,56,188.69V160a8,8,0,0,0-16,0v48a8,8,0,0,0,8,8H96a8,8,0,0,0,0-16H67.31l42.35-42.34a8,8,0,0,0-11.32-11.32ZM208,152a8,8,0,0,0-8,8v28.69l-42.34-42.35a8,8,0,0,0-11.32,11.32L188.69,200H160a8,8,0,0,0,0,16h48a8,8,0,0,0,8-8V160A8,8,0,0,0,208,152ZM67.31,56H96a8,8,0,0,0,0-16H48a8,8,0,0,0-8,8V96a8,8,0,0,0,16,0V67.31l42.34,42.35a8,8,0,0,0,11.32-11.32Z"></path></svg></div></div></pre>
<p data-vivaldi-translated="">Источники: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75" data-vivaldi-translated=""><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r" data-vivaldi-translated=""><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a> <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/modules/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75" data-vivaldi-translated=""><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r" data-vivaldi-translated=""><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/modules/loader.py</span></a></p>
<h2 id="creating-a-basic-module" class="group" data-header="true" data-vivaldi-translated="">Создание базового модуля<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header" data-vivaldi-translated=""><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p data-vivaldi-translated="">Базовый модуль требует наследования от <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">Module</code> базовый класс и определение по крайней мере <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">strings</code> словарь с <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">name</code> вход. Команды определяются как методы, украшенные <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">@loader.command</code>.</p>
<p data-vivaldi-translated="">Вот структура простого модуля:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0" data-vivaldi-translated=""><div class="group relative cursor-pointer overflow-x-auto rounded-md bg-[#f2f1f0] p-4 transition-colors hover:bg-[#ededed] dark:bg-[#1f1f1f] dark:hover:bg-[#242424]" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«r6»" data-state="closed" data-slot="dialog-trigger" data-vivaldi-translated=""><div class="flex justify-center" data-vivaldi-translated=""><svg aria-roledescription="class" role="graphics-document document" viewBox="0 0 391.2562561035156 474" style="max-width: 100%; touch-action: none; user-select: none; cursor: grab; min-height: fit-content; max-height: 100%;" class="classDiagram" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="mermaid-hhw9bgnhuks" preserveAspectRatio="xMidYMid meet"><style>#mermaid-hhw9bgnhuks{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-hhw9bgnhuks .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-hhw9bgnhuks .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-hhw9bgnhuks .error-icon{fill:#dddddd;}#mermaid-hhw9bgnhuks .error-text{fill:#222222;stroke:#222222;}#mermaid-hhw9bgnhuks .edge-thickness-normal{stroke-width:1px;}#mermaid-hhw9bgnhuks .edge-thickness-thick{stroke-width:3.5px;}#mermaid-hhw9bgnhuks .edge-pattern-solid{stroke-dasharray:0;}#mermaid-hhw9bgnhuks .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-hhw9bgnhuks .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-hhw9bgnhuks .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-hhw9bgnhuks .marker{fill:#999;stroke:#999;}#mermaid-hhw9bgnhuks .marker.cross{stroke:#999;}#mermaid-hhw9bgnhuks svg{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;}#mermaid-hhw9bgnhuks p{margin:0;}#mermaid-hhw9bgnhuks g.classGroup text{fill:#dddddd;stroke:none;font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:10px;}#mermaid-hhw9bgnhuks g.classGroup text .title{font-weight:bolder;}#mermaid-hhw9bgnhuks .nodeLabel,#mermaid-hhw9bgnhuks .edgeLabel{color:#333333;}#mermaid-hhw9bgnhuks .edgeLabel .label rect{fill:#ffffff;}#mermaid-hhw9bgnhuks .label text{fill:#333333;}#mermaid-hhw9bgnhuks .labelBkg{background:#ffffff;}#mermaid-hhw9bgnhuks .edgeLabel .label span{background:#ffffff;}#mermaid-hhw9bgnhuks .classTitle{font-weight:bolder;}#mermaid-hhw9bgnhuks .node rect,#mermaid-hhw9bgnhuks .node circle,#mermaid-hhw9bgnhuks .node ellipse,#mermaid-hhw9bgnhuks .node polygon,#mermaid-hhw9bgnhuks .node path{fill:#ffffff;stroke:#dddddd;stroke-width:1px;}#mermaid-hhw9bgnhuks .divider{stroke:#dddddd;stroke-width:1;}#mermaid-hhw9bgnhuks g.clickable{cursor:pointer;}#mermaid-hhw9bgnhuks g.classGroup rect{fill:#ffffff;stroke:#dddddd;}#mermaid-hhw9bgnhuks g.classGroup line{stroke:#dddddd;stroke-width:1;}#mermaid-hhw9bgnhuks .classLabel .box{stroke:none;stroke-width:0;fill:#ffffff;opacity:0.5;}#mermaid-hhw9bgnhuks .classLabel .label{fill:#dddddd;font-size:10px;}#mermaid-hhw9bgnhuks .relation{stroke:#999;stroke-width:1;fill:none;}#mermaid-hhw9bgnhuks .dashed-line{stroke-dasharray:3;}#mermaid-hhw9bgnhuks .dotted-line{stroke-dasharray:1 2;}#mermaid-hhw9bgnhuks #compositionStart,#mermaid-hhw9bgnhuks .composition{fill:#999!important;stroke:#999!important;stroke-width:1;}#mermaid-hhw9bgnhuks #compositionEnd,#mermaid-hhw9bgnhuks .composition{fill:#999!important;stroke:#999!important;stroke-width:1;}#mermaid-hhw9bgnhuks #dependencyStart,#mermaid-hhw9bgnhuks .dependency{fill:#999!important;stroke:#999!important;stroke-width:1;}#mermaid-hhw9bgnhuks #dependencyStart,#mermaid-hhw9bgnhuks .dependency{fill:#999!important;stroke:#999!important;stroke-width:1;}#mermaid-hhw9bgnhuks #extensionStart,#mermaid-hhw9bgnhuks .extension{fill:transparent!important;stroke:#999!important;stroke-width:1;}#mermaid-hhw9bgnhuks #extensionEnd,#mermaid-hhw9bgnhuks .extension{fill:transparent!important;stroke:#999!important;stroke-width:1;}#mermaid-hhw9bgnhuks #aggregationStart,#mermaid-hhw9bgnhuks .aggregation{fill:transparent!important;stroke:#999!important;stroke-width:1;}#mermaid-hhw9bgnhuks #aggregationEnd,#mermaid-hhw9bgnhuks .aggregation{fill:transparent!important;stroke:#999!important;stroke-width:1;}#mermaid-hhw9bgnhuks #lollipopStart,#mermaid-hhw9bgnhuks .lollipop{fill:#ffffff!important;stroke:#999!important;stroke-width:1;}#mermaid-hhw9bgnhuks #lollipopEnd,#mermaid-hhw9bgnhuks .lollipop{fill:#ffffff!important;stroke:#999!important;stroke-width:1;}#mermaid-hhw9bgnhuks .edgeTerminals{font-size:11px;line-height:initial;}#mermaid-hhw9bgnhuks .classTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-hhw9bgnhuks :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="18" class="marker aggregation class" id="mermaid-hhw9bgnhuks_class-aggregationStart"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="1" class="marker aggregation class" id="mermaid-hhw9bgnhuks_class-aggregationEnd"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="18" class="marker extension class" id="mermaid-hhw9bgnhuks_class-extensionStart"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="1" class="marker extension class" id="mermaid-hhw9bgnhuks_class-extensionEnd"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="18" class="marker composition class" id="mermaid-hhw9bgnhuks_class-compositionStart"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="1" class="marker composition class" id="mermaid-hhw9bgnhuks_class-compositionEnd"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="6" class="marker dependency class" id="mermaid-hhw9bgnhuks_class-dependencyStart"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="13" class="marker dependency class" id="mermaid-hhw9bgnhuks_class-dependencyEnd"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="13" class="marker lollipop class" id="mermaid-hhw9bgnhuks_class-lollipopStart"><circle r="6" cy="7" cx="7" fill="transparent" stroke="black"></circle></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="1" class="marker lollipop class" id="mermaid-hhw9bgnhuks_class-lollipopEnd"><circle r="6" cy="7" cx="7" fill="transparent" stroke="black"></circle></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-start="url(#mermaid-hhw9bgnhuks_class-extensionStart)" style=";" class="edge-thickness-normal edge-pattern-solid relation" id="id_loader_Module_CustomModule_1" d="M195.628,290L195.628,291.167C195.628,292.333,195.628,294.667,195.628,300C195.628,305.333,195.628,313.667,195.628,317.833L195.628,322"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, -12)" class="label"><foreignobject height="24" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" data-vivaldi-translated=""><span class="edgeLabel" style=";display: inline-block" data-vivaldi-translated=""></span></div></foreignobject></g></g></g><g class="nodes"><g transform="translate(195.6281280517578, 140)" id="classId-loader_Module-0" class="node default"><g class="basic label-container"><path style="" fill="#ffffff" stroke-width="0" stroke="none" d="M-122.07188415527344 -132 L122.07188415527344 -132 L122.07188415527344 132 L-122.07188415527344 132"></path><path style="" fill="none" stroke-width="1.3" stroke="#dddddd" d="M-122.07188415527344 -132 C-62.24666488248927 -132, -2.4214456097051027 -132, 122.07188415527344 -132 M-122.07188415527344 -132 C-36.094097839037545 -132, 49.88368847719835 -132, 122.07188415527344 -132 M122.07188415527344 -132 C122.07188415527344 -51.86776077143003, 122.07188415527344 28.264478457139944, 122.07188415527344 132 M122.07188415527344 -132 C122.07188415527344 -68.77930980035822, 122.07188415527344 -5.558619600716426, 122.07188415527344 132 M122.07188415527344 132 C34.60227773036958 132, -52.86732869453428 132, -122.07188415527344 132 M122.07188415527344 132 C70.39657906055267 132, 18.721273965831898 132, -122.07188415527344 132 M-122.07188415527344 132 C-122.07188415527344 61.66755959666574, -122.07188415527344 -8.66488080666852, -122.07188415527344 -132 M-122.07188415527344 132 C-122.07188415527344 43.48283217791287, -122.07188415527344 -45.03433564417426, -122.07188415527344 -132"></path></g><g transform="translate(0, -108)" class="annotation-group text"></g><g transform="translate(-56.118751525878906, -108)" class="label-group text"><g transform="translate(0,-12)" style="font-weight: bolder" class="label"><foreignobject height="24" width="112.23750305175781"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 160px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span style="" class="nodeLabel markdown-node-label" data-vivaldi-translated=""><p data-vivaldi-translated="">модуль_загрузчика</p></span></div></foreignobject></g></g><g transform="translate(-110.07188415527344, -60)" class="members-group text"><g transform="translate(0,-12)" style="" class="label"><foreignobject height="24" width="91.82500457763672"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 153px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span style="" class="nodeLabel markdown-node-label" data-vivaldi-translated=""><p data-vivaldi-translated="">+строки: dict</p></span></div></foreignobject></g><g transform="translate(0,12)" style="" class="label"><foreignobject height="24" width="164.02500915527344"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 223px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span style="" class="nodeLabel markdown-node-label" data-vivaldi-translated=""><p data-vivaldi-translated="">+config: ModuleConfig</p></span></div></foreignobject></g></g><g transform="translate(-110.07188415527344, 12)" class="methods-group text"><g transform="translate(0,-12)" style="" class="label"><foreignobject height="24" width="102.82500457763672"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 162px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span style="" class="nodeLabel markdown-node-label" data-vivaldi-translated=""><p data-vivaldi-translated="">+internal_init()</p></span></div></foreignobject></g><g transform="translate(0,12)" style="" class="label"><foreignobject height="24" width="137.3625030517578"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 198px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span style="" class="nodeLabel markdown-node-label" data-vivaldi-translated=""><p data-vivaldi-translated="">+config_complete()</p></span></div></foreignobject></g><g transform="translate(0,36)" style="" class="label"><foreignobject height="24" width="104.4625015258789"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 165px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span style="" class="nodeLabel markdown-node-label" data-vivaldi-translated=""><p data-vivaldi-translated="">+клиент_готов()</p></span></div></foreignobject></g><g transform="translate(0,60)" style="" class="label"><foreignobject height="24" width="94.5999984741211"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 152px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span style="" class="nodeLabel markdown-node-label" data-vivaldi-translated=""><p data-vivaldi-translated="">+on_unload()</p></span></div></foreignobject></g><g transform="translate(0,84)" style="" class="label"><foreignobject height="24" width="151.6750030517578"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 212px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span style="" class="nodeLabel markdown-node-label" data-vivaldi-translated=""><p data-vivaldi-translated="">+обработчик_команд()</p></span></div></foreignobject></g></g><g style="" class="divider"><path style="" fill="none" stroke-width="1.3" stroke="#dddddd" d="M-122.07188415527344 -84 C-31.137917155270657 -84, 59.796049844732124 -84, 122.07188415527344 -84 M-122.07188415527344 -84 C-54.4369724960614 -84, 13.197939163150636 -84, 122.07188415527344 -84"></path></g><g style="" class="divider"><path style="" fill="none" stroke-width="1.3" stroke="#dddddd" d="M-122.07188415527344 -12 C-25.59715004032728 -12, 70.87758407461888 -12, 122.07188415527344 -12 M-122.07188415527344 -12 C-29.116929254335403 -12, 63.83802564660263 -12, 122.07188415527344 -12"></path></g></g><g transform="translate(195.6281280517578, 394)" id="classId-CustomModule-1" class="node default"><g class="basic label-container"><path style="" fill="#ffffff" stroke-width="0" stroke="none" d="M-187.6281280517578 -72 L187.6281280517578 -72 L187.6281280517578 72 L-187.6281280517578 72"></path><path style="" fill="none" stroke-width="1.3" stroke="#dddddd" d="M-187.6281280517578 -72 C-54.18669810283032 -72, 79.25473184609717 -72, 187.6281280517578 -72 M-187.6281280517578 -72 C-100.74365948721504 -72, -13.85919092267227 -72, 187.6281280517578 -72 M187.6281280517578 -72 C187.6281280517578 -23.265767128903256, 187.6281280517578 25.468465742193487, 187.6281280517578 72 M187.6281280517578 -72 C187.6281280517578 -19.961668510690366, 187.6281280517578 32.07666297861927, 187.6281280517578 72 M187.6281280517578 72 C63.04199645065013 72, -61.54413515045755 72, -187.6281280517578 72 M187.6281280517578 72 C67.10868816360649 72, -53.41075172454484 72, -187.6281280517578 72 M-187.6281280517578 72 C-187.6281280517578 19.23139654317569, -187.6281280517578 -33.53720691364862, -187.6281280517578 -72 M-187.6281280517578 72 C-187.6281280517578 20.78142315341099, -187.6281280517578 -30.43715369317802, -187.6281280517578 -72"></path></g><g transform="translate(0, -48)" class="annotation-group text"></g><g transform="translate(-57.59375, -48)" class="label-group text"><g transform="translate(0,-12)" style="font-weight: bolder" class="label"><foreignobject height="24" width="115.1875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 161px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span style="" class="nodeLabel markdown-node-label" data-vivaldi-translated=""><p data-vivaldi-translated="">ПользовательскийМодуль</p></span></div></foreignobject></g></g><g transform="translate(-175.6281280517578, 0)" class="members-group text"><g transform="translate(0,-12)" style="" class="label"><foreignobject height="24" width="91.82500457763672"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 153px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span style="" class="nodeLabel markdown-node-label" data-vivaldi-translated=""><p data-vivaldi-translated="">+строки: dict</p></span></div></foreignobject></g></g><g transform="translate(-175.6281280517578, 48)" class="methods-group text"><g transform="translate(0,-12)" style="" class="label"><foreignobject height="24" width="293.6625061035156"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 358px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml" data-vivaldi-translated=""><span style="" class="nodeLabel markdown-node-label" data-vivaldi-translated=""><p data-vivaldi-translated="">+@loader_command обработчик_команд()</p></span></div></foreignobject></g></g><g style="" class="divider"><path style="" fill="none" stroke-width="1.3" stroke="#dddddd" d="M-187.6281280517578 -24 C-92.05132643951994 -24, 3.5254751727179325 -24, 187.6281280517578 -24 M-187.6281280517578 -24 C-71.40584463418342 -24, 44.816438783390964 -24, 187.6281280517578 -24"></path></g><g style="" class="divider"><path style="" fill="none" stroke-width="1.3" stroke="#dddddd" d="M-187.6281280517578 24 C-42.098010890339765 24, 103.43210627107828 24, 187.6281280517578 24 M-187.6281280517578 24 C-76.25572103203538 24, 35.11668598768705 24, 187.6281280517578 24"></path></g></g></g></g></g></svg></div><div class="bg-input-dark absolute right-2 top-2 rounded-sm p-1 opacity-0 transition-opacity group-hover:opacity-100" data-vivaldi-translated=""><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M216,48V96a8,8,0,0,1-16,0V67.31l-42.34,42.35a8,8,0,0,1-11.32-11.32L188.69,56H160a8,8,0,0,1,0-16h48A8,8,0,0,1,216,48ZM98.34,146.34,56,188.69V160a8,8,0,0,0-16,0v48a8,8,0,0,0,8,8H96a8,8,0,0,0,0-16H67.31l42.35-42.34a8,8,0,0,0-11.32-11.32ZM208,152a8,8,0,0,0-8,8v28.69l-42.34-42.35a8,8,0,0,0-11.32,11.32L188.69,200H160a8,8,0,0,0,0,16h48a8,8,0,0,0,8-8V160A8,8,0,0,0,208,152ZM67.31,56H96a8,8,0,0,0,0-16H48a8,8,0,0,0-8,8V96a8,8,0,0,0,16,0V67.31l42.34,42.35a8,8,0,0,0,11.32-11.32Z"></path></svg></div></div></pre>
<p data-vivaldi-translated="">Источники: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75" data-vivaldi-translated=""><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r" data-vivaldi-translated=""><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a> <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/modules/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75" data-vivaldi-translated=""><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r" data-vivaldi-translated=""><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/modules/loader.py</span></a></p>
<h3 id="minimal-module-example" class="group" data-header="true" data-vivaldi-translated="">Пример минимального модуля<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header" data-vivaldi-translated=""><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h3>
<p data-vivaldi-translated="">Минимальный модуль будет иметь следующую структуру:</p>
<ol>
<li data-vivaldi-translated="">Импортируйте загрузчик</li>
<li data-vivaldi-translated="">Определите класс, наследующий от <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">loader.Module</code></li>
<li data-vivaldi-translated="">Определите а <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">strings</code> словарь с как минимум <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">name</code> вход</li>
<li data-vivaldi-translated="">Определите методы команд, украшенные <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">@loader.command</code></li>
</ol>
<p data-vivaldi-translated="">Модуль будет автоматически зарегистрирован при загрузке, а его команды будут доступны пользователям.</p>
<p data-vivaldi-translated="">Источники: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75" data-vivaldi-translated=""><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r" data-vivaldi-translated=""><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a> <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/modules/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75" data-vivaldi-translated=""><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r" data-vivaldi-translated=""><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/modules/loader.py</span></a></p>
<h2 id="module-registration-process" class="group" data-header="true" data-vivaldi-translated="">Процесс регистрации модуля<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header" data-vivaldi-translated=""><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p data-vivaldi-translated="">При загрузке модуля он проходит несколько этапов регистрации:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0" data-vivaldi-translated=""><div class="group relative cursor-pointer overflow-x-auto rounded-md bg-[#f2f1f0] p-4 transition-colors hover:bg-[#ededed] dark:bg-[#1f1f1f] dark:hover:bg-[#242424]" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«r9»" data-state="closed" data-slot="dialog-trigger"><div class="flex justify-center"><svg aria-roledescription="sequence" role="graphics-document document" viewBox="-50 -10 1874 721" style="max-width: 100%; touch-action: none; user-select: none; cursor: grab; min-height: fit-content; max-height: 100%;" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="mermaid-17qur7hlbjm" preserveAspectRatio="xMidYMid meet"><g><rect class="actor actor-bottom" ry="3" rx="3" name="TelegramClient" height="65" width="150" stroke="#666" fill="#eaeaea" y="635" x="1624"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="667.5" x="1699"><tspan dy="0" x="1699">TelegramClient</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="InlineManager" height="65" width="150" stroke="#666" fill="#eaeaea" y="635" x="1424"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="667.5" x="1499"><tspan dy="0" x="1499">InlineManager</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="CommandDispatcher" height="65" width="174" stroke="#666" fill="#eaeaea" y="635" x="1200"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="667.5" x="1287"><tspan dy="0" x="1287">CommandDispatcher</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="ModuleInstance" height="65" width="150" stroke="#666" fill="#eaeaea" y="635" x="1000"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="667.5" x="1075"><tspan dy="0" x="1075">ModuleInstance</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="LoaderModule" height="65" width="150" stroke="#666" fill="#eaeaea" y="635" x="800"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="667.5" x="875"><tspan dy="0" x="875">LoaderModule</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="Module" height="65" width="150" stroke="#666" fill="#eaeaea" y="635" x="600"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="667.5" x="675"><tspan dy="0" x="675">Module</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="Modules" height="65" width="150" stroke="#666" fill="#eaeaea" y="635" x="400"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="667.5" x="475"><tspan dy="0" x="475">Modules</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="LoaderMod" height="65" width="150" stroke="#666" fill="#eaeaea" y="635" x="200"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="667.5" x="275"><tspan dy="0" x="275">LoaderMod</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="User" height="65" width="150" stroke="#666" fill="#eaeaea" y="635" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="667.5" x="75"><tspan dy="0" x="75">User</tspan></text></g><g><line name="TelegramClient" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="635" x2="1699" y1="65" x1="1699" id="actor8"></line><g id="root-8"><rect class="actor actor-top" ry="3" rx="3" name="TelegramClient" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="1624"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="1699"><tspan dy="0" x="1699">TelegramClient</tspan></text></g></g><g><line name="InlineManager" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="635" x2="1499" y1="65" x1="1499" id="actor7"></line><g id="root-7"><rect class="actor actor-top" ry="3" rx="3" name="InlineManager" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="1424"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="1499"><tspan dy="0" x="1499">InlineManager</tspan></text></g></g><g><line name="CommandDispatcher" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="635" x2="1287" y1="65" x1="1287" id="actor6"></line><g id="root-6"><rect class="actor actor-top" ry="3" rx="3" name="CommandDispatcher" height="65" width="174" stroke="#666" fill="#eaeaea" y="0" x="1200"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="1287"><tspan dy="0" x="1287">CommandDispatcher</tspan></text></g></g><g><line name="ModuleInstance" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="635" x2="1075" y1="65" x1="1075" id="actor5"></line><g id="root-5"><rect class="actor actor-top" ry="3" rx="3" name="ModuleInstance" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="1000"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="1075"><tspan dy="0" x="1075">ModuleInstance</tspan></text></g></g><g><line name="LoaderModule" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="635" x2="875" y1="65" x1="875" id="actor4"></line><g id="root-4"><rect class="actor actor-top" ry="3" rx="3" name="LoaderModule" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="800"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="875"><tspan dy="0" x="875">LoaderModule</tspan></text></g></g><g><line name="Module" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="635" x2="675" y1="65" x1="675" id="actor3"></line><g id="root-3"><rect class="actor actor-top" ry="3" rx="3" name="Module" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="600"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="675"><tspan dy="0" x="675">Module</tspan></text></g></g><g><line name="Modules" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="635" x2="475" y1="65" x1="475" id="actor2"></line><g id="root-2"><rect class="actor actor-top" ry="3" rx="3" name="Modules" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="400"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="475"><tspan dy="0" x="475">Modules</tspan></text></g></g><g><line name="LoaderMod" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="635" x2="275" y1="65" x1="275" id="actor1"></line><g id="root-1"><rect class="actor actor-top" ry="3" rx="3" name="LoaderMod" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="200"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="275"><tspan dy="0" x="275">LoaderMod</tspan></text></g></g><g><line name="User" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="635" x2="75" y1="65" x1="75" id="actor0"></line><g id="root-0"><rect class="actor actor-top" ry="3" rx="3" name="User" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="75"><tspan dy="0" x="75">User</tspan></text></g></g><style>#mermaid-17qur7hlbjm{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-17qur7hlbjm .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-17qur7hlbjm .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-17qur7hlbjm .error-icon{fill:#dddddd;}#mermaid-17qur7hlbjm .error-text{fill:#222222;stroke:#222222;}#mermaid-17qur7hlbjm .edge-thickness-normal{stroke-width:1px;}#mermaid-17qur7hlbjm .edge-thickness-thick{stroke-width:3.5px;}#mermaid-17qur7hlbjm .edge-pattern-solid{stroke-dasharray:0;}#mermaid-17qur7hlbjm .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-17qur7hlbjm .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-17qur7hlbjm .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-17qur7hlbjm .marker{fill:#999;stroke:#999;}#mermaid-17qur7hlbjm .marker.cross{stroke:#999;}#mermaid-17qur7hlbjm svg{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;}#mermaid-17qur7hlbjm p{margin:0;}#mermaid-17qur7hlbjm .actor{stroke:#cccccc;fill:#ffffff;}#mermaid-17qur7hlbjm text.actor&gt;tspan{fill:#333;stroke:none;}#mermaid-17qur7hlbjm .actor-line{stroke:#cccccc;}#mermaid-17qur7hlbjm .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#999999;}#mermaid-17qur7hlbjm .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#999999;}#mermaid-17qur7hlbjm #arrowhead path{fill:#999999;stroke:#999999;}#mermaid-17qur7hlbjm .sequenceNumber{fill:#666666;}#mermaid-17qur7hlbjm #sequencenumber{fill:#999999;}#mermaid-17qur7hlbjm #crosshead path{fill:#999999;stroke:#999999;}#mermaid-17qur7hlbjm .messageText{fill:#333333;stroke:none;}#mermaid-17qur7hlbjm .labelBox{stroke:#dddddd;fill:#ffffff;}#mermaid-17qur7hlbjm .labelText,#mermaid-17qur7hlbjm .labelText&gt;tspan{fill:#333;stroke:none;}#mermaid-17qur7hlbjm .loopText,#mermaid-17qur7hlbjm .loopText&gt;tspan{fill:#333;stroke:none;}#mermaid-17qur7hlbjm .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:#dddddd;fill:#dddddd;}#mermaid-17qur7hlbjm .note{stroke:#e6d280;fill:#fff5ad;}#mermaid-17qur7hlbjm .noteText,#mermaid-17qur7hlbjm .noteText&gt;tspan{fill:#333;stroke:none;}#mermaid-17qur7hlbjm .activation0{fill:hsl(-120, 0%, 91.7647058824%);stroke:hsl(-120, 0%, 81.7647058824%);}#mermaid-17qur7hlbjm .activation1{fill:hsl(-120, 0%, 91.7647058824%);stroke:hsl(-120, 0%, 81.7647058824%);}#mermaid-17qur7hlbjm .activation2{fill:hsl(-120, 0%, 91.7647058824%);stroke:hsl(-120, 0%, 81.7647058824%);}#mermaid-17qur7hlbjm .actorPopupMenu{position:absolute;}#mermaid-17qur7hlbjm .actorPopupMenuPanel{position:absolute;fill:#ffffff;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);filter:drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));}#mermaid-17qur7hlbjm .actor-man line{stroke:#cccccc;fill:#ffffff;}#mermaid-17qur7hlbjm .actor-man circle,#mermaid-17qur7hlbjm line{stroke:#cccccc;fill:#ffffff;stroke-width:2px;}#mermaid-17qur7hlbjm :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g></g><defs><symbol height="24" width="24" id="computer"><path d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z" transform="scale(.5)"></path></symbol></defs><defs><symbol clip-rule="evenodd" fill-rule="evenodd" id="database"><path d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z" transform="scale(.5)"></path></symbol></defs><defs><symbol height="24" width="24" id="clock"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z" transform="scale(.5)"></path></symbol></defs><defs><marker orient="auto-start-reverse" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="7.9" id="arrowhead"><path d="M -1 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker refY="4.5" refX="4" orient="auto" markerHeight="8" markerWidth="15" id="crosshead"><path style="stroke-dasharray: 0, 0;" d="M 1,2 L 6,7 M 6,2 L 1,7" stroke-width="1pt" stroke="#000000" fill="none"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="15.5" id="filled-head"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="40" markerWidth="60" refY="15" refX="15" id="sequencenumber"><circle r="6" cy="15" cx="15"></circle></marker></defs><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="80" x="474">.loadmod/.dlmod command</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="117" x2="871" y1="117" x1="76"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="132" x="677">register_module(spec)</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="169" x2="479" y1="169" x1="874"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="184" x="774">Create instance</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="221" x2="1071" y1="221" x1="476"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="236" x="1076">internal_init()</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 1076,273 C 1136,263 1136,303 1076,293"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="318" x="774">config_complete()</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="355" x2="1071" y1="355" x1="476"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="370" x="774">client_ready()</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="407" x2="1071" y1="407" x1="476"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="422" x="880">register_commands()</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="459" x2="1283" y1="459" x1="476"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="474" x="880">register_watchers()</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="511" x2="1283" y1="511" x1="476"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="526" x="986">register_inline_stuff()</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="563" x2="1495" y1="563" x1="476"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="578" x="1086">register_raw_handlers()</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="615" x2="1695" y1="615" x1="476"></line></svg></div><div class="bg-input-dark absolute right-2 top-2 rounded-sm p-1 opacity-0 transition-opacity group-hover:opacity-100"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M216,48V96a8,8,0,0,1-16,0V67.31l-42.34,42.35a8,8,0,0,1-11.32-11.32L188.69,56H160a8,8,0,0,1,0-16h48A8,8,0,0,1,216,48ZM98.34,146.34,56,188.69V160a8,8,0,0,0-16,0v48a8,8,0,0,0,8,8H96a8,8,0,0,0,0-16H67.31l42.35-42.34a8,8,0,0,0-11.32-11.32ZM208,152a8,8,0,0,0-8,8v28.69l-42.34-42.35a8,8,0,0,0-11.32,11.32L188.69,200H160a8,8,0,0,0,0,16h48a8,8,0,0,0,8-8V160A8,8,0,0,0,208,152ZM67.31,56H96a8,8,0,0,0,0-16H48a8,8,0,0,0-8,8V96a8,8,0,0,0,16,0V67.31l42.34,42.35a8,8,0,0,0,11.32-11.32Z"></path></svg></div></div></pre>
<p data-vivaldi-translated="">Источники: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75" data-vivaldi-translated=""><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r" data-vivaldi-translated=""><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a> <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/modules/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75" data-vivaldi-translated=""><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r" data-vivaldi-translated=""><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/modules/loader.py</span></a></p>
<h2 id="command-registration" class="group" data-header="true" data-vivaldi-translated="">Регистрация команд<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header" data-vivaldi-translated=""><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>Commands are the primary way users interact with modules. They are registered using the <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">@loader.command</code> decorator.</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><div class="group relative cursor-pointer overflow-x-auto rounded-md bg-[#f2f1f0] p-4 transition-colors hover:bg-[#ededed] dark:bg-[#1f1f1f] dark:hover:bg-[#242424]" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«rc»" data-state="closed" data-slot="dialog-trigger"><div class="flex justify-center"><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1142.625 70" style="max-width: 100%; touch-action: none; user-select: none; cursor: grab; min-height: fit-content; max-height: 100%;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="mermaid-vtke837xini" preserveAspectRatio="xMidYMid meet"><style>#mermaid-vtke837xini{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-vtke837xini .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-vtke837xini .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-vtke837xini .error-icon{fill:#dddddd;}#mermaid-vtke837xini .error-text{fill:#222222;stroke:#222222;}#mermaid-vtke837xini .edge-thickness-normal{stroke-width:1px;}#mermaid-vtke837xini .edge-thickness-thick{stroke-width:3.5px;}#mermaid-vtke837xini .edge-pattern-solid{stroke-dasharray:0;}#mermaid-vtke837xini .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-vtke837xini .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-vtke837xini .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-vtke837xini .marker{fill:#999;stroke:#999;}#mermaid-vtke837xini .marker.cross{stroke:#999;}#mermaid-vtke837xini svg{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;}#mermaid-vtke837xini p{margin:0;}#mermaid-vtke837xini .label{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;color:#333;}#mermaid-vtke837xini .cluster-label text{fill:#444;}#mermaid-vtke837xini .cluster-label span{color:#444;}#mermaid-vtke837xini .cluster-label span p{background-color:transparent;}#mermaid-vtke837xini .label text,#mermaid-vtke837xini span{fill:#333;color:#333;}#mermaid-vtke837xini .node rect,#mermaid-vtke837xini .node circle,#mermaid-vtke837xini .node ellipse,#mermaid-vtke837xini .node polygon,#mermaid-vtke837xini .node path{fill:#ffffff;stroke:#dddddd;stroke-width:1px;}#mermaid-vtke837xini .rough-node .label text,#mermaid-vtke837xini .node .label text,#mermaid-vtke837xini .image-shape .label,#mermaid-vtke837xini .icon-shape .label{text-anchor:middle;}#mermaid-vtke837xini .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-vtke837xini .rough-node .label,#mermaid-vtke837xini .node .label,#mermaid-vtke837xini .image-shape .label,#mermaid-vtke837xini .icon-shape .label{text-align:center;}#mermaid-vtke837xini .node.clickable{cursor:pointer;}#mermaid-vtke837xini .root .anchor path{fill:#999!important;stroke-width:0;stroke:#999;}#mermaid-vtke837xini .arrowheadPath{fill:#0b0b0b;}#mermaid-vtke837xini .edgePath .path{stroke:#999;stroke-width:2.0px;}#mermaid-vtke837xini .flowchart-link{stroke:#999;fill:none;}#mermaid-vtke837xini .edgeLabel{background-color:#ffffff;text-align:center;}#mermaid-vtke837xini .edgeLabel p{background-color:#ffffff;}#mermaid-vtke837xini .edgeLabel rect{opacity:0.5;background-color:#ffffff;fill:#ffffff;}#mermaid-vtke837xini .labelBkg{background-color:rgba(255, 255, 255, 0.5);}#mermaid-vtke837xini .cluster rect{fill:#f8f8f8;stroke:#dddddd;stroke-width:1px;}#mermaid-vtke837xini .cluster text{fill:#444;}#mermaid-vtke837xini .cluster span{color:#444;}#mermaid-vtke837xini div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:12px;background:#dddddd;border:1px solid hsl(0, 0%, 76.6666666667%);border-radius:2px;pointer-events:none;z-index:100;}#mermaid-vtke837xini .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-vtke837xini rect.text{fill:none;stroke-width:0;}#mermaid-vtke837xini .icon-shape,#mermaid-vtke837xini .image-shape{background-color:#ffffff;text-align:center;}#mermaid-vtke837xini .icon-shape p,#mermaid-vtke837xini .image-shape p{background-color:#ffffff;padding:2px;}#mermaid-vtke837xini .icon-shape rect,#mermaid-vtke837xini .image-shape rect{opacity:0.5;background-color:#ffffff;fill:#ffffff;}#mermaid-vtke837xini :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-vtke837xini_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-vtke837xini_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-vtke837xini_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-vtke837xini_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-vtke837xini_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-vtke837xini_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-vtke837xini_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M212.1,35L216.267,35C220.433,35,228.767,35,236.433,35C244.1,35,251.1,35,254.6,35L258.1,35"></path><path marker-end="url(#mermaid-vtke837xini_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_C_0" d="M455.113,35L459.279,35C463.446,35,471.779,35,479.446,35C487.113,35,494.113,35,497.613,35L501.113,35"></path><path marker-end="url(#mermaid-vtke837xini_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_0" d="M713.8,35L717.967,35C722.133,35,730.467,35,738.133,35C745.8,35,752.8,35,756.3,35L759.8,35"></path><path marker-end="url(#mermaid-vtke837xini_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_E_0" d="M933,35L937.167,35C941.333,35,949.667,35,957.333,35C965,35,972,35,975.5,35L979,35"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g></g><g class="nodes"><g transform="translate(110.05000305175781, 35)" id="flowchart-A-0" class="node default"><rect height="54" width="204.10000610351562" y="-27" x="-102.05000305175781" style="" class="basic label-container"></rect><g transform="translate(-72.05000305175781, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="144.10000610351562"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>@loader.command()</p></span></div></foreignobject></g></g><g transform="translate(358.6062545776367, 35)" id="flowchart-B-1" class="node default"><rect height="54" width="193.0124969482422" y="-27" x="-96.5062484741211" style="" class="basic label-container"></rect><g transform="translate(-66.5062484741211, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="133.0124969482422"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>command_method</p></span></div></foreignobject></g></g><g transform="translate(609.4562530517578, 35)" id="flowchart-C-3" class="node default"><rect height="54" width="208.6875" y="-27" x="-104.34375" style="" class="basic label-container"></rect><g transform="translate(-74.34375, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="148.6875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>CommandDispatcher</p></span></div></foreignobject></g></g><g transform="translate(848.4000015258789, 35)" id="flowchart-D-5" class="node default"><rect height="54" width="169.20000457763672" y="-27" x="-84.60000228881836" style="" class="basic label-container"></rect><g transform="translate(-54.60000228881836, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="109.20000457763672"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Security.check()</p></span></div></foreignobject></g></g><g transform="translate(1058.8125, 35)" id="flowchart-E-7" class="node default"><rect height="54" width="151.625" y="-27" x="-75.8125" style="" class="basic label-container"></rect><g transform="translate(-45.8125, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="91.625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>utils.answer()</p></span></div></foreignobject></g></g></g></g></g></svg></div><div class="bg-input-dark absolute right-2 top-2 rounded-sm p-1 opacity-0 transition-opacity group-hover:opacity-100"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M216,48V96a8,8,0,0,1-16,0V67.31l-42.34,42.35a8,8,0,0,1-11.32-11.32L188.69,56H160a8,8,0,0,1,0-16h48A8,8,0,0,1,216,48ZM98.34,146.34,56,188.69V160a8,8,0,0,0-16,0v48a8,8,0,0,0,8,8H96a8,8,0,0,0,0-16H67.31l42.35-42.34a8,8,0,0,0-11.32-11.32ZM208,152a8,8,0,0,0-8,8v28.69l-42.34-42.35a8,8,0,0,0-11.32,11.32L188.69,200H160a8,8,0,0,0,0,16h48a8,8,0,0,0,8-8V160A8,8,0,0,0,208,152ZM67.31,56H96a8,8,0,0,0,0-16H48a8,8,0,0,0-8,8V96a8,8,0,0,0,16,0V67.31l42.34,42.35a8,8,0,0,0,11.32-11.32Z"></path></svg></div></div></pre>
<p>Sources: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a> <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/dispatcher.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/dispatcher.py</span></a></p>
<h3 id="command-example" class="group" data-header="true">Command Example<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h3>
<p>Commands are defined as methods in your module class and can include aliases for easier access:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><pre style="display: block; overflow-x: auto; padding: 6px 8px; color: rgb(51, 51, 51); background: transparent; margin: 0px; width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="color: rgb(153, 153, 153); font-weight: bold;">@loader.command(</span><span class="hljs-params" style="color: rgb(153, 153, 153); font-weight: bold;">alias=</span><span class="hljs-params" style="color: rgb(221, 17, 68); font-weight: bold;">"hi"</span><span style="color: rgb(153, 153, 153); font-weight: bold;">)</span><span>
</span><span></span><span style="color: rgb(51, 51, 51); font-weight: bold;">async</span><span> </span><span class="hljs-function" style="color: rgb(51, 51, 51); font-weight: bold;">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color: rgb(153, 0, 0); font-weight: bold;">hello</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self, message</span><span class="hljs-function">):</span><span>
</span><span>    </span><span style="color: rgb(221, 17, 68);">"""Says hello to the user"""</span><span>
</span><span>    </span><span style="color: rgb(51, 51, 51); font-weight: bold;">await</span><span> utils.answer(message, </span><span style="color: rgb(221, 17, 68);">"Hello!"</span><span>)</span></code></pre></pre>
<p>The <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">alias</code> parameter allows you to define alternative commands that will trigger the same handler. You can also use <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">@loader.tag</code> decorator to add additional metadata to your commands.</p>
<p>Sources: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a></p>
<h2 id="event-watchers" class="group" data-header="true">Event Watchers<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>Watchers allow modules to process all events, not just commands. They are registered using the <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">@loader.watcher</code> decorator.</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><div class="group relative cursor-pointer overflow-x-auto rounded-md bg-[#f2f1f0] p-4 transition-colors hover:bg-[#ededed] dark:bg-[#1f1f1f] dark:hover:bg-[#242424]" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«rf»" data-state="closed" data-slot="dialog-trigger"><div class="flex justify-center"><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1105.487548828125 70" style="max-width: 100%; touch-action: none; user-select: none; cursor: grab; min-height: fit-content; max-height: 100%;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="mermaid-yz0mcsvegg" preserveAspectRatio="xMidYMid meet"><style>#mermaid-yz0mcsvegg{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-yz0mcsvegg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-yz0mcsvegg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-yz0mcsvegg .error-icon{fill:#dddddd;}#mermaid-yz0mcsvegg .error-text{fill:#222222;stroke:#222222;}#mermaid-yz0mcsvegg .edge-thickness-normal{stroke-width:1px;}#mermaid-yz0mcsvegg .edge-thickness-thick{stroke-width:3.5px;}#mermaid-yz0mcsvegg .edge-pattern-solid{stroke-dasharray:0;}#mermaid-yz0mcsvegg .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-yz0mcsvegg .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-yz0mcsvegg .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-yz0mcsvegg .marker{fill:#999;stroke:#999;}#mermaid-yz0mcsvegg .marker.cross{stroke:#999;}#mermaid-yz0mcsvegg svg{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;}#mermaid-yz0mcsvegg p{margin:0;}#mermaid-yz0mcsvegg .label{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;color:#333;}#mermaid-yz0mcsvegg .cluster-label text{fill:#444;}#mermaid-yz0mcsvegg .cluster-label span{color:#444;}#mermaid-yz0mcsvegg .cluster-label span p{background-color:transparent;}#mermaid-yz0mcsvegg .label text,#mermaid-yz0mcsvegg span{fill:#333;color:#333;}#mermaid-yz0mcsvegg .node rect,#mermaid-yz0mcsvegg .node circle,#mermaid-yz0mcsvegg .node ellipse,#mermaid-yz0mcsvegg .node polygon,#mermaid-yz0mcsvegg .node path{fill:#ffffff;stroke:#dddddd;stroke-width:1px;}#mermaid-yz0mcsvegg .rough-node .label text,#mermaid-yz0mcsvegg .node .label text,#mermaid-yz0mcsvegg .image-shape .label,#mermaid-yz0mcsvegg .icon-shape .label{text-anchor:middle;}#mermaid-yz0mcsvegg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-yz0mcsvegg .rough-node .label,#mermaid-yz0mcsvegg .node .label,#mermaid-yz0mcsvegg .image-shape .label,#mermaid-yz0mcsvegg .icon-shape .label{text-align:center;}#mermaid-yz0mcsvegg .node.clickable{cursor:pointer;}#mermaid-yz0mcsvegg .root .anchor path{fill:#999!important;stroke-width:0;stroke:#999;}#mermaid-yz0mcsvegg .arrowheadPath{fill:#0b0b0b;}#mermaid-yz0mcsvegg .edgePath .path{stroke:#999;stroke-width:2.0px;}#mermaid-yz0mcsvegg .flowchart-link{stroke:#999;fill:none;}#mermaid-yz0mcsvegg .edgeLabel{background-color:#ffffff;text-align:center;}#mermaid-yz0mcsvegg .edgeLabel p{background-color:#ffffff;}#mermaid-yz0mcsvegg .edgeLabel rect{opacity:0.5;background-color:#ffffff;fill:#ffffff;}#mermaid-yz0mcsvegg .labelBkg{background-color:rgba(255, 255, 255, 0.5);}#mermaid-yz0mcsvegg .cluster rect{fill:#f8f8f8;stroke:#dddddd;stroke-width:1px;}#mermaid-yz0mcsvegg .cluster text{fill:#444;}#mermaid-yz0mcsvegg .cluster span{color:#444;}#mermaid-yz0mcsvegg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:12px;background:#dddddd;border:1px solid hsl(0, 0%, 76.6666666667%);border-radius:2px;pointer-events:none;z-index:100;}#mermaid-yz0mcsvegg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-yz0mcsvegg rect.text{fill:none;stroke-width:0;}#mermaid-yz0mcsvegg .icon-shape,#mermaid-yz0mcsvegg .image-shape{background-color:#ffffff;text-align:center;}#mermaid-yz0mcsvegg .icon-shape p,#mermaid-yz0mcsvegg .image-shape p{background-color:#ffffff;padding:2px;}#mermaid-yz0mcsvegg .icon-shape rect,#mermaid-yz0mcsvegg .image-shape rect{opacity:0.5;background-color:#ffffff;fill:#ffffff;}#mermaid-yz0mcsvegg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-yz0mcsvegg_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-yz0mcsvegg_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-yz0mcsvegg_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-yz0mcsvegg_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-yz0mcsvegg_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-yz0mcsvegg_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-yz0mcsvegg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M196.65,35L200.817,35C204.983,35,213.317,35,220.983,35C228.65,35,235.65,35,239.15,35L242.65,35"></path><path marker-end="url(#mermaid-yz0mcsvegg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_C_0" d="M424.213,35L428.379,35C432.546,35,440.879,35,448.546,35C456.213,35,463.213,35,466.713,35L470.213,35"></path><path marker-end="url(#mermaid-yz0mcsvegg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_0" d="M682.9,35L687.067,35C691.233,35,699.567,35,707.233,35C714.9,35,721.9,35,725.4,35L728.9,35"></path><path marker-end="url(#mermaid-yz0mcsvegg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_E_0" d="M870.8,35L874.967,35C879.133,35,887.467,35,895.133,35C902.8,35,909.8,35,913.3,35L916.8,35"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g></g><g class="nodes"><g transform="translate(102.32500457763672, 35)" id="flowchart-A-0" class="node default"><rect height="54" width="188.65000915527344" y="-27" x="-94.32500457763672" style="" class="basic label-container"></rect><g transform="translate(-64.32500457763672, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="128.65000915527344"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>@loader.watcher()</p></span></div></foreignobject></g></g><g transform="translate(335.43125915527344, 35)" id="flowchart-B-1" class="node default"><rect height="54" width="177.5625" y="-27" x="-88.78125" style="" class="basic label-container"></rect><g transform="translate(-58.78125, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="117.5625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>watcher_method</p></span></div></foreignobject></g></g><g transform="translate(578.5562591552734, 35)" id="flowchart-C-3" class="node default"><rect height="54" width="208.6875" y="-27" x="-104.34375" style="" class="basic label-container"></rect><g transform="translate(-74.34375, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="148.6875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>CommandDispatcher</p></span></div></foreignobject></g></g><g transform="translate(801.8500061035156, 35)" id="flowchart-D-5" class="node default"><rect height="54" width="137.9000015258789" y="-27" x="-68.95000076293945" style="" class="basic label-container"></rect><g transform="translate(-38.95000076293945, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="77.9000015258789"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Event Filter</p></span></div></foreignobject></g></g><g transform="translate(1009.1437530517578, 35)" id="flowchart-E-7" class="node default"><rect height="54" width="176.6875" y="-27" x="-88.34375" style="" class="basic label-container"></rect><g transform="translate(-58.34375, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="116.6875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Execute Watcher</p></span></div></foreignobject></g></g></g></g></g></svg></div><div class="bg-input-dark absolute right-2 top-2 rounded-sm p-1 opacity-0 transition-opacity group-hover:opacity-100"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M216,48V96a8,8,0,0,1-16,0V67.31l-42.34,42.35a8,8,0,0,1-11.32-11.32L188.69,56H160a8,8,0,0,1,0-16h48A8,8,0,0,1,216,48ZM98.34,146.34,56,188.69V160a8,8,0,0,0-16,0v48a8,8,0,0,0,8,8H96a8,8,0,0,0,0-16H67.31l42.35-42.34a8,8,0,0,0-11.32-11.32ZM208,152a8,8,0,0,0-8,8v28.69l-42.34-42.35a8,8,0,0,0-11.32,11.32L188.69,200H160a8,8,0,0,0,0,16h48a8,8,0,0,0,8-8V160A8,8,0,0,0,208,152ZM67.31,56H96a8,8,0,0,0,0-16H48a8,8,0,0,0-8,8V96a8,8,0,0,0,16,0V67.31l42.34,42.35a8,8,0,0,0,11.32-11.32Z"></path></svg></div></div></pre>
<p>Sources: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a> <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/dispatcher.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/dispatcher.py</span></a></p>
<h3 id="filtering-events-with-tags" class="group" data-header="true">Filtering Events with Tags<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h3>
<p>You can filter events in watchers using the <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">@loader.tag</code> decorator, which provides fine-grained control over which events are processed:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><pre style="display: block; overflow-x: auto; padding: 6px 8px; color: rgb(51, 51, 51); background: transparent; margin: 0px; width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="color: rgb(153, 153, 153); font-weight: bold;">@loader.watcher(</span><span class="hljs-params" style="color: rgb(153, 153, 153); font-weight: bold;">only_messages=</span><span class="hljs-params" style="color: rgb(0, 128, 128); font-weight: bold;">True</span><span class="hljs-params" style="color: rgb(153, 153, 153); font-weight: bold;">, no_commands=</span><span class="hljs-params" style="color: rgb(0, 128, 128); font-weight: bold;">True</span><span style="color: rgb(153, 153, 153); font-weight: bold;">)</span><span>
</span><span></span><span style="color: rgb(51, 51, 51); font-weight: bold;">async</span><span> </span><span class="hljs-function" style="color: rgb(51, 51, 51); font-weight: bold;">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color: rgb(153, 0, 0); font-weight: bold;">watch_messages</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self, message</span><span class="hljs-function">):</span><span>
</span><span>    </span><span style="color: rgb(221, 17, 68);">"""Process non-command messages"""</span><span>
</span><span>    </span><span style="color: rgb(153, 153, 136); font-style: italic;"># Process the message here</span></code></pre></pre>
<p>Available tags include:</p>
<ul>
<li><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">no_commands</code> - Ignore all userbot commands</li>
<li><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">only_messages</code> - Capture only messages (not join events)</li>
<li><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">out</code> - Capture only outgoing events</li>
<li><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">in</code> - Capture only incoming events</li>
<li>And many more filtering options</li>
</ul>
<p>Sources: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a></p>
<h2 id="inline-and-callback-handlers" class="group" data-header="true">Inline and Callback Handlers<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>Inline handlers process inline queries, while callback handlers process button clicks in inline interfaces.</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><div class="group relative cursor-pointer overflow-x-auto rounded-md bg-[#f2f1f0] p-4 transition-colors hover:bg-[#ededed] dark:bg-[#1f1f1f] dark:hover:bg-[#242424]" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«ri»" data-state="closed" data-slot="dialog-trigger"><div class="flex justify-center"><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 546.8125 486" style="max-width: 100%; touch-action: none; user-select: none; cursor: grab; min-height: fit-content; max-height: 100%;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="mermaid-y3szwe3kls" preserveAspectRatio="xMidYMid meet"><style>#mermaid-y3szwe3kls{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-y3szwe3kls .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-y3szwe3kls .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-y3szwe3kls .error-icon{fill:#dddddd;}#mermaid-y3szwe3kls .error-text{fill:#222222;stroke:#222222;}#mermaid-y3szwe3kls .edge-thickness-normal{stroke-width:1px;}#mermaid-y3szwe3kls .edge-thickness-thick{stroke-width:3.5px;}#mermaid-y3szwe3kls .edge-pattern-solid{stroke-dasharray:0;}#mermaid-y3szwe3kls .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-y3szwe3kls .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-y3szwe3kls .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-y3szwe3kls .marker{fill:#999;stroke:#999;}#mermaid-y3szwe3kls .marker.cross{stroke:#999;}#mermaid-y3szwe3kls svg{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;}#mermaid-y3szwe3kls p{margin:0;}#mermaid-y3szwe3kls .label{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;color:#333;}#mermaid-y3szwe3kls .cluster-label text{fill:#444;}#mermaid-y3szwe3kls .cluster-label span{color:#444;}#mermaid-y3szwe3kls .cluster-label span p{background-color:transparent;}#mermaid-y3szwe3kls .label text,#mermaid-y3szwe3kls span{fill:#333;color:#333;}#mermaid-y3szwe3kls .node rect,#mermaid-y3szwe3kls .node circle,#mermaid-y3szwe3kls .node ellipse,#mermaid-y3szwe3kls .node polygon,#mermaid-y3szwe3kls .node path{fill:#ffffff;stroke:#dddddd;stroke-width:1px;}#mermaid-y3szwe3kls .rough-node .label text,#mermaid-y3szwe3kls .node .label text,#mermaid-y3szwe3kls .image-shape .label,#mermaid-y3szwe3kls .icon-shape .label{text-anchor:middle;}#mermaid-y3szwe3kls .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-y3szwe3kls .rough-node .label,#mermaid-y3szwe3kls .node .label,#mermaid-y3szwe3kls .image-shape .label,#mermaid-y3szwe3kls .icon-shape .label{text-align:center;}#mermaid-y3szwe3kls .node.clickable{cursor:pointer;}#mermaid-y3szwe3kls .root .anchor path{fill:#999!important;stroke-width:0;stroke:#999;}#mermaid-y3szwe3kls .arrowheadPath{fill:#0b0b0b;}#mermaid-y3szwe3kls .edgePath .path{stroke:#999;stroke-width:2.0px;}#mermaid-y3szwe3kls .flowchart-link{stroke:#999;fill:none;}#mermaid-y3szwe3kls .edgeLabel{background-color:#ffffff;text-align:center;}#mermaid-y3szwe3kls .edgeLabel p{background-color:#ffffff;}#mermaid-y3szwe3kls .edgeLabel rect{opacity:0.5;background-color:#ffffff;fill:#ffffff;}#mermaid-y3szwe3kls .labelBkg{background-color:rgba(255, 255, 255, 0.5);}#mermaid-y3szwe3kls .cluster rect{fill:#f8f8f8;stroke:#dddddd;stroke-width:1px;}#mermaid-y3szwe3kls .cluster text{fill:#444;}#mermaid-y3szwe3kls .cluster span{color:#444;}#mermaid-y3szwe3kls div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:12px;background:#dddddd;border:1px solid hsl(0, 0%, 76.6666666667%);border-radius:2px;pointer-events:none;z-index:100;}#mermaid-y3szwe3kls .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-y3szwe3kls rect.text{fill:none;stroke-width:0;}#mermaid-y3szwe3kls .icon-shape,#mermaid-y3szwe3kls .image-shape{background-color:#ffffff;text-align:center;}#mermaid-y3szwe3kls .icon-shape p,#mermaid-y3szwe3kls .image-shape p{background-color:#ffffff;padding:2px;}#mermaid-y3szwe3kls .icon-shape rect,#mermaid-y3szwe3kls .image-shape rect{opacity:0.5;background-color:#ffffff;fill:#ffffff;}#mermaid-y3szwe3kls :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-y3szwe3kls_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-y3szwe3kls_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-y3szwe3kls_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-y3szwe3kls_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-y3szwe3kls_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-y3szwe3kls_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-y3szwe3kls_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M123.688,62L123.688,66.167C123.688,70.333,123.688,78.667,123.688,86.333C123.688,94,123.688,101,123.688,104.5L123.688,108"></path><path marker-end="url(#mermaid-y3szwe3kls_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_0" d="M414.094,62L414.094,66.167C414.094,70.333,414.094,78.667,414.094,86.333C414.094,94,414.094,101,414.094,104.5L414.094,108"></path><path marker-end="url(#mermaid-y3szwe3kls_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_E_0" d="M123.688,166L123.688,170.167C123.688,174.333,123.688,182.667,134.695,190.775C145.702,198.884,167.716,206.768,178.724,210.709L189.731,214.651"></path><path marker-end="url(#mermaid-y3szwe3kls_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_E_0" d="M414.094,166L414.094,170.167C414.094,174.333,414.094,182.667,403.087,190.775C392.079,198.884,370.065,206.768,359.058,210.709L348.05,214.651"></path><path marker-end="url(#mermaid-y3szwe3kls_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_0" d="M268.891,270L268.891,274.167C268.891,278.333,268.891,286.667,268.891,294.333C268.891,302,268.891,309,268.891,312.5L268.891,316"></path><path marker-end="url(#mermaid-y3szwe3kls_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_F_G_0" d="M268.891,374L268.891,378.167C268.891,382.333,268.891,390.667,268.891,398.333C268.891,406,268.891,413,268.891,416.5L268.891,420"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g></g><g class="nodes"><g transform="translate(123.6875, 35)" id="flowchart-A-0" class="node default"><rect height="54" width="231.375" y="-27" x="-115.6875" style="" class="basic label-container"></rect><g transform="translate(-85.6875, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="171.375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>@loader.inline_handler()</p></span></div></foreignobject></g></g><g transform="translate(123.6875, 139)" id="flowchart-B-1" class="node default"><rect height="54" width="160.1750030517578" y="-27" x="-80.0875015258789" style="" class="basic label-container"></rect><g transform="translate(-50.087501525878906, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="100.17500305175781"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>inline_method</p></span></div></foreignobject></g></g><g transform="translate(414.09375, 35)" id="flowchart-C-2" class="node default"><rect height="54" width="249.4375" y="-27" x="-124.71875" style="" class="basic label-container"></rect><g transform="translate(-94.71875, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="189.4375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>@loader.callback_handler()</p></span></div></foreignobject></g></g><g transform="translate(414.09375, 139)" id="flowchart-D-3" class="node default"><rect height="54" width="178.2375030517578" y="-27" x="-89.1187515258789" style="" class="basic label-container"></rect><g transform="translate(-59.118751525878906, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="118.23750305175781"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>callback_method</p></span></div></foreignobject></g></g><g transform="translate(268.890625, 243)" id="flowchart-E-5" class="node default"><rect height="54" width="161.5500030517578" y="-27" x="-80.7750015258789" style="" class="basic label-container"></rect><g transform="translate(-50.775001525878906, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="101.55000305175781"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>InlineManager</p></span></div></foreignobject></g></g><g transform="translate(268.890625, 347)" id="flowchart-F-9" class="node default"><rect height="54" width="145.7375030517578" y="-27" x="-72.8687515258789" style="" class="basic label-container"></rect><g transform="translate(-42.868751525878906, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="85.73750305175781"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>aiogram.Bot</p></span></div></foreignobject></g></g><g transform="translate(268.890625, 451)" id="flowchart-G-11" class="node default"><rect height="54" width="152.26250457763672" y="-27" x="-76.13125228881836" style="" class="basic label-container"></rect><g transform="translate(-46.13125228881836, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="92.26250457763672"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Telegram API</p></span></div></foreignobject></g></g></g></g></g></svg></div><div class="bg-input-dark absolute right-2 top-2 rounded-sm p-1 opacity-0 transition-opacity group-hover:opacity-100"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M216,48V96a8,8,0,0,1-16,0V67.31l-42.34,42.35a8,8,0,0,1-11.32-11.32L188.69,56H160a8,8,0,0,1,0-16h48A8,8,0,0,1,216,48ZM98.34,146.34,56,188.69V160a8,8,0,0,0-16,0v48a8,8,0,0,0,8,8H96a8,8,0,0,0,0-16H67.31l42.35-42.34a8,8,0,0,0-11.32-11.32ZM208,152a8,8,0,0,0-8,8v28.69l-42.34-42.35a8,8,0,0,0-11.32,11.32L188.69,200H160a8,8,0,0,0,0,16h48a8,8,0,0,0,8-8V160A8,8,0,0,0,208,152ZM67.31,56H96a8,8,0,0,0,0-16H48a8,8,0,0,0-8,8V96a8,8,0,0,0,16,0V67.31l42.34,42.35a8,8,0,0,0,11.32-11.32Z"></path></svg></div></div></pre>
<p>Sources: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a> <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/inline/manager.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/inline/manager.py</span></a></p>
<h2 id="raw-event-handlers" class="group" data-header="true">Raw Event Handlers<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>Raw handlers allow modules to process low-level Telegram events directly:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><pre style="display: block; overflow-x: auto; padding: 6px 8px; color: rgb(51, 51, 51); background: transparent; margin: 0px; width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="color: rgb(153, 153, 153); font-weight: bold;">@loader.raw_handler(</span><span class="hljs-params" style="color: rgb(153, 153, 153); font-weight: bold;">UpdateChannelMessages, UpdateNewMessage</span><span style="color: rgb(153, 153, 153); font-weight: bold;">)</span><span>
</span><span></span><span style="color: rgb(51, 51, 51); font-weight: bold;">async</span><span> </span><span class="hljs-function" style="color: rgb(51, 51, 51); font-weight: bold;">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color: rgb(153, 0, 0); font-weight: bold;">handle_raw_events</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self, event</span><span class="hljs-function">):</span><span>
</span><span>    </span><span style="color: rgb(221, 17, 68);">"""Process raw events"""</span><span>
</span><span>    </span><span style="color: rgb(153, 153, 136); font-style: italic;"># Process the event here</span></code></pre></pre>
<p>This provides more direct access to the underlying Telegram API events but requires careful management.</p>
<p>Sources: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a> <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/dispatcher.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/dispatcher.py</span></a></p>
<h2 id="module-configuration" class="group" data-header="true">Module Configuration<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>Modules can define configuration options that users can modify:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><div class="group relative cursor-pointer overflow-x-auto rounded-md bg-[#f2f1f0] p-4 transition-colors hover:bg-[#ededed] dark:bg-[#1f1f1f] dark:hover:bg-[#242424]" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«rl»" data-state="closed" data-slot="dialog-trigger"><div class="flex justify-center"><svg aria-roledescription="class" role="graphics-document document" viewBox="0 0 289.1625061035156 450" style="max-width: 100%; touch-action: none; user-select: none; cursor: grab; min-height: fit-content; max-height: 100%;" class="classDiagram" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="mermaid-a155jxkkqhg" preserveAspectRatio="xMidYMid meet"><style>#mermaid-a155jxkkqhg{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-a155jxkkqhg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-a155jxkkqhg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-a155jxkkqhg .error-icon{fill:#dddddd;}#mermaid-a155jxkkqhg .error-text{fill:#222222;stroke:#222222;}#mermaid-a155jxkkqhg .edge-thickness-normal{stroke-width:1px;}#mermaid-a155jxkkqhg .edge-thickness-thick{stroke-width:3.5px;}#mermaid-a155jxkkqhg .edge-pattern-solid{stroke-dasharray:0;}#mermaid-a155jxkkqhg .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-a155jxkkqhg .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-a155jxkkqhg .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-a155jxkkqhg .marker{fill:#999;stroke:#999;}#mermaid-a155jxkkqhg .marker.cross{stroke:#999;}#mermaid-a155jxkkqhg svg{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;}#mermaid-a155jxkkqhg p{margin:0;}#mermaid-a155jxkkqhg g.classGroup text{fill:#dddddd;stroke:none;font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:10px;}#mermaid-a155jxkkqhg g.classGroup text .title{font-weight:bolder;}#mermaid-a155jxkkqhg .nodeLabel,#mermaid-a155jxkkqhg .edgeLabel{color:#333333;}#mermaid-a155jxkkqhg .edgeLabel .label rect{fill:#ffffff;}#mermaid-a155jxkkqhg .label text{fill:#333333;}#mermaid-a155jxkkqhg .labelBkg{background:#ffffff;}#mermaid-a155jxkkqhg .edgeLabel .label span{background:#ffffff;}#mermaid-a155jxkkqhg .classTitle{font-weight:bolder;}#mermaid-a155jxkkqhg .node rect,#mermaid-a155jxkkqhg .node circle,#mermaid-a155jxkkqhg .node ellipse,#mermaid-a155jxkkqhg .node polygon,#mermaid-a155jxkkqhg .node path{fill:#ffffff;stroke:#dddddd;stroke-width:1px;}#mermaid-a155jxkkqhg .divider{stroke:#dddddd;stroke-width:1;}#mermaid-a155jxkkqhg g.clickable{cursor:pointer;}#mermaid-a155jxkkqhg g.classGroup rect{fill:#ffffff;stroke:#dddddd;}#mermaid-a155jxkkqhg g.classGroup line{stroke:#dddddd;stroke-width:1;}#mermaid-a155jxkkqhg .classLabel .box{stroke:none;stroke-width:0;fill:#ffffff;opacity:0.5;}#mermaid-a155jxkkqhg .classLabel .label{fill:#dddddd;font-size:10px;}#mermaid-a155jxkkqhg .relation{stroke:#999;stroke-width:1;fill:none;}#mermaid-a155jxkkqhg .dashed-line{stroke-dasharray:3;}#mermaid-a155jxkkqhg .dotted-line{stroke-dasharray:1 2;}#mermaid-a155jxkkqhg #compositionStart,#mermaid-a155jxkkqhg .composition{fill:#999!important;stroke:#999!important;stroke-width:1;}#mermaid-a155jxkkqhg #compositionEnd,#mermaid-a155jxkkqhg .composition{fill:#999!important;stroke:#999!important;stroke-width:1;}#mermaid-a155jxkkqhg #dependencyStart,#mermaid-a155jxkkqhg .dependency{fill:#999!important;stroke:#999!important;stroke-width:1;}#mermaid-a155jxkkqhg #dependencyStart,#mermaid-a155jxkkqhg .dependency{fill:#999!important;stroke:#999!important;stroke-width:1;}#mermaid-a155jxkkqhg #extensionStart,#mermaid-a155jxkkqhg .extension{fill:transparent!important;stroke:#999!important;stroke-width:1;}#mermaid-a155jxkkqhg #extensionEnd,#mermaid-a155jxkkqhg .extension{fill:transparent!important;stroke:#999!important;stroke-width:1;}#mermaid-a155jxkkqhg #aggregationStart,#mermaid-a155jxkkqhg .aggregation{fill:transparent!important;stroke:#999!important;stroke-width:1;}#mermaid-a155jxkkqhg #aggregationEnd,#mermaid-a155jxkkqhg .aggregation{fill:transparent!important;stroke:#999!important;stroke-width:1;}#mermaid-a155jxkkqhg #lollipopStart,#mermaid-a155jxkkqhg .lollipop{fill:#ffffff!important;stroke:#999!important;stroke-width:1;}#mermaid-a155jxkkqhg #lollipopEnd,#mermaid-a155jxkkqhg .lollipop{fill:#ffffff!important;stroke:#999!important;stroke-width:1;}#mermaid-a155jxkkqhg .edgeTerminals{font-size:11px;line-height:initial;}#mermaid-a155jxkkqhg .classTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-a155jxkkqhg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="18" class="marker aggregation class" id="mermaid-a155jxkkqhg_class-aggregationStart"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="1" class="marker aggregation class" id="mermaid-a155jxkkqhg_class-aggregationEnd"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="18" class="marker extension class" id="mermaid-a155jxkkqhg_class-extensionStart"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="1" class="marker extension class" id="mermaid-a155jxkkqhg_class-extensionEnd"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="18" class="marker composition class" id="mermaid-a155jxkkqhg_class-compositionStart"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="1" class="marker composition class" id="mermaid-a155jxkkqhg_class-compositionEnd"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="6" class="marker dependency class" id="mermaid-a155jxkkqhg_class-dependencyStart"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="13" class="marker dependency class" id="mermaid-a155jxkkqhg_class-dependencyEnd"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="13" class="marker lollipop class" id="mermaid-a155jxkkqhg_class-lollipopStart"><circle r="6" cy="7" cx="7" fill="transparent" stroke="black"></circle></marker></defs><defs><marker orient="auto" markerHeight="240" markerWidth="190" refY="7" refX="1" class="marker lollipop class" id="mermaid-a155jxkkqhg_class-lollipopEnd"><circle r="6" cy="7" cx="7" fill="transparent" stroke="black"></circle></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-start="url(#mermaid-a155jxkkqhg_class-compositionStart)" style=";" class="edge-thickness-normal edge-pattern-solid relation" id="id_loader_ModuleConfig_loader_ConfigValue_1" d="M144.581,242L144.581,243.167C144.581,244.333,144.581,246.667,144.581,252C144.581,257.333,144.581,265.667,144.581,269.833L144.581,274"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, -12)" class="label"><foreignobject height="24" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel" style=";display: inline-block"></span></div></foreignobject></g></g><g transform="translate(129.58125152587897, 241.4999986921038)" class="edgeTerminals"><g transform="translate(0, 0)" class="inner"><foreignobject style="width: 9px; height: 12px;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; padding-right: 1px; white-space: nowrap;"><span style=";display: inline-block" class="edgeLabel">1</span></div></foreignobject></g></g><g transform="translate(154.58125152587886, 251.49999869210382)" class="edgeTerminals"><g transform="translate(0, 0)" class="inner"></g><foreignobject style="width: 36px; height: 12px;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; padding-right: 1px; white-space: nowrap;"><span style=";display: inline-block" class="edgeLabel">many</span></div></foreignobject></g></g><g class="nodes"><g transform="translate(144.5812530517578, 116)" id="classId-loader_ModuleConfig-2" class="node default"><g class="basic label-container"><path style="" fill="#ffffff" stroke-width="0" stroke="none" d="M-136.58126068115234 -108 L136.58126068115234 -108 L136.58126068115234 108 L-136.58126068115234 108"></path><path style="" fill="none" stroke-width="1.3" stroke="#dddddd" d="M-136.58126068115234 -108 C-73.79593291064279 -108, -11.01060514013325 -108, 136.58126068115234 -108 M-136.58126068115234 -108 C-32.94037129592756 -108, 70.70051808929722 -108, 136.58126068115234 -108 M136.58126068115234 -108 C136.58126068115234 -34.18165479102966, 136.58126068115234 39.636690417940684, 136.58126068115234 108 M136.58126068115234 -108 C136.58126068115234 -61.54647563949608, 136.58126068115234 -15.09295127899216, 136.58126068115234 108 M136.58126068115234 108 C45.06684103640991 108, -46.44757860833252 108, -136.58126068115234 108 M136.58126068115234 108 C58.69038068066055 108, -19.200499319831238 108, -136.58126068115234 108 M-136.58126068115234 108 C-136.58126068115234 44.79220753569039, -136.58126068115234 -18.415584928619225, -136.58126068115234 -108 M-136.58126068115234 108 C-136.58126068115234 24.36367749574363, -136.58126068115234 -59.27264500851274, -136.58126068115234 -108"></path></g><g transform="translate(0, -84)" class="annotation-group text"></g><g transform="translate(-81.13750457763672, -84)" class="label-group text"><g transform="translate(0,-12)" style="font-weight: bolder" class="label"><foreignobject height="24" width="162.27500915527344"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 208px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="" class="nodeLabel markdown-node-label"><p>loader_ModuleConfig</p></span></div></foreignobject></g></g><g transform="translate(-124.58126068115234, -36)" class="members-group text"><g transform="translate(0,-12)" style="" class="label"><foreignobject height="24" width="95.67500305175781"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 157px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="" class="nodeLabel markdown-node-label"><p>+_config: dict</p></span></div></foreignobject></g></g><g transform="translate(-124.58126068115234, 12)" class="methods-group text"><g transform="translate(0,-12)" style="" class="label"><foreignobject height="24" width="113.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 169px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="" class="nodeLabel markdown-node-label"><p>+getdef(option)</p></span></div></foreignobject></g><g transform="translate(0,12)" style="" class="label"><foreignobject height="24" width="116.51250457763672"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 172px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="" class="nodeLabel markdown-node-label"><p>+getdoc(option)</p></span></div></foreignobject></g><g transform="translate(0,36)" style="" class="label"><foreignobject height="24" width="125.9375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 213px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="" class="nodeLabel markdown-node-label"><p>+<strong>getitem</strong>(option)</p></span></div></foreignobject></g><g transform="translate(0,60)" style="" class="label"><foreignobject height="24" width="168.02500915527344"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 258px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="" class="nodeLabel markdown-node-label"><p>+<strong>setitem</strong>(option, value)</p></span></div></foreignobject></g></g><g style="" class="divider"><path style="" fill="none" stroke-width="1.3" stroke="#dddddd" d="M-136.5812530517578 -60 C-71.13196650299467 -60, -5.682679954231531 -60, 136.5812530517578 -60 M-136.5812530517578 -60 C-31.064825798506106 -60, 74.4516014547456 -60, 136.5812530517578 -60"></path></g><g style="" class="divider"><path style="" fill="none" stroke-width="1.3" stroke="#dddddd" d="M-136.5812530517578 -12 C-79.06515160798898 -12, -21.549050164220134 -12, 136.5812530517578 -12 M-136.5812530517578 -12 C-38.47793523208611 -12, 59.62538258758559 -12, 136.5812530517578 -12"></path></g></g><g transform="translate(144.5812530517578, 358)" id="classId-loader_ConfigValue-3" class="node default"><g class="basic label-container"><path style="" fill="#ffffff" stroke-width="0" stroke="none" d="M-84.67500305175781 -84 L84.67500305175781 -84 L84.67500305175781 84 L-84.67500305175781 84"></path><path style="" fill="none" stroke-width="1.3" stroke="#dddddd" d="M-84.67500305175781 -84 C-25.218753979552197 -84, 34.23749509265342 -84, 84.67500305175781 -84 M-84.67500305175781 -84 C-48.71214008403717 -84, -12.749277116316534 -84, 84.67500305175781 -84 M84.67500305175781 -84 C84.67500305175781 -46.56380355995582, 84.67500305175781 -9.127607119911644, 84.67500305175781 84 M84.67500305175781 -84 C84.67500305175781 -35.839528292489604, 84.67500305175781 12.320943415020793, 84.67500305175781 84 M84.67500305175781 84 C34.10094177067797 84, -16.473119510401872 84, -84.67500305175781 84 M84.67500305175781 84 C42.234080241100806 84, -0.20684256955620128 84, -84.67500305175781 84 M-84.67500305175781 84 C-84.67500305175781 47.46320599630618, -84.67500305175781 10.926411992612358, -84.67500305175781 -84 M-84.67500305175781 84 C-84.67500305175781 43.327466585790006, -84.67500305175781 2.654933171580012, -84.67500305175781 -84"></path></g><g transform="translate(0, -60)" class="annotation-group text"></g><g transform="translate(-72.67500305175781, -60)" class="label-group text"><g transform="translate(0,-12)" style="font-weight: bolder" class="label"><foreignobject height="24" width="145.35000610351562"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 194px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="" class="nodeLabel markdown-node-label"><p>loader_ConfigValue</p></span></div></foreignobject></g></g><g transform="translate(-72.67500305175781, -12)" class="members-group text"><g transform="translate(0,-12)" style="" class="label"><foreignobject height="24" width="72.42500305175781"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 130px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="" class="nodeLabel markdown-node-label"><p>+validator</p></span></div></foreignobject></g><g transform="translate(0,12)" style="" class="label"><foreignobject height="24" width="37.13750076293945"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 93px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="" class="nodeLabel markdown-node-label"><p>+doc</p></span></div></foreignobject></g><g transform="translate(0,36)" style="" class="label"><foreignobject height="24" width="60.23749923706055"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 118px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="" class="nodeLabel markdown-node-label"><p>+default</p></span></div></foreignobject></g></g><g transform="translate(-72.67500305175781, 84)" class="methods-group text"></g><g style="" class="divider"><path style="" fill="none" stroke-width="1.3" stroke="#dddddd" d="M-84.67500305175781 -36 C-45.56139770068611 -36, -6.447792349614403 -36, 84.67500305175781 -36 M-84.67500305175781 -36 C-22.346095880778236 -36, 39.98281129020134 -36, 84.67500305175781 -36"></path></g><g style="" class="divider"><path style="" fill="none" stroke-width="1.3" stroke="#dddddd" d="M-84.67500305175781 60 C-42.45487970696235 60, -0.2347563621668911 60, 84.67500305175781 60 M-84.67500305175781 60 C-27.651572683769906 60, 29.371857684218 60, 84.67500305175781 60"></path></g></g></g></g></g></svg></div><div class="bg-input-dark absolute right-2 top-2 rounded-sm p-1 opacity-0 transition-opacity group-hover:opacity-100"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M216,48V96a8,8,0,0,1-16,0V67.31l-42.34,42.35a8,8,0,0,1-11.32-11.32L188.69,56H160a8,8,0,0,1,0-16h48A8,8,0,0,1,216,48ZM98.34,146.34,56,188.69V160a8,8,0,0,0-16,0v48a8,8,0,0,0,8,8H96a8,8,0,0,0,0-16H67.31l42.35-42.34a8,8,0,0,0-11.32-11.32ZM208,152a8,8,0,0,0-8,8v28.69l-42.34-42.35a8,8,0,0,0-11.32,11.32L188.69,200H160a8,8,0,0,0,0,16h48a8,8,0,0,0,8-8V160A8,8,0,0,0,208,152ZM67.31,56H96a8,8,0,0,0,0-16H48a8,8,0,0,0-8,8V96a8,8,0,0,0,16,0V67.31l42.34,42.35a8,8,0,0,0,11.32-11.32Z"></path></svg></div></div></pre>
<p>Sources: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a> <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/configurator.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/configurator.py</span></a></p>
<h3 id="configuration-example" class="group" data-header="true">Configuration Example<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h3>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><pre style="display: block; overflow-x: auto; padding: 6px 8px; color: rgb(51, 51, 51); background: transparent; margin: 0px; width: 100%;"><code style="white-space: pre; font-size: 12px;"><span class="hljs-function" style="color: rgb(51, 51, 51); font-weight: bold;">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color: rgb(153, 0, 0); font-weight: bold;">__init__</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self</span><span class="hljs-function">):</span><span>
</span>    self.config = loader.ModuleConfig(
        loader.ConfigValue(
<span>            </span><span style="color: rgb(221, 17, 68);">"API_KEY"</span><span>,
</span><span>            </span><span style="color: rgb(221, 17, 68);">"default_key"</span><span>,
</span><span>            </span><span style="color: rgb(51, 51, 51); font-weight: bold;">lambda</span><span>: </span><span style="color: rgb(221, 17, 68);">"API Key for external service"</span><span>,
</span>            validator=loader.validators.String()
        ),
        loader.ConfigValue(
<span>            </span><span style="color: rgb(221, 17, 68);">"ENABLED"</span><span>,
</span><span>            </span><span style="color: rgb(0, 128, 128);">True</span><span>,
</span><span>            </span><span style="color: rgb(51, 51, 51); font-weight: bold;">lambda</span><span>: </span><span style="color: rgb(221, 17, 68);">"Enable this feature"</span><span>,
</span>            validator=loader.validators.Boolean()
        )
    )</code></pre></pre>
<p>Access configuration values with <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">self.config["OPTION_NAME"]</code> and the system will handle persistent storage and validation.</p>
<p>Sources: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a> <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/configurator.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/configurator.py</span></a></p>
<h2 id="translation-support" class="group" data-header="true">Translation Support<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>Modules can support multiple languages through the <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">strings</code> dictionary:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><div class="group relative cursor-pointer overflow-x-auto rounded-md bg-[#f2f1f0] p-4 transition-colors hover:bg-[#ededed] dark:bg-[#1f1f1f] dark:hover:bg-[#242424]" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«ro»" data-state="closed" data-slot="dialog-trigger"><div class="flex justify-center"><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 636.3624877929688 382" style="max-width: 100%; touch-action: none; user-select: none; cursor: grab; min-height: fit-content; max-height: 100%;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="mermaid-wpd49cqi96i" preserveAspectRatio="xMidYMid meet"><style>#mermaid-wpd49cqi96i{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-wpd49cqi96i .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-wpd49cqi96i .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-wpd49cqi96i .error-icon{fill:#dddddd;}#mermaid-wpd49cqi96i .error-text{fill:#222222;stroke:#222222;}#mermaid-wpd49cqi96i .edge-thickness-normal{stroke-width:1px;}#mermaid-wpd49cqi96i .edge-thickness-thick{stroke-width:3.5px;}#mermaid-wpd49cqi96i .edge-pattern-solid{stroke-dasharray:0;}#mermaid-wpd49cqi96i .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-wpd49cqi96i .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-wpd49cqi96i .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-wpd49cqi96i .marker{fill:#999;stroke:#999;}#mermaid-wpd49cqi96i .marker.cross{stroke:#999;}#mermaid-wpd49cqi96i svg{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;}#mermaid-wpd49cqi96i p{margin:0;}#mermaid-wpd49cqi96i .label{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;color:#333;}#mermaid-wpd49cqi96i .cluster-label text{fill:#444;}#mermaid-wpd49cqi96i .cluster-label span{color:#444;}#mermaid-wpd49cqi96i .cluster-label span p{background-color:transparent;}#mermaid-wpd49cqi96i .label text,#mermaid-wpd49cqi96i span{fill:#333;color:#333;}#mermaid-wpd49cqi96i .node rect,#mermaid-wpd49cqi96i .node circle,#mermaid-wpd49cqi96i .node ellipse,#mermaid-wpd49cqi96i .node polygon,#mermaid-wpd49cqi96i .node path{fill:#ffffff;stroke:#dddddd;stroke-width:1px;}#mermaid-wpd49cqi96i .rough-node .label text,#mermaid-wpd49cqi96i .node .label text,#mermaid-wpd49cqi96i .image-shape .label,#mermaid-wpd49cqi96i .icon-shape .label{text-anchor:middle;}#mermaid-wpd49cqi96i .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-wpd49cqi96i .rough-node .label,#mermaid-wpd49cqi96i .node .label,#mermaid-wpd49cqi96i .image-shape .label,#mermaid-wpd49cqi96i .icon-shape .label{text-align:center;}#mermaid-wpd49cqi96i .node.clickable{cursor:pointer;}#mermaid-wpd49cqi96i .root .anchor path{fill:#999!important;stroke-width:0;stroke:#999;}#mermaid-wpd49cqi96i .arrowheadPath{fill:#0b0b0b;}#mermaid-wpd49cqi96i .edgePath .path{stroke:#999;stroke-width:2.0px;}#mermaid-wpd49cqi96i .flowchart-link{stroke:#999;fill:none;}#mermaid-wpd49cqi96i .edgeLabel{background-color:#ffffff;text-align:center;}#mermaid-wpd49cqi96i .edgeLabel p{background-color:#ffffff;}#mermaid-wpd49cqi96i .edgeLabel rect{opacity:0.5;background-color:#ffffff;fill:#ffffff;}#mermaid-wpd49cqi96i .labelBkg{background-color:rgba(255, 255, 255, 0.5);}#mermaid-wpd49cqi96i .cluster rect{fill:#f8f8f8;stroke:#dddddd;stroke-width:1px;}#mermaid-wpd49cqi96i .cluster text{fill:#444;}#mermaid-wpd49cqi96i .cluster span{color:#444;}#mermaid-wpd49cqi96i div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:12px;background:#dddddd;border:1px solid hsl(0, 0%, 76.6666666667%);border-radius:2px;pointer-events:none;z-index:100;}#mermaid-wpd49cqi96i .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-wpd49cqi96i rect.text{fill:none;stroke-width:0;}#mermaid-wpd49cqi96i .icon-shape,#mermaid-wpd49cqi96i .image-shape{background-color:#ffffff;text-align:center;}#mermaid-wpd49cqi96i .icon-shape p,#mermaid-wpd49cqi96i .image-shape p{background-color:#ffffff;padding:2px;}#mermaid-wpd49cqi96i .icon-shape rect,#mermaid-wpd49cqi96i .image-shape rect{opacity:0.5;background-color:#ffffff;fill:#ffffff;}#mermaid-wpd49cqi96i :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-wpd49cqi96i_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-wpd49cqi96i_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-wpd49cqi96i_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-wpd49cqi96i_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-wpd49cqi96i_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-wpd49cqi96i_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-wpd49cqi96i_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M228.4,50.864L202.317,56.887C176.233,62.909,124.067,74.955,97.983,84.477C71.9,94,71.9,101,71.9,104.5L71.9,108"></path><path marker-end="url(#mermaid-wpd49cqi96i_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_C_0" d="M297.106,62L297.106,66.167C297.106,70.333,297.106,78.667,297.106,86.333C297.106,94,297.106,101,297.106,104.5L297.106,108"></path><path marker-end="url(#mermaid-wpd49cqi96i_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_D_0" d="M365.813,49.507L395.408,55.756C425.004,62.004,484.196,74.502,513.792,84.251C543.388,94,543.388,101,543.388,104.5L543.388,108"></path><path marker-end="url(#mermaid-wpd49cqi96i_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_E_0" d="M71.9,166L71.9,170.167C71.9,174.333,71.9,182.667,93.009,191.707C114.118,200.748,156.335,210.496,177.444,215.37L198.553,220.244"></path><path marker-end="url(#mermaid-wpd49cqi96i_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_E_0" d="M297.106,166L297.106,170.167C297.106,174.333,297.106,182.667,297.106,190.333C297.106,198,297.106,205,297.106,208.5L297.106,212"></path><path marker-end="url(#mermaid-wpd49cqi96i_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_E_0" d="M543.388,166L543.388,170.167C543.388,174.333,543.388,182.667,518.769,192.031C494.15,201.396,444.913,211.792,420.295,216.99L395.676,222.188"></path><path marker-end="url(#mermaid-wpd49cqi96i_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_0" d="M297.106,270L297.106,274.167C297.106,278.333,297.106,286.667,297.106,294.333C297.106,302,297.106,309,297.106,312.5L297.106,316"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g></g><g class="nodes"><g transform="translate(297.1062545776367, 35)" id="flowchart-A-0" class="node default"><rect height="54" width="137.4124984741211" y="-27" x="-68.70624923706055" style="" class="basic label-container"></rect><g transform="translate(-38.70624923706055, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="77.4124984741211"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>strings dict</p></span></div></foreignobject></g></g><g transform="translate(71.9000015258789, 139)" id="flowchart-B-1" class="node default"><rect height="54" width="127.80000305175781" y="-27" x="-63.900001525878906" style="" class="basic label-container"></rect><g transform="translate(-33.900001525878906, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="67.80000305175781"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>name key</p></span></div></foreignobject></g></g><g transform="translate(297.1062545776367, 139)" id="flowchart-C-3" class="node default"><rect height="54" width="222.6125030517578" y="-27" x="-111.3062515258789" style="" class="basic label-container"></rect><g transform="translate(-81.3062515258789, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="162.6125030517578"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>@loader.tds docstrings</p></span></div></foreignobject></g></g><g transform="translate(543.3875045776367, 139)" id="flowchart-D-5" class="node default"><rect height="54" width="169.95000457763672" y="-27" x="-84.97500228881836" style="" class="basic label-container"></rect><g transform="translate(-54.97500228881836, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="109.95000457763672"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>translation keys</p></span></div></foreignobject></g></g><g transform="translate(297.1062545776367, 243)" id="flowchart-E-7" class="node default"><rect height="54" width="189.3125" y="-27" x="-94.65625" style="" class="basic label-container"></rect><g transform="translate(-64.65625, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="129.3125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Translator.getkey()</p></span></div></foreignobject></g></g><g transform="translate(297.1062545776367, 347)" id="flowchart-F-13" class="node default"><rect height="54" width="173.6750030517578" y="-27" x="-86.8375015258789" style="" class="basic label-container"></rect><g transform="translate(-56.837501525878906, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="113.67500305175781"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>localized output</p></span></div></foreignobject></g></g></g></g></g></svg></div><div class="bg-input-dark absolute right-2 top-2 rounded-sm p-1 opacity-0 transition-opacity group-hover:opacity-100"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M216,48V96a8,8,0,0,1-16,0V67.31l-42.34,42.35a8,8,0,0,1-11.32-11.32L188.69,56H160a8,8,0,0,1,0-16h48A8,8,0,0,1,216,48ZM98.34,146.34,56,188.69V160a8,8,0,0,0-16,0v48a8,8,0,0,0,8,8H96a8,8,0,0,0,0-16H67.31l42.35-42.34a8,8,0,0,0-11.32-11.32ZM208,152a8,8,0,0,0-8,8v28.69l-42.34-42.35a8,8,0,0,0-11.32,11.32L188.69,200H160a8,8,0,0,0,0,16h48a8,8,0,0,0,8-8V160A8,8,0,0,0,208,152ZM67.31,56H96a8,8,0,0,0,0-16H48a8,8,0,0,0-8,8V96a8,8,0,0,0,16,0V67.31l42.34,42.35a8,8,0,0,0,11.32-11.32Z"></path></svg></div></div></pre>
<p>Sources: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a> <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/translations/core.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/translations/core.py</span></a></p>
<h3 id="translatable-docstrings" class="group" data-header="true">Translatable Docstrings<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h3>
<p>Use the <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">@loader.tds</code> decorator to make docstrings translatable:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><pre style="display: block; overflow-x: auto; padding: 6px 8px; color: rgb(51, 51, 51); background: transparent; margin: 0px; width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="color: rgb(153, 153, 153); font-weight: bold;">@loader.tds</span><span>
</span><span></span><span class="hljs-class" style="color: rgb(51, 51, 51); font-weight: bold;">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color: rgb(153, 0, 0); font-weight: bold;">MyModule</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">loader.Module</span><span class="hljs-class">):</span><span>
</span><span>    </span><span style="color: rgb(221, 17, 68);">"""Module description that can be translated"""</span><span>
</span><span>    strings = {</span><span style="color: rgb(221, 17, 68);">"name"</span><span>: </span><span style="color: rgb(221, 17, 68);">"ModuleName"</span><span>}
</span>    
<span></span><span style="color: rgb(153, 153, 153); font-weight: bold;">    @loader.command</span><span>
</span><span>    </span><span style="color: rgb(51, 51, 51); font-weight: bold;">async</span><span> </span><span class="hljs-function" style="color: rgb(51, 51, 51); font-weight: bold;">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color: rgb(153, 0, 0); font-weight: bold;">cmd</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self, message</span><span class="hljs-function">):</span><span>
</span><span>        </span><span style="color: rgb(221, 17, 68);">"""Command description that can be translated"""</span><span>
</span><span>        </span><span style="color: rgb(51, 51, 51); font-weight: bold;">await</span><span> utils.answer(message, self.strings(</span><span style="color: rgb(221, 17, 68);">"some_string"</span><span>))</span></code></pre></pre>
<p>The <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">tds</code> decorator extracts docstrings and makes them available for translation.</p>
<p>Sources: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a> <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/translations/" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/translations/</span></a></p>
<h2 id="module-lifecycle-hooks" class="group" data-header="true">Module Lifecycle Hooks<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>Modules have several lifecycle hooks for initialization and cleanup:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><div class="group relative cursor-pointer overflow-x-auto rounded-md bg-[#f2f1f0] p-4 transition-colors hover:bg-[#ededed] dark:bg-[#1f1f1f] dark:hover:bg-[#242424]" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«rr»" data-state="closed" data-slot="dialog-trigger"><div class="flex justify-center"><svg aria-roledescription="sequence" role="graphics-document document" viewBox="-50 -10 453 595" style="max-width: 100%; touch-action: none; user-select: none; cursor: grab; min-height: fit-content; max-height: 100%;" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="mermaid-cghmyoyfb69" preserveAspectRatio="xMidYMid meet"><g><rect class="actor actor-bottom" ry="3" rx="3" name="ModuleInstance" height="65" width="150" stroke="#666" fill="#eaeaea" y="509" x="202"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="541.5" x="277"><tspan dy="0" x="277">ModuleInstance</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="Modules" height="65" width="150" stroke="#666" fill="#eaeaea" y="509" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="541.5" x="75"><tspan dy="0" x="75">Modules</tspan></text></g><g><line name="ModuleInstance" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="509" x2="277" y1="65" x1="277" id="actor10"></line><g id="root-10"><rect class="actor actor-top" ry="3" rx="3" name="ModuleInstance" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="202"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="277"><tspan dy="0" x="277">ModuleInstance</tspan></text></g></g><g><line name="Modules" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="509" x2="75" y1="65" x1="75" id="actor9"></line><g id="root-9"><rect class="actor actor-top" ry="3" rx="3" name="Modules" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="75"><tspan dy="0" x="75">Modules</tspan></text></g></g><style>#mermaid-cghmyoyfb69{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-cghmyoyfb69 .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-cghmyoyfb69 .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-cghmyoyfb69 .error-icon{fill:#dddddd;}#mermaid-cghmyoyfb69 .error-text{fill:#222222;stroke:#222222;}#mermaid-cghmyoyfb69 .edge-thickness-normal{stroke-width:1px;}#mermaid-cghmyoyfb69 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-cghmyoyfb69 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-cghmyoyfb69 .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-cghmyoyfb69 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-cghmyoyfb69 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-cghmyoyfb69 .marker{fill:#999;stroke:#999;}#mermaid-cghmyoyfb69 .marker.cross{stroke:#999;}#mermaid-cghmyoyfb69 svg{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;}#mermaid-cghmyoyfb69 p{margin:0;}#mermaid-cghmyoyfb69 .actor{stroke:#cccccc;fill:#ffffff;}#mermaid-cghmyoyfb69 text.actor&gt;tspan{fill:#333;stroke:none;}#mermaid-cghmyoyfb69 .actor-line{stroke:#cccccc;}#mermaid-cghmyoyfb69 .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#999999;}#mermaid-cghmyoyfb69 .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#999999;}#mermaid-cghmyoyfb69 #arrowhead path{fill:#999999;stroke:#999999;}#mermaid-cghmyoyfb69 .sequenceNumber{fill:#666666;}#mermaid-cghmyoyfb69 #sequencenumber{fill:#999999;}#mermaid-cghmyoyfb69 #crosshead path{fill:#999999;stroke:#999999;}#mermaid-cghmyoyfb69 .messageText{fill:#333333;stroke:none;}#mermaid-cghmyoyfb69 .labelBox{stroke:#dddddd;fill:#ffffff;}#mermaid-cghmyoyfb69 .labelText,#mermaid-cghmyoyfb69 .labelText&gt;tspan{fill:#333;stroke:none;}#mermaid-cghmyoyfb69 .loopText,#mermaid-cghmyoyfb69 .loopText&gt;tspan{fill:#333;stroke:none;}#mermaid-cghmyoyfb69 .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:#dddddd;fill:#dddddd;}#mermaid-cghmyoyfb69 .note{stroke:#e6d280;fill:#fff5ad;}#mermaid-cghmyoyfb69 .noteText,#mermaid-cghmyoyfb69 .noteText&gt;tspan{fill:#333;stroke:none;}#mermaid-cghmyoyfb69 .activation0{fill:hsl(-120, 0%, 91.7647058824%);stroke:hsl(-120, 0%, 81.7647058824%);}#mermaid-cghmyoyfb69 .activation1{fill:hsl(-120, 0%, 91.7647058824%);stroke:hsl(-120, 0%, 81.7647058824%);}#mermaid-cghmyoyfb69 .activation2{fill:hsl(-120, 0%, 91.7647058824%);stroke:hsl(-120, 0%, 81.7647058824%);}#mermaid-cghmyoyfb69 .actorPopupMenu{position:absolute;}#mermaid-cghmyoyfb69 .actorPopupMenuPanel{position:absolute;fill:#ffffff;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);filter:drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));}#mermaid-cghmyoyfb69 .actor-man line{stroke:#cccccc;fill:#ffffff;}#mermaid-cghmyoyfb69 .actor-man circle,#mermaid-cghmyoyfb69 line{stroke:#cccccc;fill:#ffffff;stroke-width:2px;}#mermaid-cghmyoyfb69 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g></g><defs><symbol height="24" width="24" id="computer"><path d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z" transform="scale(.5)"></path></symbol></defs><defs><symbol clip-rule="evenodd" fill-rule="evenodd" id="database"><path d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z" transform="scale(.5)"></path></symbol></defs><defs><symbol height="24" width="24" id="clock"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z" transform="scale(.5)"></path></symbol></defs><defs><marker orient="auto-start-reverse" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="7.9" id="arrowhead"><path d="M -1 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker refY="4.5" refX="4" orient="auto" markerHeight="8" markerWidth="15" id="crosshead"><path style="stroke-dasharray: 0, 0;" d="M 1,2 L 6,7 M 6,2 L 1,7" stroke-width="1pt" stroke="#000000" fill="none"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="15.5" id="filled-head"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="40" markerWidth="60" refY="15" refX="15" id="sequencenumber"><circle r="6" cy="15" cx="15"></circle></marker></defs><g><rect class="note" height="42" width="150" stroke="#666" fill="#EDF2AE" y="395" x="202"></rect><text style="font-size: 16px; font-weight: 400;" dy="1em" class="noteText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="400" x="277"><tspan x="277">Module runs...</tspan></text></g><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="80" x="175">Create instance</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="117" x2="273" y1="117" x1="76"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="132" x="278">__init__()</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 278,169 C 338,159 338,199 278,189"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="214" x="278">internal_init()</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 278,251 C 338,241 338,281 278,271"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="296" x="175">config_complete()</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="333" x2="273" y1="333" x1="76"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="348" x="175">client_ready()</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="385" x2="273" y1="385" x1="76"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="452" x="175">on_unload()</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="489" x2="273" y1="489" x1="76"></line></svg></div><div class="bg-input-dark absolute right-2 top-2 rounded-sm p-1 opacity-0 transition-opacity group-hover:opacity-100"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M216,48V96a8,8,0,0,1-16,0V67.31l-42.34,42.35a8,8,0,0,1-11.32-11.32L188.69,56H160a8,8,0,0,1,0-16h48A8,8,0,0,1,216,48ZM98.34,146.34,56,188.69V160a8,8,0,0,0-16,0v48a8,8,0,0,0,8,8H96a8,8,0,0,0,0-16H67.31l42.35-42.34a8,8,0,0,0-11.32-11.32ZM208,152a8,8,0,0,0-8,8v28.69l-42.34-42.35a8,8,0,0,0-11.32,11.32L188.69,200H160a8,8,0,0,0,0,16h48a8,8,0,0,0,8-8V160A8,8,0,0,0,208,152ZM67.31,56H96a8,8,0,0,0,0-16H48a8,8,0,0,0-8,8V96a8,8,0,0,0,16,0V67.31l42.34,42.35a8,8,0,0,0,11.32-11.32Z"></path></svg></div></div></pre>
<p>The key lifecycle methods are:</p>
<ol>
<li><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">__init__()</code> - Initial setup, define configs</li>
<li><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">internal_init()</code> - Set up internal state</li>
<li><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">config_complete()</code> - Config has been loaded</li>
<li><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">client_ready()</code> - Client is connected and ready</li>
<li><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">on_unload()</code> - Module is being unloaded</li>
</ol>
<p>Sources: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a> <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/modules/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/modules/loader.py</span></a></p>
<h3 id="self-suspension-and-self-unload" class="group" data-header="true">Self-Suspension and Self-Unload<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h3>
<p>Modules can trigger their own unloading or suspension:</p>
<ul>
<li>Raise <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">SelfUnload</code> to remove the module</li>
<li>Raise <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">SelfSuspend</code> to temporarily disable the module</li>
</ul>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><pre style="display: block; overflow-x: auto; padding: 6px 8px; color: rgb(51, 51, 51); background: transparent; margin: 0px; width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="color: rgb(51, 51, 51); font-weight: bold;">async</span><span> </span><span class="hljs-function" style="color: rgb(51, 51, 51); font-weight: bold;">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color: rgb(153, 0, 0); font-weight: bold;">client_ready</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self</span><span class="hljs-function">):</span><span>
</span><span>    </span><span style="color: rgb(51, 51, 51); font-weight: bold;">if</span><span> </span><span style="color: rgb(51, 51, 51); font-weight: bold;">not</span><span> some_requirement_met:
</span><span>        </span><span style="color: rgb(51, 51, 51); font-weight: bold;">raise</span><span> loader.SelfUnload(</span><span style="color: rgb(221, 17, 68);">"Required dependency not available"</span><span>)</span></code></pre></pre>
<p>Sources: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a> <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/modules/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/modules/loader.py</span></a></p>
<h2 id="creating-infinite-loops" class="group" data-header="true">Creating Infinite Loops<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>For tasks that need to run periodically, use the <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">@loader.loop</code> decorator:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><pre style="display: block; overflow-x: auto; padding: 6px 8px; color: rgb(51, 51, 51); background: transparent; margin: 0px; width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="color: rgb(153, 153, 153); font-weight: bold;">@loader.loop(</span><span class="hljs-params" style="color: rgb(153, 153, 153); font-weight: bold;">interval=</span><span class="hljs-params" style="color: rgb(0, 128, 128); font-weight: bold;">60</span><span class="hljs-params" style="color: rgb(153, 153, 153); font-weight: bold;">, autostart=</span><span class="hljs-params" style="color: rgb(0, 128, 128); font-weight: bold;">True</span><span style="color: rgb(153, 153, 153); font-weight: bold;">)</span><span>
</span><span></span><span style="color: rgb(51, 51, 51); font-weight: bold;">async</span><span> </span><span class="hljs-function" style="color: rgb(51, 51, 51); font-weight: bold;">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color: rgb(153, 0, 0); font-weight: bold;">check_something</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self</span><span class="hljs-function">):</span><span>
</span><span>    </span><span style="color: rgb(221, 17, 68);">"""Check something every minute"""</span><span>
</span><span>    </span><span style="color: rgb(153, 153, 136); font-style: italic;"># Do something periodically</span></code></pre></pre>
<p>The loop will be managed by the module system, automatically starting and stopping with the module.</p>
<p>Sources: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a></p>
<h2 id="best-practices" class="group" data-header="true">Best Practices<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<h3 id="security-decorators" class="group" data-header="true">Security Decorators<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h3>
<p>Use security decorators to restrict access to commands:</p>
<ul>
<li><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">@loader.owner</code> - Only the bot owner can use</li>
<li><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">@loader.group_owner</code> - Only the group owner can use</li>
<li><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">@loader.group_admin</code> - Only group admins can use</li>
<li><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">@loader.pm</code> - Only usable in private messages</li>
<li><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">@loader.unrestricted</code> - Anyone can use</li>
</ul>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><pre style="display: block; overflow-x: auto; padding: 6px 8px; color: rgb(51, 51, 51); background: transparent; margin: 0px; width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="color: rgb(153, 153, 153); font-weight: bold;">@loader.command</span><span>
</span><span></span><span style="color: rgb(153, 153, 153); font-weight: bold;">@loader.owner</span><span>
</span><span></span><span style="color: rgb(51, 51, 51); font-weight: bold;">async</span><span> </span><span class="hljs-function" style="color: rgb(51, 51, 51); font-weight: bold;">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color: rgb(153, 0, 0); font-weight: bold;">sensitive_command</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self, message</span><span class="hljs-function">):</span><span>
</span><span>    </span><span style="color: rgb(221, 17, 68);">"""Only the owner can use this command"""</span><span>
</span><span>    </span><span style="color: rgb(153, 153, 136); font-style: italic;"># Command implementation</span></code></pre></pre>
<p>Sources: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a> <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/security.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/security.py</span></a></p>
<h3 id="error-handling" class="group" data-header="true">Error Handling<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h3>
<p>Properly handle errors to prevent your module from crashing:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><pre style="display: block; overflow-x: auto; padding: 6px 8px; color: rgb(51, 51, 51); background: transparent; margin: 0px; width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="color: rgb(153, 153, 153); font-weight: bold;">@loader.command</span><span>
</span><span></span><span style="color: rgb(51, 51, 51); font-weight: bold;">async</span><span> </span><span class="hljs-function" style="color: rgb(51, 51, 51); font-weight: bold;">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color: rgb(153, 0, 0); font-weight: bold;">risky_command</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self, message</span><span class="hljs-function">):</span><span>
</span><span>    </span><span style="color: rgb(221, 17, 68);">"""Command that might fail"""</span><span>
</span><span>    </span><span style="color: rgb(51, 51, 51); font-weight: bold;">try</span><span>:
</span><span>        </span><span style="color: rgb(153, 153, 136); font-style: italic;"># Risky operation</span><span>
</span><span>    </span><span style="color: rgb(51, 51, 51); font-weight: bold;">except</span><span> Exception </span><span style="color: rgb(51, 51, 51); font-weight: bold;">as</span><span> e:
</span><span>        </span><span style="color: rgb(51, 51, 51); font-weight: bold;">await</span><span> utils.answer(message, </span><span style="color: rgb(221, 17, 68);">f"Error: </span><span style="color: rgb(51, 51, 51); font-weight: normal;">{e}</span><span style="color: rgb(221, 17, 68);">"</span><span>)
</span><span>        logger.exception(</span><span style="color: rgb(221, 17, 68);">"Error in risky_command"</span><span>)</span></code></pre></pre>
<p>Sources: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/loader.py</span></a> <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/utils.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/utils.py</span></a></p>
<h3 id="module-metadata" class="group" data-header="true">Module Metadata<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h3>
<p>Add metadata to make your module more user-friendly:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><pre style="display: block; overflow-x: auto; padding: 6px 8px; color: rgb(51, 51, 51); background: transparent; margin: 0px; width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="color: rgb(153, 153, 136); font-style: italic;"># meta developer: @username</span><span>
</span><span></span><span style="color: rgb(153, 153, 136); font-style: italic;"># scope: heroku_min 1.3.0</span><span>
</span><span></span><span style="color: rgb(153, 153, 136); font-style: italic;"># requires: requests pillow</span></code></pre></pre>
<p>These comments are processed during module loading to handle dependencies, version requirements, and developer attribution.</p>
<p>Sources: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/modules/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/modules/loader.py</span></a></p>
<h2 id="publishing-modules" class="group" data-header="true">Publishing Modules<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>Modules can be distributed:</p>
<ol>
<li>As standalone <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">.py</code> files that users can load with <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">.loadmod</code></li>
<li>Through repositories that users can add with <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">.addrepo</code></li>
<li>By sharing links to GitHub or GitLab repositories</li>
</ol>
<p>Make sure to include proper documentation and handle dependencies appropriately.</p>
<p>Sources: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/modules/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/modules/loader.py</span></a></p>
<h2 id="module-loading-methods" class="group" data-header="true">Module Loading Methods<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>There are several ways to load modules:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><div class="group relative cursor-pointer overflow-x-auto rounded-md bg-[#f2f1f0] p-4 transition-colors hover:bg-[#ededed] dark:bg-[#1f1f1f] dark:hover:bg-[#242424]" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«ru»" data-state="closed" data-slot="dialog-trigger"><div class="flex justify-center"><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 816.6124877929688 406" style="max-width: 100%; touch-action: none; user-select: none; cursor: grab; min-height: fit-content; max-height: 100%;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="mermaid-q88ff6yvfii" preserveAspectRatio="xMidYMid meet"><style>#mermaid-q88ff6yvfii{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-q88ff6yvfii .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-q88ff6yvfii .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-q88ff6yvfii .error-icon{fill:#dddddd;}#mermaid-q88ff6yvfii .error-text{fill:#222222;stroke:#222222;}#mermaid-q88ff6yvfii .edge-thickness-normal{stroke-width:1px;}#mermaid-q88ff6yvfii .edge-thickness-thick{stroke-width:3.5px;}#mermaid-q88ff6yvfii .edge-pattern-solid{stroke-dasharray:0;}#mermaid-q88ff6yvfii .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-q88ff6yvfii .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-q88ff6yvfii .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-q88ff6yvfii .marker{fill:#999;stroke:#999;}#mermaid-q88ff6yvfii .marker.cross{stroke:#999;}#mermaid-q88ff6yvfii svg{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;}#mermaid-q88ff6yvfii p{margin:0;}#mermaid-q88ff6yvfii .label{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;color:#333;}#mermaid-q88ff6yvfii .cluster-label text{fill:#444;}#mermaid-q88ff6yvfii .cluster-label span{color:#444;}#mermaid-q88ff6yvfii .cluster-label span p{background-color:transparent;}#mermaid-q88ff6yvfii .label text,#mermaid-q88ff6yvfii span{fill:#333;color:#333;}#mermaid-q88ff6yvfii .node rect,#mermaid-q88ff6yvfii .node circle,#mermaid-q88ff6yvfii .node ellipse,#mermaid-q88ff6yvfii .node polygon,#mermaid-q88ff6yvfii .node path{fill:#ffffff;stroke:#dddddd;stroke-width:1px;}#mermaid-q88ff6yvfii .rough-node .label text,#mermaid-q88ff6yvfii .node .label text,#mermaid-q88ff6yvfii .image-shape .label,#mermaid-q88ff6yvfii .icon-shape .label{text-anchor:middle;}#mermaid-q88ff6yvfii .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-q88ff6yvfii .rough-node .label,#mermaid-q88ff6yvfii .node .label,#mermaid-q88ff6yvfii .image-shape .label,#mermaid-q88ff6yvfii .icon-shape .label{text-align:center;}#mermaid-q88ff6yvfii .node.clickable{cursor:pointer;}#mermaid-q88ff6yvfii .root .anchor path{fill:#999!important;stroke-width:0;stroke:#999;}#mermaid-q88ff6yvfii .arrowheadPath{fill:#0b0b0b;}#mermaid-q88ff6yvfii .edgePath .path{stroke:#999;stroke-width:2.0px;}#mermaid-q88ff6yvfii .flowchart-link{stroke:#999;fill:none;}#mermaid-q88ff6yvfii .edgeLabel{background-color:#ffffff;text-align:center;}#mermaid-q88ff6yvfii .edgeLabel p{background-color:#ffffff;}#mermaid-q88ff6yvfii .edgeLabel rect{opacity:0.5;background-color:#ffffff;fill:#ffffff;}#mermaid-q88ff6yvfii .labelBkg{background-color:rgba(255, 255, 255, 0.5);}#mermaid-q88ff6yvfii .cluster rect{fill:#f8f8f8;stroke:#dddddd;stroke-width:1px;}#mermaid-q88ff6yvfii .cluster text{fill:#444;}#mermaid-q88ff6yvfii .cluster span{color:#444;}#mermaid-q88ff6yvfii div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:12px;background:#dddddd;border:1px solid hsl(0, 0%, 76.6666666667%);border-radius:2px;pointer-events:none;z-index:100;}#mermaid-q88ff6yvfii .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-q88ff6yvfii rect.text{fill:none;stroke-width:0;}#mermaid-q88ff6yvfii .icon-shape,#mermaid-q88ff6yvfii .image-shape{background-color:#ffffff;text-align:center;}#mermaid-q88ff6yvfii .icon-shape p,#mermaid-q88ff6yvfii .image-shape p{background-color:#ffffff;padding:2px;}#mermaid-q88ff6yvfii .icon-shape rect,#mermaid-q88ff6yvfii .image-shape rect{opacity:0.5;background-color:#ffffff;fill:#ffffff;}#mermaid-q88ff6yvfii :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-q88ff6yvfii_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-q88ff6yvfii_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-q88ff6yvfii_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-q88ff6yvfii_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-q88ff6yvfii_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-q88ff6yvfii_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-q88ff6yvfii_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M331.65,52.483L297.656,60.236C263.663,67.989,195.675,83.494,161.681,96.747C127.688,110,127.688,121,127.688,126.5L127.688,132"></path><path marker-end="url(#mermaid-q88ff6yvfii_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_C_0" d="M408.306,62L408.306,68.167C408.306,74.333,408.306,86.667,408.306,98.333C408.306,110,408.306,121,408.306,126.5L408.306,132"></path><path marker-end="url(#mermaid-q88ff6yvfii_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_D_0" d="M484.963,52.483L518.956,60.236C552.95,67.989,620.938,83.494,654.931,96.747C688.925,110,688.925,121,688.925,126.5L688.925,132"></path><path marker-end="url(#mermaid-q88ff6yvfii_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_E_0" d="M127.688,190L127.688,194.167C127.688,198.333,127.688,206.667,153.113,215.545C178.539,224.423,229.39,233.846,254.816,238.558L280.242,243.269"></path><path marker-end="url(#mermaid-q88ff6yvfii_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_E_0" d="M408.306,190L408.306,194.167C408.306,198.333,408.306,206.667,408.306,214.333C408.306,222,408.306,229,408.306,232.5L408.306,236"></path><path marker-end="url(#mermaid-q88ff6yvfii_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_E_0" d="M688.925,190L688.925,194.167C688.925,198.333,688.925,206.667,663.499,215.545C638.074,224.423,587.222,233.846,561.796,238.558L536.371,243.269"></path><path marker-end="url(#mermaid-q88ff6yvfii_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_0" d="M408.306,294L408.306,298.167C408.306,302.333,408.306,310.667,408.306,318.333C408.306,326,408.306,333,408.306,336.5L408.306,340"></path></g><g class="edgeLabels"><g transform="translate(127.6875, 99)" class="edgeLabel"><g transform="translate(-56.493751525878906, -12)" class="label"><foreignobject height="24" width="112.98750305175781"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>.loadmod file.py</p></span></div></foreignobject></g></g><g transform="translate(408.3062515258789, 99)" class="edgeLabel"><g transform="translate(-76.79375457763672, -12)" class="label"><foreignobject height="24" width="153.58750915527344"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>.dlmod module_name</p></span></div></foreignobject></g></g><g transform="translate(688.9250030517578, 99)" class="edgeLabel"><g transform="translate(-49.66875076293945, -12)" class="label"><foreignobject height="24" width="99.3375015258789"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>.loadmod URL</p></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignobject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignobject></g></g></g><g class="nodes"><g transform="translate(408.3062515258789, 35)" id="flowchart-A-0" class="node default"><rect height="54" width="153.3125" y="-27" x="-76.65625" style="" class="basic label-container"></rect><g transform="translate(-46.65625, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="93.3125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Load Module</p></span></div></foreignobject></g></g><g transform="translate(127.6875, 163)" id="flowchart-B-1" class="node default"><rect height="54" width="239.375" y="-27" x="-119.6875" style="" class="basic label-container"></rect><g transform="translate(-89.6875, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="179.375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>LoaderModule.loadmod()</p></span></div></foreignobject></g></g><g transform="translate(408.3062515258789, 163)" id="flowchart-C-3" class="node default"><rect height="54" width="221.8625030517578" y="-27" x="-110.9312515258789" style="" class="basic label-container"></rect><g transform="translate(-80.9312515258789, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="161.8625030517578"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>LoaderModule.dlmod()</p></span></div></foreignobject></g></g><g transform="translate(688.9250030517578, 163)" id="flowchart-D-5" class="node default"><rect height="54" width="239.375" y="-27" x="-119.6875" style="" class="basic label-container"></rect><g transform="translate(-89.6875, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="179.375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>LoaderModule.loadmod()</p></span></div></foreignobject></g></g><g transform="translate(408.3062515258789, 267)" id="flowchart-E-7" class="node default"><rect height="54" width="248.2624969482422" y="-27" x="-124.1312484741211" style="" class="basic label-container"></rect><g transform="translate(-94.1312484741211, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="188.2624969482422"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Modules.register_module()</p></span></div></foreignobject></g></g><g transform="translate(408.3062515258789, 371)" id="flowchart-F-13" class="node default"><rect height="54" width="177.32500457763672" y="-27" x="-88.66250228881836" style="" class="basic label-container"></rect><g transform="translate(-58.66250228881836, -12)" style="" class="label"><rect></rect><foreignobject height="24" width="117.32500457763672"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Module Instance</p></span></div></foreignobject></g></g></g></g></g></svg></div><div class="bg-input-dark absolute right-2 top-2 rounded-sm p-1 opacity-0 transition-opacity group-hover:opacity-100"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M216,48V96a8,8,0,0,1-16,0V67.31l-42.34,42.35a8,8,0,0,1-11.32-11.32L188.69,56H160a8,8,0,0,1,0-16h48A8,8,0,0,1,216,48ZM98.34,146.34,56,188.69V160a8,8,0,0,0-16,0v48a8,8,0,0,0,8,8H96a8,8,0,0,0,0-16H67.31l42.35-42.34a8,8,0,0,0-11.32-11.32ZM208,152a8,8,0,0,0-8,8v28.69l-42.34-42.35a8,8,0,0,0-11.32,11.32L188.69,200H160a8,8,0,0,0,0,16h48a8,8,0,0,0,8-8V160A8,8,0,0,0,208,152ZM67.31,56H96a8,8,0,0,0,0-16H48a8,8,0,0,0-8,8V96a8,8,0,0,0,16,0V67.31l42.34,42.35a8,8,0,0,0,11.32-11.32Z"></path></svg></div></div></pre>
<p>Sources: <a href="https://github.com/coddrago/Heroku/blob/431b8e1a/heroku/modules/loader.py" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>heroku/modules/loader.py</span></a></p>
<h2 id="summary" class="group" data-header="true">Summary<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>Creating a module for Heroku involves:</p>
<ol>
<li>Creating a class that inherits from <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">loader.Module</code></li>
<li>Defining a <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">strings</code> dictionary with at least a <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">name</code> entry</li>
<li>Adding commands with the <code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">@loader.command</code> decorator</li>
<li>Optionally adding watchers, inline handlers, and callback handlers</li>
<li>Optionally defining configuration options</li>
<li>Implementing lifecycle hooks as needed</li>
</ol>
<p>With this knowledge, you can extend Hikka Userbot with your own custom functionality.</p></div></div></div></div></div></div><div class="hidden overflow-hidden transition-[border-radius] xl:sticky xl:right-0 xl:top-20 xl:block xl:h-[calc(100vh-82px)] xl:w-64 xl:flex-shrink-0 2xl:w-72" style="scrollbar-width:none" data-vivaldi-translated=""><div class="flex max-h-full w-full flex-shrink-0 flex-col py-6 pt-0 text-sm lg:pb-4 lg:pt-8 xl:w-64 2xl:w-72" style="scrollbar-color:var(--color-night) transparent" data-vivaldi-translated=""><div data-vivaldi-translated=""><div class="relative mx-4 my-4 rounded-md border border-neutral-200 bg-neutral-100 p-3 text-sm text-neutral-600 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-400" data-vivaldi-translated=""><button class="absolute right-2 top-2 rounded-sm p-1 opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-neutral-400 focus:ring-offset-2" data-vivaldi-translated=""><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"></path></svg><span class="sr-only" data-vivaldi-translated="">Увольнять</span></button><p class="text-sm font-medium" data-vivaldi-translated="">Обновите эту вики</p><button class="mt-2 flex items-center gap-1 rounded-md bg-neutral-200 px-2 py-1 text-sm font-medium text-neutral-700 transition-colors hover:bg-neutral-300 dark:bg-neutral-800 dark:text-neutral-300 dark:hover:bg-neutral-700" data-vivaldi-translated="">Введите адрес электронной почты для обновления</button></div></div><h3 class="px-4 pb-5 text-lg font-medium leading-none" data-vivaldi-translated="">На этой странице</h3><ul style="scrollbar-width:none" class="min-h-0 flex-1 space-y-3 overflow-y-auto p-4 pt-0"><li class="" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#creating-modules" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Создание модулей</a></li><li class="ml-3" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#module-fundamentals" class="hover:text-primary pr-1 transition-all text-primary font-medium" data-vivaldi-translated="">Основы модуля</a></li><li class="ml-3" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#creating-a-basic-module" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Создание базового модуля</a></li><li class="ml-6" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#minimal-module-example" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Пример минимального модуля</a></li><li class="ml-3" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#module-registration-process" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Процесс регистрации модуля</a></li><li class="ml-3" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#command-registration" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Регистрация команд</a></li><li class="ml-6" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#command-example" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Пример команды</a></li><li class="ml-3" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#event-watchers" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Наблюдатели за событиями</a></li><li class="ml-6" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#filtering-events-with-tags" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Фильтрация событий с помощью тегов</a></li><li class="ml-3" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#inline-and-callback-handlers" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Встроенные обработчики и обработчики обратного вызова</a></li><li class="ml-3" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#raw-event-handlers" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Обработчики необработанных событий</a></li><li class="ml-3" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#module-configuration" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Конфигурация модуля</a></li><li class="ml-6" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#configuration-example" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Пример конфигурации</a></li><li class="ml-3" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#translation-support" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Поддержка перевода</a></li><li class="ml-6" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#translatable-docstrings" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Переводимые строки документации</a></li><li class="ml-3" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#module-lifecycle-hooks" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Крючки жизненного цикла модуля</a></li><li class="ml-6" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#self-suspension-and-self-unload" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Самоподвеска и саморазгрузка</a></li><li class="ml-3" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#creating-infinite-loops" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Создание бесконечных циклов</a></li><li class="ml-3" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#best-practices" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Лучшие практики</a></li><li class="ml-6" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#security-decorators" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Декораторы безопасности</a></li><li class="ml-6" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#error-handling" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Обработка ошибок</a></li><li class="ml-6" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#module-metadata" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Метаданные модуля</a></li><li class="ml-3" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#publishing-modules" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Издательские модули</a></li><li class="ml-3" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#module-loading-methods" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Методы загрузки модулей</a></li><li class="ml-3" data-vivaldi-translated=""><a href="https://deepwiki.com/coddrago/Heroku/7.1-creating-modules#summary" class="hover:text-primary pr-1 font-normal transition-all text-secondary" data-vivaldi-translated="">Резюме</a></li></ul></div></div><div class="pointer-events-none fixed bottom-2 left-2 right-2 mt-2 md:bottom-4 md:left-0 md:right-0" data-vivaldi-translated=""><div class="z-10 mx-auto max-w-3xl" data-vivaldi-translated=""><form class="z-20 w-full rounded-md backdrop-blur-md transition-shadow [pointer-events:all] focus-within:ring-[.5px] focus-within:ring-indigo-300/40 bg-component/70 border border-indigo-300/20 shadow-lg shadow-indigo-500/20 [backdrop-filter:blur(8px)]"><div class="" data-vivaldi-translated=""><div class="relative text-base font-normal" data-vivaldi-translated=""><div class="relative px-3 pt-3" data-vivaldi-translated=""><div class="pointer-events-none absolute left-3 right-3 top-3 ml-px flex w-full overflow-hidden text-base" aria-hidden="true" data-vivaldi-translated=""><div class="flex items-center gap-1 overflow-hidden text-wrap opacity-60" data-vivaldi-translated="">Спросите Девина о коддраго/Хероку</div></div><textarea data-deepwiki-input="question" placeholder="" rows="2" class="w-full resize-none rounded-none bg-transparent text-white focus:outline-none text-base" data-vivaldi-translated=""></textarea></div></div></div><div class="dark:border-border flex h-12 items-center justify-between border-t-[0.5px] border-[#c0c0c0] p-3 pl-1.5" data-vivaldi-translated=""><div class="flex items-center text-sm gap-4" data-vivaldi-translated=""><button data-slot="button" class="font-medium disabled:pointer-events-none disabled:opacity-50 shrink-0 focus-visible:border-ring aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:hover:bg-accent/50 has-[&gt;svg]:px-3 data-[placeholder]:text-muted-foreground [&amp;_svg:not([class*=&#39;text-&#39;])]:text-muted-foreground focus-visible:ring-ring/50 hover:bg-accent hover:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex h-9 w-fit cursor-pointer items-center justify-between gap-2 whitespace-nowrap rounded-md bg-transparent px-3 py-2 text-sm text-neutral-700 outline-none transition-all focus-visible:ring-[3px] dark:text-neutral-400 [&amp;_svg:not([class*=&#39;size-&#39;])]:size-4 [&amp;_svg]:pointer-events-none [&amp;_svg]:shrink-0" data-selected="true" type="button" id="radix-«r0»" aria-haspopup="menu" aria-expanded="false" data-state="closed" data-vivaldi-translated=""><div class="flex items-center gap-2" data-vivaldi-translated=""><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="size-4 text-current"><path d="M213.85,125.46l-112,120a8,8,0,0,1-13.69-7l14.66-73.33L45.19,143.49a8,8,0,0,1-3-13l112-120a8,8,0,0,1,13.69,7L153.18,90.9l57.63,21.61a8,8,0,0,1,3,12.95Z"></path></svg><span data-vivaldi-translated="">Быстрый</span></div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="size-4 text-current opacity-50"><path d="M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"></path></svg></button></div><div class="flex items-center gap-2" data-vivaldi-translated=""><button class="rounded-full bg-[#e0e0e0] p-1 text-neutral-400 transition-colors dark:bg-neutral-700" disabled="" data-state="closed" data-slot="tooltip-trigger" data-vivaldi-translated=""><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 256 256"><path d="M221.66,133.66l-72,72a8,8,0,0,1-11.32-11.32L196.69,136H40a8,8,0,0,1,0-16H196.69L138.34,61.66a8,8,0,0,1,11.32-11.32l72,72A8,8,0,0,1,221.66,133.66Z"></path></svg></button></div></div></form></div></div></div></div></div><!--/$--></div><!--/$--><script src="./Создание модулей _ coddrago_Heroku _ DeepWiki_files/webpack-acbbbb548492d4a6.js.Без названия" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[51709,[\"9453\",\"static/chunks/b1298b8d-549c141f97a3b262.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"8970\",\"static/chunks/378e5a93-3b0f971d3611a8a5.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"1585\",\"static/chunks/f7f68e2d-40290491c524df5c.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"4420\",\"static/chunks/4420-863691215dce8f1b.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"6417\",\"static/chunks/6417-34cc3208366c5e5f.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"4348\",\"static/chunks/4348-824485747071bae4.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"3224\",\"static/chunks/3224-7e9887ea92eab174.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"6967\",\"static/chunks/6967-c4b815e71e97ed18.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"7177\",\"static/chunks/app/layout-37a15e31a18fac3d.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\"],\"RootProvider\"]\n3:I[87555,[],\"\"]\n4:I[31295,[],\"\"]\n6:I[90894,[],\"ClientPageRoot\"]\n7:I[87667,[\"9453\",\"static/chunks/b1298b8d-549c141f97a3b262.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"8970\",\"static/chunks/378e5a93-3b0f971d3611a8a5.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"1585\",\"static/chunks/f7f68e2d-40290491c524df5c.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"4129\",\"static/chunks/7bf36345-06f80506190927ed.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"2545\",\"static/chunks/c16f53c3-1a60b9b77b3e1d4b.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"4420\",\"static/chunks/4420-863691215dce8f1b.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"6417\",\"static/chunks/6417-34cc3208366c5e5f.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"4348\",\"static/chunks/4348-824485747071bae4.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"3224\",\"static/chunks/3224-7e9887ea92eab174.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"2249\",\"static/chunks/2249-342d7235b3a68051.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"9970\",\"static/chunks/9970-31fea4ade6367f07.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"6967\",\"static/chunks/6967-c4b815e71e97ed18.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"1769\",\"static/chunks/1769-6bbc7ae2dcadfa9c.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"655\",\"static/c"])</script><script>self.__next_f.push([1,"hunks/655-b5574efc1f81bad2.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"4154\",\"static/chunks/4154-f7634cd651686b21.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"3639\",\"static/chunks/3639-ec25f3154d8ce73c.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"8613\",\"static/chunks/8613-04ed56064abeb81e.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"4870\",\"static/chunks/4870-3ddb59732948b175.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"3285\",\"static/chunks/app/%5Borg%5D/%5Brepo%5D/%5B%5B...wikiRoutes%5D%5D/page-78fac26cbb8eb9a1.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\"],\"default\"]\na:I[59665,[],\"OutletBoundary\"]\nd:I[59665,[],\"ViewportBoundary\"]\nf:I[59665,[],\"MetadataBoundary\"]\n11:I[26614,[],\"\"]\n:HL[\"/_next/static/media/4cf2300e9c8272f7-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/de70bee13400563f.css?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"style\"]\n:HL[\"/_next/static/css/4095ef47de7c7e40.css?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"lYT4YaauI6fvcDHRe8U-l\",\"p\":\"\",\"c\":[\"\",\"coddrago\",\"Heroku\",\"7.1-creating-modules\"],\"i\":false,\"f\":[[[\"\",{\"children\":[[\"org\",\"coddrago\",\"d\"],{\"children\":[[\"repo\",\"Heroku\",\"d\"],{\"children\":[[\"wikiRoutes\",\"7.1-creating-modules\",\"oc\"],{\"children\":[\"__PAGE__\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/de70bee13400563f.css?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/4095ef47de7c7e40.css?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{}],[\"$\",\"body\",null,{\"className\":\"__variable_188709 font-geist-sans relative min-h-screen __variable_9a8899 bg-background antialiased\",\"children\":[\"$\",\"$L2\",null,{\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}]]}],{\"children\":[[\"org\",\"coddrago\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"repo\",\"Heroku\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,\"$L5\"]}],{\"children\":[[\"wikiRoutes\",\"7.1-creating-modules\",\"oc\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"$L6\",null,{\"Component\":\"$7\",\"searchParams\":{},\"params\":{\"org\":\"coddrago\",\"repo\":\"Heroku\",\"wikiRoutes\":[\"7.1-creating-modules\"]},\"promises\":[\"$@8\",\"$@9\"]}],\"$undefined\",null,[\"$\",\"$La\",null,{\"children\":[\"$Lb\",\"$Lc\",null]}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"CkNMINmR9h8qjF2ABgisG\",{\"children\":[[\"$\",\"$Ld\",null,{\"children\":\"$Le\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],[\"$\",\"$Lf\",null,{\"children\":\"$L10\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$11\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"8:{}\n9:{\"org\":\"coddrago\",\"repo\":\"Heroku\",\"wikiRoutes\":\"$0:f:0:1:2:children:2:children:2:children:2:children:1:props:children:0:props:params:wikiRoutes\"}\n"])</script><script>self.__next_f.push([1,"e:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\nb:null\n"])</script><script>self.__next_f.push([1,"12:I[87437,[\"9453\",\"static/chunks/b1298b8d-549c141f97a3b262.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"8970\",\"static/chunks/378e5a93-3b0f971d3611a8a5.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"1585\",\"static/chunks/f7f68e2d-40290491c524df5c.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"4420\",\"static/chunks/4420-863691215dce8f1b.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"6417\",\"static/chunks/6417-34cc3208366c5e5f.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"4348\",\"static/chunks/4348-824485747071bae4.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"2249\",\"static/chunks/2249-342d7235b3a68051.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"9970\",\"static/chunks/9970-31fea4ade6367f07.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"655\",\"static/chunks/655-b5574efc1f81bad2.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"3449\",\"static/chunks/3449-942ed8b66729962b.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"7553\",\"static/chunks/7553-2bb9c132a5788553.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"1127\",\"static/chunks/1127-b475c4cc62d0a830.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"736\",\"static/chunks/736-90a1c8956f4d3102.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"2933\",\"static/chunks/app/%5Borg%5D/%5Brepo%5D/layout-99964eedd99460bc.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\"],\"HeaderWrapperWithSuspense\"]\n13:I[93403,[\"9453\",\"static/chunks/b1298b8d-549c141f97a3b262.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"8970\",\"static/chunks/378e5a93-3b0f971d3611a8a5.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"1585\",\"static/chunks/f7f68e2d-40290491c524df5c.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"4420\",\"static/chunks/4420-863691215dce8f1b.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"6417\",\"static/chunks/6417-34cc3208366c5e5f.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"4348\",\"static/chunks/4348-824485747071bae4.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"2249\",\"static/chunks/2249-342d7235b3a68051.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"9970\",\"static/chunks/9970-31fea4ade6367f07.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"655\",\"static/chunks/655-b5574efc1f81bad2.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5C"])</script><script>self.__next_f.push([1,"N5Qm\",\"3449\",\"static/chunks/3449-942ed8b66729962b.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"7553\",\"static/chunks/7553-2bb9c132a5788553.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"1127\",\"static/chunks/1127-b475c4cc62d0a830.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"736\",\"static/chunks/736-90a1c8956f4d3102.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\",\"2933\",\"static/chunks/app/%5Borg%5D/%5Brepo%5D/layout-99964eedd99460bc.js?dpl=dpl_BgMuZW8Unt9smKhS9rq8Zy5CN5Qm\"],\"WikiContextProvider\"]\n14:T229f,"])</script><script>self.__next_f.push([1,"# Overview\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [CHANGELOG.md](CHANGELOG.md)\n- [LICENSE](LICENSE)\n- [README.md](README.md)\n\n\u003c/details\u003e\n\n\n\n## Purpose and Scope\n\nThis document provides a comprehensive overview of the Heroku Telegram userbot framework, a Python-based platform for creating and managing Telegram userbots with advanced automation capabilities. The framework provides a multi-modal interface system, extensive module management, security features, and deployment automation across various platforms.\n\nFor installation procedures, see [Installation Guide](#1.1). For detailed architecture documentation, see [Core Architecture](#1.2). For developer guidance on extending the framework, see [Extending Heroku](#7).\n\n## System Architecture Overview\n\nThe Heroku framework is built around a modular architecture that supports multiple user interaction methods and deployment targets while maintaining backward compatibility with existing userbot frameworks.\n\n```mermaid\ngraph TB\n    subgraph \"User_Interfaces\"\n        web_ui[\"Web Interface\u003cbr/\u003eroot.jinja2\"]\n        tg_client[\"Telegram Client\"]\n        console_ui[\"Console Interface\"]\n    end\n    \n    subgraph \"Core_Framework\"\n        main_entry[\"hikka/__main__.py\u003cbr/\u003eApplication Entry\"]\n        dispatcher[\"hikka/dispatcher.py\u003cbr/\u003eMessage Dispatcher\"]\n        configurator[\"hikka/configurator.py\u003cbr/\u003eSystem Configuration\"]\n        modules_loader[\"Module System\u003cbr/\u003eDynamic Loading\"]\n    end\n    \n    subgraph \"Platform_Integration\"\n        telegram_api[\"Telegram API\u003cbr/\u003eTelethon/Aiogram\"]\n        heroku_platform[\"heroku.py\u003cbr/\u003ePlatform Integration\"]\n        database_layer[\"Database Layer\u003cbr/\u003ePostgreSQL/Redis/SQLite\"]\n    end\n    \n    subgraph \"Infrastructure\"\n        docker_container[\"Docker Container\u003cbr/\u003eDockerfile\"]\n        deployment_scripts[\"Deployment Scripts\u003cbr/\u003edocker.sh, termux.sh\"]\n        cloud_platforms[\"Cloud Platforms\u003cbr/\u003eHeroku, Okteto, VPS\"]\n    end\n    \n    web_ui --\u003e main_entry\n    tg_client --\u003e dispatcher\n    console_ui --\u003e configurator\n    \n    main_entry --\u003e dispatcher\n    dispatcher --\u003e modules_loader\n    configurator --\u003e main_entry\n    \n    dispatcher --\u003e telegram_api\n    modules_loader --\u003e database_layer\n    main_entry --\u003e heroku_platform\n    \n    deployment_scripts --\u003e docker_container\n    docker_container --\u003e cloud_platforms\n    heroku_platform --\u003e cloud_platforms\n```\n\n**Sources:** [README.md:14-23](), [CHANGELOG.md:32-36]()\n\n## Core Components and Code Entities\n\nThe framework's core functionality is implemented through several key components that handle different aspects of userbot operation.\n\n```mermaid\ngraph TB\n    subgraph \"Entry_Point\"\n        main_module[\"hikka.__main__\u003cbr/\u003eMain Entry Point\"]\n    end\n    \n    subgraph \"Message_Processing\"\n        dispatcher_py[\"hikka.dispatcher.Dispatcher\u003cbr/\u003eMessage Router\"]\n        command_registry[\"Command Registry\u003cbr/\u003eDynamic Command Mapping\"]\n        watcher_system[\"Event Watchers\u003cbr/\u003eMessage Monitoring\"]\n    end\n    \n    subgraph \"Module_Management\"\n        modules_class[\"hikka.modules.Modules\u003cbr/\u003eModule Container\"]\n        loader_system[\"hikka.loader\u003cbr/\u003eModule Loader\"]\n        config_system[\"hikka.configurator\u003cbr/\u003eConfiguration Manager\"]\n    end\n    \n    subgraph \"Data_Persistence\"\n        database_py[\"hikka.database.Database\u003cbr/\u003eData Layer\"]\n        entity_cache[\"Native Entity Caching\u003cbr/\u003ePerformance Optimization\"]\n    end\n    \n    subgraph \"Security_Layer\"\n        security_py[\"hikka.security\u003cbr/\u003ePermission System\"]\n        api_limiter[\"APILimiter\u003cbr/\u003eFlood Protection\"]\n        scam_protection[\"Scam Module Protection\u003cbr/\u003eSecurity Validation\"]\n    end\n    \n    main_module --\u003e dispatcher_py\n    main_module --\u003e config_system\n    \n    dispatcher_py --\u003e command_registry\n    dispatcher_py --\u003e watcher_system\n    \n    command_registry --\u003e modules_class\n    watcher_system --\u003e modules_class\n    \n    modules_class --\u003e loader_system\n    modules_class --\u003e database_py\n    \n    loader_system --\u003e security_py\n    security_py --\u003e api_limiter\n    security_py --\u003e scam_protection\n    \n    database_py --\u003e entity_cache\n```\n\n**Sources:** [CHANGELOG.md:32-36](), [README.md:41-48]()\n\n## Key Features and Capabilities\n\n### Module System\nThe framework provides a sophisticated module loading system with backward compatibility support for FTG, GeekTG, and Hikka modules. The system includes:\n\n| Feature | Implementation | Description |\n|---------|---------------|-------------|\n| Dynamic Loading | `hikka.loader` | Runtime module installation and unloading |\n| Compatibility Layer | Legacy module support | FTG, GeekTG, Hikka module compatibility |\n| Security Validation | Module scanning | Scam module protection and validation |\n| Configuration | `loader.ConfigValue` | Module-specific configuration system |\n\n### Interactive Features\nThe framework includes advanced UI components for enhanced user interaction:\n\n- **Inline Forms**: Button-based interactions through `hikka.inline.forms`\n- **Galleries**: Scrollable image collections via `hikka.inline.gallery`\n- **Lists**: Structured data display using `hikka.inline.list`\n- **Inline Bot**: Shared userbot functionality through inline queries\n\n### Security Implementation\nComprehensive security measures protect against common userbot vulnerabilities:\n\n- **API Flood Protection**: `APILimiter` prevents rate limiting\n- **Targeted Security Rules**: Granular permission control\n- **Entity Caching**: Native caching system for performance and security\n- **Scam Module Protection**: Automated module validation\n\n**Sources:** [README.md:41-48](), [CHANGELOG.md:106-107](), [CHANGELOG.md:156-157]()\n\n## Deployment Architecture\n\nThe framework supports multiple deployment strategies across different platforms and environments.\n\n```mermaid\ngraph TB\n    subgraph \"Source_Control\"\n        github_repo[\"GitHub Repository\u003cbr/\u003ecoddrago/Heroku\"]\n        requirements_txt[\"requirements.txt\u003cbr/\u003ePython Dependencies\"]\n        dockerfile[\"Dockerfile\u003cbr/\u003eContainer Definition\"]\n    end\n    \n    subgraph \"Build_Process\"\n        docker_build[\"Docker Build Process\u003cbr/\u003ePython 3.10 Base\"]\n        dependency_install[\"Dependency Installation\u003cbr/\u003epip/poetry\"]\n    end\n    \n    subgraph \"Deployment_Targets\"\n        heroku_cloud[\"Heroku Platform\u003cbr/\u003eWeb Dynos\"]\n        okteto_k8s[\"Okteto Cloud\u003cbr/\u003eKubernetes\"]\n        docker_local[\"Local Docker\u003cbr/\u003edocker.sh\"]\n        vps_manual[\"VPS Manual Install\u003cbr/\u003eDirect Python\"]\n        termux_mobile[\"Termux Android\u003cbr/\u003etermux.sh\"]\n    end\n    \n    subgraph \"Runtime_Services\"\n        web_interface[\"Web Interface\u003cbr/\u003ePort 8080\"]\n        telegram_client[\"Telegram Client\u003cbr/\u003eheroku-tl\"]\n        database_service[\"Database Service\u003cbr/\u003ePostgreSQL/Redis/SQLite\"]\n    end\n    \n    github_repo --\u003e docker_build\n    requirements_txt --\u003e dependency_install\n    dockerfile --\u003e docker_build\n    \n    docker_build --\u003e heroku_cloud\n    docker_build --\u003e okteto_k8s\n    docker_build --\u003e docker_local\n    dependency_install --\u003e vps_manual\n    docker_build --\u003e termux_mobile\n    \n    heroku_cloud --\u003e web_interface\n    okteto_k8s --\u003e web_interface\n    docker_local --\u003e web_interface\n    vps_manual --\u003e telegram_client\n    termux_mobile --\u003e telegram_client\n    \n    web_interface --\u003e database_service\n    telegram_client --\u003e database_service\n```\n\n**Sources:** [README.md:21-23](), [CHANGELOG.md:13-14]()\n\n## Platform Integration\n\n### Telegram API Integration\nThe framework utilizes custom Telegram library implementations:\n\n- **heroku-tl**: Custom Telethon fork with enhanced features\n- **Aiogram Integration**: Modern async Telegram bot API support\n- **Multi-session Support**: Multiple account management capability\n\n### Database Support\nFlexible database backend support includes:\n\n- **PostgreSQL**: Primary database for cloud deployments\n- **Redis**: Caching and session storage\n- **SQLite**: Local development and lightweight deployments\n\n### Web Interface\nThe web setup interface (`root.jinja2`) provides:\n\n- QR code authentication\n- Phone number login\n- Two-factor authentication support\n- Module management interface\n- Configuration management\n\n**Sources:** [CHANGELOG.md:32-33](), [CHANGELOG.md:143-144](), [README.md:52-54]()\n\n## Version and Licensing\n\nThe framework is actively maintained with regular updates and operates under the GNU Affero General Public License v3. The current major version is 1.7.x with continuous improvements including security enhancements, bug fixes, and new feature additions.\n\n**Key Version Milestones:**\n- **1.7.1**: Web interface improvements, bug fixes, security updates\n- **1.7.0**: Banner updates, Telethon migration to heroku-tl, Hikka backup conversion\n- **1.6.8**: Official rename to Heroku, emoji configuration, executor replacement\n\n**Sources:** [CHANGELOG.md:1-18](), [LICENSE:1-4](), [README.md:124-131]()"])</script><script>self.__next_f.push([1,"15:T27e7,"])</script><script>self.__next_f.push([1,"# Installation Guide\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [Dockerfile](Dockerfile)\n- [LICENSE](LICENSE)\n- [README.md](README.md)\n- [banner.sh](banner.sh)\n- [docker-compose.yml](docker-compose.yml)\n- [docker.sh](docker.sh)\n- [poetry.lock](poetry.lock)\n- [pyproject.toml](pyproject.toml)\n\n\u003c/details\u003e\n\n\n\nThis document provides comprehensive instructions for installing and deploying the Heroku Telegram userbot system. It covers manual installation, containerized deployment, and various hosting options including local development, VPS deployment, and cloud platforms.\n\nFor information about the system architecture and core components, see [Core Architecture](#1.2). For getting started with configuration after installation, see [Getting Started](#1.3).\n\n## System Requirements\n\nThe Heroku system requires specific software dependencies and external services to function properly.\n\n### Software Requirements\n\n| Component | Version | Purpose |\n|-----------|---------|----------|\n| Python | 3.9-3.13 | Primary runtime environment |\n| Git | Latest | Source code management and updates |\n| FFmpeg | Latest | Media processing capabilities |\n| Node.js | 18.x | Web interface dependencies |\n\n### External Dependencies\n\n- **Telegram API Credentials**: API_ID and API_HASH from [my.telegram.org/apps](https://my.telegram.org/apps)\n- **Network Access**: Internet connectivity for Telegram API communication\n- **Port Availability**: Port 8080 for web interface (configurable)\n\nSources: [README.md:50-54](), [Dockerfile:18-40]()\n\n## Installation Methods Overview\n\nThe system supports multiple installation approaches depending on your deployment requirements and technical preferences.\n\n```mermaid\ngraph TD\n    START[\"Installation Decision\"]\n    \n    MANUAL[\"Manual Installation\"]\n    DOCKER[\"Docker Installation\"]\n    CLOUD[\"Cloud Platform\"]\n    \n    MANUAL_LOCAL[\"Local Development\"]\n    MANUAL_VPS[\"VPS/VDS Server\"]\n    \n    DOCKER_LOCAL[\"Local Container\"]\n    DOCKER_COMPOSE[\"Docker Compose\"]\n    \n    HEROKU_CLOUD[\"Heroku Platform\"]\n    OKTETO_CLOUD[\"Okteto Cloud\"]\n    VPS_CLOUD[\"VPS with Docker\"]\n    \n    START --\u003e MANUAL\n    START --\u003e DOCKER\n    START --\u003e CLOUD\n    \n    MANUAL --\u003e MANUAL_LOCAL\n    MANUAL --\u003e MANUAL_VPS\n    \n    DOCKER --\u003e DOCKER_LOCAL\n    DOCKER --\u003e DOCKER_COMPOSE\n    \n    CLOUD --\u003e HEROKU_CLOUD\n    CLOUD --\u003e OKTETO_CLOUD\n    CLOUD --\u003e VPS_CLOUD\n    \n    MANUAL_LOCAL --\u003e WEB_SETUP[\"Web Interface Setup\"]\n    MANUAL_VPS --\u003e TUNNEL_SETUP[\"SSH Tunnel Setup\"]\n    DOCKER_LOCAL --\u003e WEB_SETUP\n    DOCKER_COMPOSE --\u003e WEB_SETUP\n    HEROKU_CLOUD --\u003e WEB_SETUP\n    OKTETO_CLOUD --\u003e WEB_SETUP\n    VPS_CLOUD --\u003e WEB_SETUP\n```\n\nSources: [README.md:14-24](), [Dockerfile:1-56](), [docker-compose.yml:1-13]()\n\n## Manual Installation\n\nManual installation provides direct control over the Python environment and dependencies, suitable for development and custom deployments.\n\n### Basic Manual Installation\n\nThe complete manual installation process involves system preparation, repository cloning, dependency installation, and service startup.\n\n```bash\n# System update and basic tools\napt update \u0026\u0026 apt install git python3 -y\n\n# Clone repository\ngit clone https://github.com/coddrago/Heroku\n\n# Navigate to project directory\ncd Heroku\n\n# Install Python dependencies\npip install -r requirements.txt\n\n# Start the userbot\npython3 -m hikka\n```\n\n### Installation Command Options\n\n| Option | Purpose | Use Case |\n|--------|---------|----------|\n| `--proxy-pass` | Opens SSH tunnel for web interface | VPS/VDS deployments without direct web access |\n| `--no-web` | Console-only setup | Headless servers or automated deployments |\n| `--root` | Root user mode | Docker containers and system services |\n\n### VPS/VDS Specific Setup\n\nFor server deployments, additional network configuration may be required:\n\n```bash\n# VPS installation with SSH tunnel\npython3 -m hikka --proxy-pass\n```\n\nThis creates an SSH tunnel allowing secure access to the web interface on port 8080.\n\nSources: [README.md:21-23]()\n\n## Docker Installation\n\nDocker deployment provides consistent environments and simplified management across different hosting platforms.\n\n### Docker Installation Flow\n\n```mermaid\ngraph TB\n    subgraph \"Build Process\"\n        BASE[\"python:3.10 base image\"]\n        DEPS[\"System Dependencies Installation\"]\n        CLONE[\"Repository Clone\"]\n        PIP[\"Python Requirements\"]\n        BUILD_COMPLETE[\"Container Ready\"]\n    end\n    \n    subgraph \"Runtime Configuration\"\n        PORT[\"Port 8080 Exposed\"]\n        VOLUME[\"Data Volume Mount\"]\n        ENV[\"Environment Variables\"]\n        CMD[\"python -m heroku --root\"]\n    end\n    \n    subgraph \"Container Components\"\n        FFMPEG[\"ffmpeg media processing\"]\n        NODEJS[\"Node.js 18.x runtime\"]\n        CAIRO[\"libcairo2 graphics\"]\n        WKHTMLTOPDF[\"PDF generation\"]\n        OPENSSH[\"SSH server\"]\n    end\n    \n    BASE --\u003e DEPS\n    DEPS --\u003e CLONE\n    CLONE --\u003e PIP\n    PIP --\u003e BUILD_COMPLETE\n    \n    BUILD_COMPLETE --\u003e PORT\n    BUILD_COMPLETE --\u003e VOLUME\n    BUILD_COMPLETE --\u003e ENV\n    BUILD_COMPLETE --\u003e CMD\n    \n    DEPS --\u003e FFMPEG\n    DEPS --\u003e NODEJS\n    DEPS --\u003e CAIRO\n    DEPS --\u003e WKHTMLTOPDF\n    DEPS --\u003e OPENSSH\n```\n\n### Single Container Deployment\n\nBuild and run the container directly:\n\n```bash\n# Build the container\ndocker build -t heroku-userbot .\n\n# Run with port mapping\ndocker run -p 8080:8080 -v heroku-data:/data heroku-userbot\n```\n\n### Docker Compose Deployment\n\nFor production deployments with better orchestration:\n\n```bash\n# Start services\ndocker-compose up -d\n\n# View logs\ndocker-compose logs -f\n\n# Stop services\ndocker-compose down\n```\n\nThe compose configuration includes:\n- Automatic restart policies\n- Volume persistence\n- Configurable external port via `EXTERNAL_PORT` environment variable\n- Proper signal handling for graceful shutdown\n\nSources: [Dockerfile:1-56](), [docker-compose.yml:1-13]()\n\n## Network Access Configuration\n\nDifferent deployment scenarios require specific network access patterns for the web-based setup interface.\n\n### Network Access Patterns\n\n```mermaid\ngraph LR\n    subgraph \"Local Access\"\n        LOCAL_USER[\"Local User\"]\n        LOCAL_BROWSER[\"Browser :8080\"]\n        LOCAL_HIKKA[\"hikka process\"]\n    end\n    \n    subgraph \"VPS Access\"\n        VPS_USER[\"Remote User\"]\n        SSH_TUNNEL[\"SSH Tunnel\"]\n        VPS_HIKKA[\"hikka --proxy-pass\"]\n    end\n    \n    subgraph \"Cloud Access\"\n        CLOUD_USER[\"Internet User\"]\n        CF_TUNNEL[\"Cloudflare Tunnel\"]\n        CLOUD_HIKKA[\"hikka process\"]\n    end\n    \n    LOCAL_USER --\u003e LOCAL_BROWSER\n    LOCAL_BROWSER --\u003e LOCAL_HIKKA\n    \n    VPS_USER --\u003e SSH_TUNNEL\n    SSH_TUNNEL --\u003e VPS_HIKKA\n    \n    CLOUD_USER --\u003e CF_TUNNEL\n    CF_TUNNEL --\u003e CLOUD_HIKKA\n```\n\n### Access Method Configuration\n\n| Environment | Command | Access Method |\n|-------------|---------|---------------|\n| Local Development | `python3 -m hikka` | Direct localhost:8080 |\n| VPS/VDS | `python3 -m hikka --proxy-pass` | SSH tunnel forwarding |\n| Cloud Container | `python3 -m hikka --root` | Platform-provided routing |\n| Headless Server | `python3 -m hikka --no-web` | Console-only configuration |\n\nSources: [README.md:23](), [Dockerfile:55]()\n\n## Cloud Platform Deployment\n\nThe system supports deployment on various cloud platforms with platform-specific configurations and optimizations.\n\n### Platform Support Matrix\n\n| Platform | Container Support | Auto-scaling | Persistent Storage | Network Access |\n|----------|------------------|--------------|-------------------|----------------|\n| Heroku | ✅ | ✅ | External DB | Platform routing |\n| Okteto | ✅ | ✅ | Persistent volumes | Ingress routing |\n| Generic VPS | ✅ | Manual | Local/NFS | Direct/Tunnel |\n\n### Heroku Platform Deployment\n\nHeroku deployment uses the containerized approach with platform-specific configurations:\n\n1. Container automatically built from `Dockerfile`\n2. Port binding handled by Heroku runtime\n3. Process type defined by `CMD` instruction\n4. Environment variables managed through Heroku config\n\n### Okteto Cloud Deployment\n\nOkteto provides Kubernetes-based container orchestration:\n\n1. Automatic container building and deployment\n2. Development environment synchronization\n3. Persistent volume management\n4. Ingress configuration for web access\n\nSources: [Dockerfile:54-55]()\n\n## Post-Installation Setup\n\nAfter successful installation, the system requires initial configuration through the web interface or console setup.\n\n### Web Interface Access\n\n1. Navigate to `http://localhost:8080` (or configured address)\n2. Complete Telegram API credential configuration\n3. Authenticate with Telegram account\n4. Configure security settings and module preferences\n\n### Console Setup (--no-web)\n\nFor headless deployments:\n\n1. Provide API credentials via console prompts\n2. Complete phone number verification\n3. Enter verification code from Telegram\n4. Configure basic settings through command-line interface\n\nSources: [README.md:23]()\n\n## Troubleshooting Common Installation Issues\n\n### Dependency Installation Failures\n\n**Python Version Compatibility**: Ensure Python version is between 3.8-3.11. The system may not work with Python 3.12+ due to dependency constraints.\n\n**System Package Dependencies**: Install required system packages:\n```bash\n# Ubuntu/Debian\napt-get install build-essential python3-dev libcairo2-dev\n\n# CentOS/RHEL\nyum install gcc python3-devel cairo-devel\n```\n\n### Network Access Issues\n\n**Port 8080 Already in Use**: Change the external port mapping:\n```bash\n# Docker\ndocker run -p 8081:8080 heroku-userbot\n\n# Docker Compose\nEXTERNAL_PORT=8081 docker-compose up\n```\n\n**SSH Tunnel Setup**: For VPS deployments with restricted access:\n```bash\n# Local machine\nssh -L 8080:localhost:8080 user@your-vps\n\n# Then access http://localhost:8080 locally\n```\n\n### Container-Specific Issues\n\n**Volume Permissions**: Ensure proper permissions for data persistence:\n```bash\n# Create volume with proper permissions\ndocker volume create heroku-data\n```\n\n**Memory Constraints**: For resource-limited environments, monitor container memory usage and adjust limits as needed.\n\nSources: [Dockerfile:18-36](), [docker-compose.yml:6-10]()"])</script><script>self.__next_f.push([1,"16:T50ad,"])</script><script>self.__next_f.push([1,"# Core Architecture\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [CHANGELOG.md](CHANGELOG.md)\n- [requirements.txt](requirements.txt)\n\n\u003c/details\u003e\n\n\n\nThis document provides a technical overview of the Heroku Telegram Userbot's core architecture, including key components, their interactions, and the execution flow. The framework follows a modular design that enables extensibility while maintaining security and performance. For more detailed information about specific subsystems, refer to the dedicated pages: [Module System](2.2), [Command Dispatcher](2.3), [Database System](2.4), and [Web Interface](2.5).\n\n## Architectural Overview\n\nThe Heroku Userbot follows a modular architecture designed to facilitate extensibility and maintainability. The system consists of several key components that work together to provide Telegram automation capabilities.\n\n### Overall System Architecture\n\n### Core System Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Core Heroku System\"\n        MAIN[\"heroku/__main__.py\u003cbr/\u003eEntry Point\"]\n        DISP[\"heroku/dispatcher.py\u003cbr/\u003eCore Dispatcher\"]\n        CONF[\"heroku/configurator.py\u003cbr/\u003eConfiguration Manager\"]\n    end\n    \n    subgraph \"Web Interface Layer\"\n        ROOT[\"root.jinja2\u003cbr/\u003eSetup UI\"]\n        ROOTJS[\"root.js\u003cbr/\u003eClient Logic\"]\n        WEB_CLASS[\"Web class\u003cbr/\u003eheroku/web/\"]\n    end\n    \n    subgraph \"Module System\"\n        MODULES_CLASS[\"Modules class\u003cbr/\u003eheroku/loader.py\"]\n        CORE_MODS[\"Core Modules\"]\n        USER_MODS[\"User Modules\"]\n        LIBS[\"Libraries\"]\n    end\n    \n    subgraph \"Security \u0026 Management\"\n        HEROKU_SECURITY[\"HerokuSecurity\u003cbr/\u003eSecurity Manager\"]\n        VALIDATORS[\"loader.validators\u003cbr/\u003eConfig Validation\"]\n        API_LIMITER[\"APILimiter\u003cbr/\u003eheroku/dispatcher.py\"]\n    end\n    \n    subgraph \"Data Layer\"\n        DATABASE_CLASS[\"Database class\u003cbr/\u003eheroku/database.py\"]\n        REDIS[\"Redis Backend\"]\n        POSTGRES[\"PostgreSQL Backend\"]\n        JSON_BACKEND[\"JSON File Backend\"]\n    end\n    \n    subgraph \"Telegram Integration\"\n        HEROKU_TL[\"heroku-tl-new\u003cbr/\u003eTelegram Client Fork\"]\n        AIOGRAM[\"aiogram\u003cbr/\u003eBot API\"]\n        INLINE_MANAGER[\"InlineManager\u003cbr/\u003eheroku/inline/\"]\n    end\n    \n    %% Core system connections\n    MAIN --\u003e DISP\n    DISP --\u003e CONF\n    DISP --\u003e MODULES_CLASS\n    DISP --\u003e HEROKU_SECURITY\n    \n    %% Web interface connections\n    ROOT --\u003e ROOTJS\n    WEB_CLASS --\u003e ROOT\n    WEB_CLASS --\u003e DISP\n    \n    %% Module system connections\n    MODULES_CLASS --\u003e CORE_MODS\n    MODULES_CLASS --\u003e USER_MODS\n    MODULES_CLASS --\u003e LIBS\n    HEROKU_SECURITY --\u003e VALIDATORS\n    HEROKU_SECURITY --\u003e API_LIMITER\n    \n    %% Data connections\n    DISP --\u003e DATABASE_CLASS\n    DATABASE_CLASS --\u003e REDIS\n    DATABASE_CLASS --\u003e POSTGRES\n    DATABASE_CLASS --\u003e JSON_BACKEND\n    \n    %% Telegram integration connections\n    DISP --\u003e HEROKU_TL\n    DISP --\u003e AIOGRAM\n    DISP --\u003e INLINE_MANAGER\n```\n\nSources: `heroku/__main__.py`, `heroku/dispatcher.py`, `heroku/configurator.py`, `heroku/loader.py`, `heroku/database.py`, `heroku/web/root.py`\n\n### Key Components\n\nThe Heroku system is built around these core components:\n\n| Component | Class/Module | Responsibility |\n|-----------|--------------|----------------|\n| **Entry Point** | `heroku/__main__.py` | Application startup and initialization |\n| **Core Dispatcher** | `heroku/dispatcher.py` | Message processing and command routing |\n| **Configuration Manager** | `heroku/configurator.py` | System configuration and setup |\n| **Module Loader** | `Modules` class in `heroku/loader.py` | Module loading and management |\n| **Security Manager** | `HerokuSecurity` class | Access control and validation |\n| **Database** | `Database` class in `heroku/database.py` | Persistent storage with multiple backends |\n| **Web Interface** | `Web` class in `heroku/web/` | Browser-based setup and management |\n| **Inline System** | `InlineManager` in `heroku/inline/` | Telegram inline functionality |\n| **Telegram Client** | `heroku-tl-new` | Custom Telethon fork for API communication |\n\nSources: `heroku/__main__.py`, `heroku/dispatcher.py`, `heroku/configurator.py`, `heroku/loader.py`, `heroku/database.py`\n\n### Component Interactions\n\n```mermaid\ngraph LR\n    subgraph \"User Interaction Points\"\n        U1[\"Telegram User\"]\n        U2[\"Web Browser User\"]\n        U3[\"CLI User\"]\n    end\n    \n    subgraph \"Interface Layer\"\n        TG_BOT[\"Telegram Bot Interface\"]\n        WEB_UI[\"Web Setup Interface\"]\n        CLI[\"Command Line Interface\"]\n    end\n    \n    subgraph \"Processing Layer\"\n        CMD_PROC[\"Command Processor\"]\n        INLINE_PROC[\"Inline Processor\"]\n        WEB_PROC[\"Web Request Processor\"]\n        AUTH_PROC[\"Authentication Processor\"]\n    end\n    \n    subgraph \"Core Services\"\n        DISPATCHER[\"Core Dispatcher\"]\n        MODULE_MGR[\"Module Manager\"]\n        CONFIG_MGR[\"Configuration Manager\"]\n        SECURITY[\"Security Manager\"]\n    end\n    \n    %% User to interface connections\n    U1 --\u003e TG_BOT\n    U2 --\u003e WEB_UI\n    U3 --\u003e CLI\n    \n    %% Interface to processing connections\n    TG_BOT --\u003e CMD_PROC\n    TG_BOT --\u003e INLINE_PROC\n    WEB_UI --\u003e WEB_PROC\n    WEB_UI --\u003e AUTH_PROC\n    CLI --\u003e CMD_PROC\n    \n    %% Processing to core connections\n    CMD_PROC --\u003e DISPATCHER\n    INLINE_PROC --\u003e DISPATCHER\n    WEB_PROC --\u003e CONFIG_MGR\n    AUTH_PROC --\u003e SECURITY\n    \n    %% Core service connections\n    DISPATCHER --\u003e MODULE_MGR\n    DISPATCHER --\u003e SECURITY\n    CONFIG_MGR --\u003e SECURITY\n```\n\nSources: `heroku/dispatcher.py`, `heroku/configurator.py`, `heroku/web/root.py`\n\n## Initialization Process\n\nThe system initialization follows a carefully orchestrated sequence to ensure all components are properly configured and connected.\n\n### System Startup Sequence\n\n```mermaid\nsequenceDiagram\n    participant Main as \"__main__.py\"\n    participant Entry as \"Entry Point\"\n    participant Config as \"Configurator\"\n    participant DB as \"Database\"\n    participant Web as \"Web Interface\"\n    participant Client as \"TelegramClient\"\n    participant Modules as \"Module System\"\n    participant Dispatcher as \"Dispatcher\"\n    \n    Main-\u003e\u003eEntry: Start application\n    Entry-\u003e\u003eConfig: Parse arguments\n    Entry-\u003e\u003eConfig: Load configuration\n    \n    alt First time setup\n        Config-\u003e\u003eWeb: Initialize setup interface\n        Web-\u003e\u003eConfig: Collect API credentials\n        Config-\u003e\u003eConfig: Save configuration\n    end\n    \n    Entry-\u003e\u003eDB: Initialize database\n    Entry-\u003e\u003eClient: Initialize Telegram clients\n    Client-\u003e\u003eClient: Authenticate with Telegram\n    Entry-\u003e\u003eModules: Load core modules\n    Entry-\u003e\u003eModules: Load user modules\n    Modules-\u003e\u003eDispatcher: Register handlers\n    Entry-\u003e\u003eDispatcher: Start event processing\n    \n    Note over Entry,Dispatcher: System ready for operation\n```\n\nSources: `heroku/__main__.py`, `heroku/configurator.py`, `heroku/database.py`, `heroku/web/root.py`\n\n### Initialization Phases\n\nThe startup process consists of several distinct phases:\n\n| Phase | Components | Description |\n|-------|------------|-------------|\n| **Bootstrap** | Entry point, argument parsing | Initial system setup and configuration loading |\n| **Configuration** | `Configurator`, web interface | API credentials setup and system configuration |\n| **Database** | `Database` class, storage backends | Persistent storage initialization |\n| **Authentication** | Telegram clients, session management | User authentication with Telegram |\n| **Module Loading** | `Modules` class, core/user modules | Dynamic loading of system functionality |\n| **Handler Registration** | `Dispatcher`, security manager | Event processing setup |\n| **Runtime** | Event loop, message processing | Active system operation |\n\nSources: `heroku/__main__.py`, `heroku/configurator.py`, `heroku/loader.py`, `heroku/dispatcher.py`\n\nThe initialization process follows these steps:\n\n1. **Arguments Parsing**: Command-line arguments are parsed to configure the system [heroku/__main__.py:269-351]().\n2. **Session Reading**: Existing session files are read to restore previous sessions [heroku/__main__.py:434-448]().\n3. **API Token Retrieval**: The Telegram API token is retrieved from configuration or environment [heroku/__main__.py:450-485]().\n4. **Web Interface Initialization**: If enabled, the web interface is initialized [heroku/__main__.py:487-496]().\n5. **Client Initialization**: Telegram clients are initialized and connected using `heroku-tl-new` [heroku/__main__.py:732-786]().\n6. **Database Initialization**: The database is initialized with support for PostgreSQL, Redis, or JSON backends [heroku/__main__.py:897-904]().\n7. **Module Registration**: All modules are registered with the system [heroku/__main__.py:925]().\n8. **Event Loop**: The event loop is started to process events [heroku/__main__.py:932-966]().\n\n## Module System\n\nThe module system is responsible for loading, registering, and managing modules, which provide the userbot's functionality.\n\n### Module System Diagram\n\n```mermaid\ngraph TD\n    A[\"Modules Class\"] --\u003e B[\"register_all()\"]\n    A --\u003e C[\"register_module()\"]\n    A --\u003e D[\"dispatch()\"]\n    \n    B --\u003e E[\"_register_modules()\"]\n    E --\u003e C\n    \n    C --\u003e F[\"complete_registration()\"]\n    F --\u003e G[\"register_commands()\"]\n    F --\u003e H[\"register_watchers()\"]\n    F --\u003e I[\"register_inline_stuff()\"]\n    \n    J[\"Module Instance\"] --\u003e K[\"hikka_commands\"]\n    J --\u003e L[\"hikka_watchers\"]\n    J --\u003e M[\"hikka_inline_handlers\"]\n    J --\u003e N[\"hikka_callback_handlers\"]\n    \n    G --\u003e K\n    H --\u003e L\n    I --\u003e M\n    I --\u003e N\n```\n\nSources: `heroku/loader.py:483-924`\n\nModules can define various types of handlers:\n\n- **Commands**: Executed when a user sends a message with a specific command prefix.\n- **Watchers**: Executed for every incoming message regardless of content.\n- **Inline Handlers**: Process inline queries made to the userbot's bot.\n- **Callback Handlers**: Handle interactions with inline buttons.\n- **Raw Handlers**: Process raw Telegram events.\n\n## Command Dispatcher\n\nThe command dispatcher processes incoming events and routes them to appropriate handlers.\n\n### Command Dispatching Flow Diagram\n\n```mermaid\nflowchart TD\n    A[\"Telegram Event\"] --\u003e B[\"CommandDispatcher\"]\n    \n    B --\u003e C{\"Event Type\"}\n    \n    C -- \"Command\" --\u003e D[\"_handle_command()\"]\n    D --\u003e E[\"Find Module and Handler\"]\n    E --\u003e F[\"Check Security\"]\n    F -- \"Allowed\" --\u003e G[\"Execute Command\"]\n    F -- \"Denied\" --\u003e H[\"Reject\"]\n    \n    C -- \"Message\" --\u003e I[\"handle_incoming()\"]\n    I --\u003e J[\"Execute Watchers\"]\n    \n    C -- \"Raw Event\" --\u003e K[\"handle_raw()\"]\n    K --\u003e L[\"Execute Raw Handler\"]\n```\n\nSources: `heroku/dispatcher.py:104-726`\n\nThe command dispatcher operates as follows:\n\n1. **Event Reception**: Events are received from the Telegram client using `heroku-tl-new` [heroku/dispatcher.py:436-454](), [heroku/dispatcher.py:623-699]().\n2. **Command Handling**: If a message starts with the command prefix, it's processed as a command [heroku/dispatcher.py:272-425]().\n3. **Security Checking**: The `HerokuSecurity` system checks if the user is allowed to execute the command [heroku/dispatcher.py:383-390]().\n4. **Command Execution**: If allowed, the command is executed [heroku/dispatcher.py:447-453]().\n5. **Watcher Execution**: All relevant registered watchers are executed for incoming messages [heroku/dispatcher.py:623-698]().\n6. **Raw Handler Execution**: Raw handlers are executed for raw Telegram events [heroku/dispatcher.py:427-435]().\n\n## Data Persistence Architecture\n\nThe system supports multiple storage backends to accommodate different deployment scenarios and performance requirements.\n\n### Storage Backend Selection\n\n```mermaid\nflowchart TD\n    APP_START[\"Application Start\"] --\u003e DB_INIT[\"Database.init()\"]\n    \n    DB_INIT --\u003e BACKEND_CHECK{\"Check Available Backends\"}\n    \n    BACKEND_CHECK --\u003e POSTGRES_CHECK{\"PostgreSQL Available?\"}\n    POSTGRES_CHECK --\u003e|\"Yes\"| POSTGRES_INIT[\"Initialize PostgreSQL\"]\n    POSTGRES_CHECK --\u003e|\"No\"| REDIS_CHECK{\"Redis Available?\"}\n    \n    REDIS_CHECK --\u003e|\"Yes\"| REDIS_INIT[\"Initialize Redis\"]\n    REDIS_CHECK --\u003e|\"No\"| JSON_INIT[\"Initialize JSON File\"]\n    \n    POSTGRES_INIT --\u003e ASSET_CHANNEL[\"Setup Asset Channel\"]\n    REDIS_INIT --\u003e ASSET_CHANNEL\n    JSON_INIT --\u003e ASSET_CHANNEL\n    \n    ASSET_CHANNEL --\u003e READY[\"Database Ready\"]\n```\n\nSources: `heroku/database.py:55-361`, `heroku/database.py:106-130`\n\n### Data Access Patterns\n\n| Operation | Method | Purpose | Storage Location |\n|-----------|---------|---------|------------------|\n| **Configuration** | `get()`, `set()` | Module settings and user preferences | Primary backend |\n| **Pointers** | `pointer()` | Complex data structures | Primary backend |\n| **Assets** | `store_asset()`, `fetch_asset()` | Files, images, documents | Telegram channels |\n| **Sessions** | Direct file I/O | Authentication sessions | Local filesystem |\n| **Cache** | Memory + Redis | Temporary data and performance optimization | Memory/Redis |\n\nSources: `heroku/database.py:264-300`, `heroku/database.py:302-360`, `heroku/database.py:233-262`\n\nThe database system includes:\n\n1. **Initialization**: Database initialization during startup with backend selection [heroku/database.py:106-130]().\n2. **Storage Options**: Data can be stored in PostgreSQL, Redis (if available), or a local JSON file [heroku/database.py:132-152](), [heroku/database.py:192-231]().\n3. **Data Access**: Simple key-value access methods for modules [heroku/database.py:264-300]().\n4. **Pointers**: Support for more complex data structures through pointers [heroku/database.py:302-360]().\n5. **Asset Storage**: Files and media can be stored in a dedicated Telegram channel [heroku/database.py:233-262]().\n\n## Web Interface\n\nThe web interface allows users to interact with the userbot through a browser.\n\n### Web Interface Diagram\n\n```mermaid\ngraph TD\n    A[\"Web Class\"] --\u003e B[\"root()\"]\n    A --\u003e C[\"set_tg_api()\"]\n    A --\u003e D[\"send_tg_code()\"]\n    A --\u003e E[\"tg_code()\"]\n    A --\u003e F[\"finish_login()\"]\n    A --\u003e G[\"web_auth()\"]\n    A --\u003e H[\"init_qr_login()\"]\n    A --\u003e I[\"get_qr_url()\"]\n    \n    B --\u003e J{\"Credentials Set?\"}\n    J -- \"No\" --\u003e K[\"Show API Form\"]\n    J -- \"Yes\" --\u003e L[\"Show Auth Form\"]\n    \n    C --\u003e M[\"Save API Credentials\"]\n    \n    D --\u003e N[\"Send Auth Code\"]\n    \n    E --\u003e O[\"Verify Auth Code\"]\n    \n    F --\u003e P[\"Complete Login\"]\n    \n    G --\u003e Q[\"Handle Web Auth\"]\n    \n    H --\u003e R[\"Initialize QR Login\"]\n    \n    I --\u003e S[\"Get QR Login URL\"]\n```\n\nSources: `heroku/web/root.py:51-572`\n\nThe web interface provides:\n\n1. **API Setup**: Interface for setting up Telegram API credentials [heroku/web/root.py:187-219]().\n2. **Authentication**: Methods for authenticating with Telegram [heroku/web/root.py:311-451]().\n3. **QR Login**: Support for logging in using a QR code [heroku/web/root.py:221-288]().\n4. **Web Authentication**: Secure access to the web interface [heroku/web/root.py:473-571]().\n\n## Message Processing Flow\n\nThe system processes incoming Telegram events through a sophisticated pipeline that handles commands, watchers, and security checks.\n\n### Event Processing Pipeline\n\n```mermaid\nflowchart TD\n    TG[\"Telegram API\"] --\u003e CLIENT[\"CustomTelegramClient\"]\n    CLIENT --\u003e DISPATCHER[\"hikka/dispatcher.py\"]\n    \n    DISPATCHER --\u003e TYPE_CHECK{\"Event Type Check\"}\n    \n    TYPE_CHECK --\u003e|\"Command Message\"| CMD_HANDLER[\"_handle_command()\"]\n    TYPE_CHECK --\u003e|\"Regular Message\"| MSG_HANDLER[\"handle_incoming()\"]\n    TYPE_CHECK --\u003e|\"Raw Event\"| RAW_HANDLER[\"handle_raw()\"]\n    \n    CMD_HANDLER --\u003e PREFIX_CHECK{\"Prefix Match?\"}\n    PREFIX_CHECK --\u003e|\"Yes\"| PARSE_CMD[\"Parse Command\"]\n    PREFIX_CHECK --\u003e|\"No\"| MSG_HANDLER\n    \n    PARSE_CMD --\u003e FIND_MODULE[\"Find Module \u0026 Handler\"]\n    FIND_MODULE --\u003e SECURITY_CHECK[\"HerokuSecurity.check()\"]\n    \n    SECURITY_CHECK --\u003e|\"Allowed\"| EXEC_CMD[\"Execute Command\"]\n    SECURITY_CHECK --\u003e|\"Denied\"| REJECT[\"Reject Silently\"]\n    \n    MSG_HANDLER --\u003e WATCHER_LOOP[\"Execute All Watchers\"]\n    RAW_HANDLER --\u003e RAW_EXEC[\"Execute Raw Handlers\"]\n    \n    EXEC_CMD --\u003e RESPONSE[\"Generate Response\"]\n    WATCHER_LOOP --\u003e RESPONSE\n    RAW_EXEC --\u003e RESPONSE\n    \n    RESPONSE --\u003e CLIENT\n    CLIENT --\u003e TG\n```\n\nSources: `heroku/dispatcher.py:104-726`, `heroku/dispatcher.py:272-425`, `heroku/dispatcher.py:623-699`\n\n### Security Validation Flow\n\n```mermaid\nflowchart TD\n    SECURITY_REQ[\"Security Check Request\"] --\u003e OWNER_CHECK{\"Is Owner?\"}\n    \n    OWNER_CHECK --\u003e|\"Yes\"| ALLOW[\"Allow Access\"]\n    OWNER_CHECK --\u003e|\"No\"| BLACKLIST_CHECK{\"Is Blacklisted?\"}\n    \n    BLACKLIST_CHECK --\u003e|\"Yes\"| DENY[\"Deny Access\"]\n    BLACKLIST_CHECK --\u003e|\"No\"| TARGETED_RULES[\"Check Targeted Rules\"]\n    \n    TARGETED_RULES --\u003e GROUP_CHECK{\"Security Group Check\"}\n    GROUP_CHECK --\u003e PERM_LEVEL{\"Permission Level\"}\n    \n    PERM_LEVEL --\u003e|\"GROUP_ADMIN\"| ADMIN_CHECK[\"Check Admin Status\"]\n    PERM_LEVEL --\u003e|\"PM\"| PM_CHECK[\"Check Private Message\"]\n    PERM_LEVEL --\u003e|\"EVERYONE\"| ALLOW\n    \n    ADMIN_CHECK --\u003e|\"Has Admin\"| ALLOW\n    ADMIN_CHECK --\u003e|\"No Admin\"| DENY\n    \n    PM_CHECK --\u003e|\"Is PM\"| ALLOW\n    PM_CHECK --\u003e|\"Not PM\"| DENY\n```\n\nSources: `heroku/dispatcher.py:121-124`, security validation logic\n\n## Security and Access Control\n\nThe security system implements a multi-layered approach to command and feature access control with targeted rules and validation.\n\n### Security Component Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Security Layer\"\n        SEC_MGR[\"HerokuSecurity\"]\n        VALIDATORS[\"Config Validators\"]\n        API_LIMITER[\"APILimiter\"]\n        TARGETED_SEC[\"Targeted Security Rules\"]\n    end\n    \n    subgraph \"Validation Types\"\n        BOOLEAN[\"Boolean Validator\"]\n        INTEGER[\"Integer Validator\"] \n        STRING[\"String Validator\"]\n        CHOICE[\"Choice Validator\"]\n        REGEXP[\"RegExp Validator\"]\n        SERIES[\"Series Validator\"]\n    end\n    \n    subgraph \"Access Levels\"\n        OWNER[\"Owner Access\"]\n        SUDO[\"Sudo Users\"]\n        SUPPORT[\"Support Users\"]\n        GROUP_ADMIN[\"Group Admins\"]\n        EVERYONE[\"Everyone\"]\n    end\n    \n    SEC_MGR --\u003e VALIDATORS\n    SEC_MGR --\u003e API_LIMITER\n    SEC_MGR --\u003e TARGETED_SEC\n    \n    VALIDATORS --\u003e BOOLEAN\n    VALIDATORS --\u003e INTEGER\n    VALIDATORS --\u003e STRING\n    VALIDATORS --\u003e CHOICE\n    VALIDATORS --\u003e REGEXP\n    VALIDATORS --\u003e SERIES\n    \n    SEC_MGR --\u003e OWNER\n    SEC_MGR --\u003e SUDO\n    SEC_MGR --\u003e SUPPORT\n    SEC_MGR --\u003e GROUP_ADMIN\n    SEC_MGR --\u003e EVERYONE\n```\n\nSources: Security system components, validator classes, access control mechanisms\n\n### API Rate Limiting\n\nThe `APILimiter` component provides protection against API abuse and controls which Telegram methods can be called by external modules.\n\n| Component | Function | Protection Type |\n|-----------|----------|-----------------|\n| **Call Limiting** | Restrict dangerous TL methods | Prevents unauthorized API calls |\n| **Rate Control** | Throttle request frequency | Prevents flood and spam |\n| **Method Whitelist** | Allow only safe operations | Blocks potentially harmful calls |\n| **Scam Protection** | Validate module sources | Prevents malicious module installation |\n\nSources: API limiting and security validation logic\n\n## Logging System\n\nThe logging system captures and routes log messages, including sending them to Telegram.\n\n### Logging System Diagram\n\n```mermaid\ngraph TD\n    A[\"TelegramLogsHandler\"] --\u003e B[\"emit()\"]\n    A --\u003e C[\"sender()\"]\n    A --\u003e D[\"queue_poller()\"]\n    \n    B --\u003e E[\"Process Log Record\"]\n    E --\u003e F[\"Add to Buffer\"]\n    \n    D --\u003e C\n    \n    C --\u003e G{\"Exception or Message?\"}\n    G -- \"Exception\" --\u003e H[\"Send as Exception\"]\n    G -- \"Message\" --\u003e I[\"Send as Message\"]\n    \n    H --\u003e J[\"Telegram Bot API\"]\n    I --\u003e J\n```\n\nSources: `heroku/log.py:202-496`\n\n## Conclusion\n\nThe Heroku Userbot's core architecture follows a modular design that enables flexibility and extensibility. Key components are organized to handle different aspects of functionality:\n\n- **Central Coordination**: `Hikka` class manages the overall system.\n- **Client Management**: Handles multiple Telegram client sessions.\n- **Module System**: Provides a framework for extending functionality.\n- **Command Handling**: Processes commands and routes them to appropriate handlers.\n- **Persistent Storage**: Database system for configuration and data storage.\n- **User Interface**: Web interface for setup and management.\n- **Security**: Multi-layered permission system for command access control.\n- **Logging**: Comprehensive logging with Telegram integration.\n\nThese components interact seamlessly to provide a powerful and flexible platform for Telegram automation. Each subsystem is designed to be maintainable and extensible, allowing for easy addition of new features and modules."])</script><script>self.__next_f.push([1,"17:T23fc,"])</script><script>self.__next_f.push([1,"# Getting Started\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [LICENSE](LICENSE)\n- [README.md](README.md)\n- [web-resources/base.jinja2](web-resources/base.jinja2)\n- [web-resources/root.jinja2](web-resources/root.jinja2)\n- [web-resources/static/base.css](web-resources/static/base.css)\n- [web-resources/static/root.js](web-resources/static/root.js)\n\n\u003c/details\u003e\n\n\n\nThis page provides a quick start guide for new users to set up and begin using the Heroku Telegram userbot system. It covers the essential steps from initial installation through first configuration using the web interface.\n\nFor comprehensive installation instructions including Docker deployment and cloud platforms, see [Installation Guide](#1.1). For understanding the underlying system architecture, see [Core Architecture](#1.2).\n\n## Prerequisites\n\nBefore getting started, ensure you have the following requirements:\n\n| Requirement | Details |\n|-------------|---------|\n| Python Version | Python 3.8-3.11 |\n| Telegram API Credentials | API_ID and HASH from [my.telegram.org/apps](https://my.telegram.org/apps) |\n| Network Access | For web interface setup or SSH tunnel capability |\n\nSources: [README.md:50-54]()\n\n## Quick Start Overview\n\nThe Heroku userbot offers multiple pathways to get started, with the web interface being the most user-friendly approach for new users.\n\n```mermaid\ngraph TD\n    Start[Start] --\u003e Check{Prerequisites Met?}\n    Check --\u003e|No| GetCreds[\"Get Telegram API Credentials\"]\n    Check --\u003e|Yes| Install[\"Install Heroku\"]\n    GetCreds --\u003e Install\n    \n    Install --\u003e LaunchWeb[\"Launch Web Interface\"]\n    LaunchWeb --\u003e AuthFlow{Authentication Method}\n    \n    AuthFlow --\u003e|QR Code| QRAuth[\"QR Code Authentication\"]\n    AuthFlow --\u003e|Phone| PhoneAuth[\"Phone Number Authentication\"]\n    \n    QRAuth --\u003e SetupBot[\"Configure Inline Bot\"]\n    PhoneAuth --\u003e TwoFA{2FA Required?}\n    TwoFA --\u003e|Yes| Enter2FA[\"Enter 2FA Password\"]\n    TwoFA --\u003e|No| SetupBot\n    Enter2FA --\u003e SetupBot\n    \n    SetupBot --\u003e Complete[\"Installation Complete\"]\n    Complete --\u003e FirstSteps[\"First Steps\"]\n    \n    style Start fill:#e1f5fe\n    style Complete fill:#e8f5e8\n    style FirstSteps fill:#fff3e0\n```\n\nSources: [web-resources/static/root.js:109-443](), [web-resources/root.jinja2:80-156]()\n\n## Installation and Launch\n\n### Manual Installation\n\nFor quick manual setup, use the following command:\n\n```bash\napt update \u0026\u0026 apt install git python3 -y \u0026\u0026 git clone https://github.com/coddrago/Heroku \u0026\u0026 cd Heroku \u0026\u0026 pip install -r requirements.txt \u0026\u0026 python3 -m hikka\n```\n\n**Network Access Options:**\n- `--proxy-pass`: Opens SSH tunnel for web interface access on VPS/VDS\n- `--no-web`: Completes setup in console mode without web interface\n\nSources: [README.md:21-23]()\n\n### Web Interface Launch\n\nThe system automatically launches a web interface accessible at `http://localhost:8080` (or through configured tunneling). The interface is built using several key components:\n\n```mermaid\ngraph LR\n    subgraph \"Web Interface Components\"\n        BaseTemplate[\"base.jinja2\u003cbr/\u003eBase HTML Structure\"]\n        RootTemplate[\"root.jinja2\u003cbr/\u003eMain Setup Interface\"]\n        RootJS[\"root.js\u003cbr/\u003eAuthentication Logic\"]\n        BaseCSS[\"base.css\u003cbr/\u003eStyling \u0026 Animations\"]\n    end\n    \n    subgraph \"Authentication Flow\"\n        GetStarted[\"get_started Button\"]\n        APIInput[\"API Credentials Input\"]\n        AuthMethod[\"Authentication Method Selection\"]\n        Complete[\"Installation Complete\"]\n    end\n    \n    BaseTemplate --\u003e RootTemplate\n    RootTemplate --\u003e RootJS\n    RootTemplate --\u003e BaseCSS\n    \n    GetStarted --\u003e APIInput\n    APIInput --\u003e AuthMethod\n    AuthMethod --\u003e Complete\n    \n    RootJS -.-\u003e|Handles| GetStarted\n    RootJS -.-\u003e|Validates| APIInput\n    RootJS -.-\u003e|Processes| AuthMethod\n```\n\nSources: [web-resources/base.jinja2:9-28](), [web-resources/root.jinja2:53-187](), [web-resources/static/root.js:1-480]()\n\n## Web Interface Setup Process\n\n### Initial Interface\n\nThe web interface presents the main setup screen with the following key elements:\n\n| Element | ID/Class | Function |\n|---------|----------|----------|\n| Get Started Button | `#get_started` | Initiates setup process |\n| API ID Input | `#api_id` | Telegram API ID entry |\n| API Hash Input | `#api_hash` | Telegram API Hash entry |\n| Phone Input | `#phone` | Phone number for authentication |\n| Continue Button | `#continue_btn` | Proceeds through setup steps |\n\nSources: [web-resources/root.jinja2:81-170]()\n\n### Authentication Flow\n\nThe system supports two primary authentication methods with automatic fallback logic:\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant WebUI as \"Web Interface\"\n    participant AuthHandler as \"Authentication Handler\"\n    participant TelegramAPI as \"Telegram API\"\n    \n    User-\u003e\u003eWebUI: Click \"Get Started\"\n    WebUI-\u003e\u003eAuthHandler: Check can_add permission\n    AuthHandler-\u003e\u003eWebUI: Permission granted\n    \n    Note over WebUI: Device Detection\n    WebUI-\u003e\u003eWebUI: is_phone() check\n    \n    alt Mobile Device\n        WebUI-\u003e\u003eUser: Show phone input\n        User-\u003e\u003eWebUI: Enter phone number\n        WebUI-\u003e\u003eAuthHandler: send_tg_code\n        AuthHandler-\u003e\u003eTelegramAPI: Request SMS code\n        TelegramAPI-\u003e\u003eUser: Send SMS code\n        User-\u003e\u003eWebUI: Enter SMS code\n    else Desktop Device\n        WebUI-\u003e\u003eUser: Show QR code option\n        User-\u003e\u003eWebUI: Choose QR or phone\n        alt QR Code Selected\n            WebUI-\u003e\u003eAuthHandler: init_qr_login\n            AuthHandler-\u003e\u003eTelegramAPI: Generate QR token\n            TelegramAPI-\u003e\u003eWebUI: QR code data\n            WebUI-\u003e\u003eUser: Display QR code\n            User-\u003e\u003eTelegramAPI: Scan with Telegram app\n        end\n    end\n    \n    alt 2FA Required\n        TelegramAPI-\u003e\u003eWebUI: 2FA challenge\n        WebUI-\u003e\u003eUser: Show 2FA input\n        User-\u003e\u003eWebUI: Enter 2FA password\n    end\n    \n    WebUI-\u003e\u003eAuthHandler: Complete authentication\n    AuthHandler-\u003e\u003eWebUI: Success response\n    WebUI-\u003e\u003eUser: Show completion screen\n```\n\nSources: [web-resources/static/root.js:52-108](), [web-resources/static/root.js:232-267](), [web-resources/static/root.js:310-428]()\n\n### Setup Steps Progression\n\nThe web interface manages setup through discrete steps handled by the `process_next()` function:\n\n| Step | Validation | Next Step |\n|------|------------|-----------|\n| `api_id` | Must be integer, ≥4 digits | `api_hash` |\n| `api_hash` | Exactly 32 characters | `qr_login` or `phone` |\n| `phone` | Valid phone format `/^[+]?\\d{11,13}$/` | `code` |\n| `code` | 5 digits, auto-submit | `custom_bot` or `2fa` |\n| `2fa` | Password validation | `custom_bot` |\n| `custom_bot` | Optional, must end with 'bot' | Installation complete |\n\nSources: [web-resources/static/root.js:310-428]()\n\n## Post-Installation Configuration\n\n### Inline Bot Setup\n\nThe system automatically configures an inline bot for enhanced functionality. Users can either:\n\n1. **Auto-generate**: Leave the custom bot field empty for automatic creation\n2. **Custom bot**: Specify a bot username (must end with 'bot', minimum 5 characters)\n\nThe `custom_bot` validation ensures proper bot naming conventions:\n\n```javascript\n// From root.js lines 399-426\nif (\"\" != b \u0026\u0026 (!b.toLowerCase().endsWith(\"bot\") || 5 \u003e b.length)) {\n    // Show error for invalid bot username\n}\n```\n\nSources: [web-resources/static/root.js:399-426](), [web-resources/root.jinja2:130-134]()\n\n### Installation Completion\n\nUpon successful setup, the interface transitions to a completion screen with visual feedback:\n\n```mermaid\nstateDiagram-v2\n    [*] --\u003e Authentication\n    Authentication --\u003e BotSetup: Credentials Valid\n    BotSetup --\u003e Installing: Configuration Complete\n    Installing --\u003e Complete: finish_login()\n    \n    state Installing {\n        [*] --\u003e ShowProgress\n        ShowProgress --\u003e LoadAnimation\n        LoadAnimation --\u003e SendConfirmation\n    }\n    \n    state Complete {\n        [*] --\u003e DisplaySuccess\n        DisplaySuccess --\u003e ShowInstructions\n        ShowInstructions --\u003e [*]\n    }\n```\n\nThe `finish_login()` function handles the final installation steps and displays success animations.\n\nSources: [web-resources/static/root.js:148-173](), [web-resources/root.jinja2:54-67]()\n\n## First Steps After Installation\n\n### Verification\n\nAfter installation completes:\n\n1. **Check Telegram**: Look for messages from your inline bot\n2. **Wait for restart**: The system may restart and send configuration messages\n3. **Verify functionality**: The userbot should be responsive to commands\n\n### Basic Commands\n\nOnce installed, the userbot responds to standard commands in Telegram. The system includes core modules for essential functionality.\n\nSources: [web-resources/root.jinja2:58-66]()\n\n## Next Steps\n\nAfter completing the initial setup:\n\n- **Module Management**: Install additional modules using `.dlmod` command\n- **Security Configuration**: Review security settings and enable API flood protection\n- **Advanced Features**: Explore inline forms, galleries, and other enhanced features\n\nFor detailed information about extending functionality, see [Creating Modules](#7.1). For security best practices, see [Best Practices](#7.4).\n\nSources: [README.md:10-11](), [README.md:41-48]()"])</script><script>self.__next_f.push([1,"18:T2a97,"])</script><script>self.__next_f.push([1,"# Core Systems\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [CHANGELOG.md](CHANGELOG.md)\n\n\u003c/details\u003e\n\n\n\nThis document provides detailed documentation of the Heroku Telegram userbot framework's core systems and components. It covers the fundamental architecture, key subsystems, and their interactions that form the foundation of the userbot platform.\n\nFor information about extending the framework with custom modules, see [Creating Modules](#7.1). For deployment and infrastructure details, see [Deployment and Maintenance](#8).\n\n## Architecture Overview\n\nThe Heroku framework is built around several interconnected core systems that handle everything from application initialization to command processing and module management.\n\n### Core System Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Application Layer\"\n        MAIN[\"__main__.py\u003cbr/\u003eApplication Entry Point\"]\n        CONFIG[\"configurator.py\u003cbr/\u003eConfiguration System\"]\n        DISPATCHER[\"dispatcher.py\u003cbr/\u003eCommand Dispatcher\"]\n    end\n    \n    subgraph \"Module Management\"\n        LOADER[\"Module Loader\u003cbr/\u003eDynamic Loading System\"]\n        REGISTRY[\"Command Registry\u003cbr/\u003eFunction Registration\"]\n        COMPAT[\"Compatibility Layer\u003cbr/\u003eFTG/GeekTG/Hikka Support\"]\n    end\n    \n    subgraph \"Communication Layer\"\n        TG_CLIENT[\"CustomTelegramClient\u003cbr/\u003eTelethon Extension\"]\n        INLINE_MANAGER[\"InlineManager\u003cbr/\u003eBot Interaction System\"]\n        WEB_SERVER[\"Web Interface\u003cbr/\u003eFlask/Aiohttp Server\"]\n    end\n    \n    subgraph \"Data Management\"\n        DATABASE[\"Database System\u003cbr/\u003eSQLite/PostgreSQL/Redis\"]\n        ENTITY_CACHE[\"EntityCache\u003cbr/\u003eTelegram Entity Caching\"]\n        CONFIG_STORE[\"Configuration Storage\u003cbr/\u003eModule Settings\"]\n    end\n    \n    subgraph \"Security \u0026 Utils\"\n        SECURITY[\"Security System\u003cbr/\u003ePermission Management\"]\n        TRANSLATIONS[\"Translation System\u003cbr/\u003ei18n Support\"]\n        UTILS[\"Utility Functions\u003cbr/\u003eHelper Methods\"]\n    end\n    \n    MAIN --\u003e CONFIG\n    MAIN --\u003e DISPATCHER\n    CONFIG --\u003e WEB_SERVER\n    DISPATCHER --\u003e LOADER\n    DISPATCHER --\u003e TG_CLIENT\n    LOADER --\u003e REGISTRY\n    LOADER --\u003e COMPAT\n    TG_CLIENT --\u003e INLINE_MANAGER\n    TG_CLIENT --\u003e ENTITY_CACHE\n    DATABASE --\u003e CONFIG_STORE\n    SECURITY --\u003e DISPATCHER\n    TRANSLATIONS --\u003e CONFIG\n    UTILS --\u003e DISPATCHER\n```\n\nSources: CHANGELOG.md:32-41, architectural diagrams from system overview\n\n## Key Components\n\n### Application Entry Point\n\nThe `__main__.py` module serves as the primary entry point and orchestrates the entire framework initialization process. It handles dependency management, configuration loading, and system startup.\n\n| Component | File | Responsibility |\n|-----------|------|----------------|\n| Main Application | `hikka/__main__.py` | Framework initialization and startup |\n| Dependency Manager | `requirements.txt` | Python package dependencies |\n| Poetry Configuration | `pyproject.toml` | Modern dependency management |\n\nThe entry point manages the transition from initial setup through authentication to full userbot operation.\n\nSources: CHANGELOG.md:32, system architecture overview\n\n### Configuration System\n\nThe `configurator.py` module provides the framework's configuration management capabilities, including module settings, user preferences, and system parameters.\n\n```mermaid\ngraph LR\n    subgraph \"Configuration Sources\"\n        USER_CONFIG[\"User Configuration\u003cbr/\u003eInteractive Setup\"]\n        MODULE_CONFIG[\"Module Configurations\u003cbr/\u003ePer-Module Settings\"]\n        SYSTEM_CONFIG[\"System Configuration\u003cbr/\u003eFramework Settings\"]\n    end\n    \n    subgraph \"Configuration Processing\"\n        CONFIGURATOR[\"configurator.py\u003cbr/\u003eConfiguration Manager\"]\n        VALIDATORS[\"Config Validators\u003cbr/\u003eType Checking\"]\n        SERIALIZER[\"Config Serialization\u003cbr/\u003eDatabase Storage\"]\n    end\n    \n    subgraph \"Configuration Storage\"\n        DB_CONFIG[\"Database Storage\u003cbr/\u003ePersistent Settings\"]\n        RUNTIME_CONFIG[\"Runtime Configuration\u003cbr/\u003eActive Settings\"]\n    end\n    \n    USER_CONFIG --\u003e CONFIGURATOR\n    MODULE_CONFIG --\u003e CONFIGURATOR\n    SYSTEM_CONFIG --\u003e CONFIGURATOR\n    CONFIGURATOR --\u003e VALIDATORS\n    VALIDATORS --\u003e SERIALIZER\n    SERIALIZER --\u003e DB_CONFIG\n    DB_CONFIG --\u003e RUNTIME_CONFIG\n```\n\nThe configuration system supports multiple validation types including `Boolean`, `Integer`, `String`, `Choice`, `Series`, and custom validators.\n\nSources: CHANGELOG.md:661-662, CHANGELOG.md:245-271\n\n### Command Dispatcher\n\nThe `dispatcher.py` module handles all incoming messages, processes commands, and routes them to appropriate handlers. It serves as the central nervous system of the userbot.\n\n| Feature | Description | Implementation |\n|---------|-------------|----------------|\n| Message Processing | Handles all incoming Telegram messages | Event-driven architecture |\n| Command Routing | Routes commands to registered handlers | Registry-based dispatch |\n| Security Integration | Applies permission checks | Integration with security system |\n| Event Handling | Processes various Telegram events | Watcher system |\n\nThe dispatcher integrates with the security system to enforce permission levels and supports both traditional commands and inline interactions.\n\nSources: CHANGELOG.md:3-4, system architecture diagrams\n\n### Module System\n\nThe framework's module system provides dynamic loading, compatibility with other userbot frameworks, and a comprehensive plugin architecture.\n\n#### Module Loading Process\n\n```mermaid\nflowchart TD\n    START[\"Module Source\u003cbr/\u003e(URL/File/Repository)\"] --\u003e DOWNLOAD[\"Download/Load\u003cbr/\u003eModule Code\"]\n    DOWNLOAD --\u003e VALIDATE[\"Module Validation\u003cbr/\u003eSecurity Checks\"]\n    VALIDATE --\u003e COMPAT_CHECK[\"Compatibility Check\u003cbr/\u003eFTG/GeekTG/Hikka\"]\n    COMPAT_CHECK --\u003e PARSE[\"Parse Module\u003cbr/\u003eAST Analysis\"]\n    PARSE --\u003e REGISTER[\"Register Components\u003cbr/\u003eCommands/Watchers/Handlers\"]\n    REGISTER --\u003e INIT[\"Initialize Module\u003cbr/\u003eCall client_ready\"]\n    INIT --\u003e ACTIVE[\"Module Active\u003cbr/\u003eReady for Use\"]\n    \n    VALIDATE --\u003e|\"Security Risk\"| REJECT[\"Reject Module\u003cbr/\u003eSecurity Protection\"]\n    COMPAT_CHECK --\u003e|\"Legacy Module\"| ADAPTER[\"Compatibility Adapter\u003cbr/\u003eFTG/GeekTG Translation\"]\n    ADAPTER --\u003e PARSE\n```\n\nThe module system supports loading from multiple sources and includes comprehensive security scanning for malicious modules.\n\nSources: CHANGELOG.md:388-415, CHANGELOG.md:454-459\n\n### Database System\n\nThe framework supports multiple database backends with automatic migration and configuration storage capabilities.\n\n| Database Type | Use Case | Configuration |\n|---------------|----------|---------------|\n| SQLite | Local development and testing | File-based storage |\n| PostgreSQL | Production deployments | Cloud database support |\n| Redis | Caching and sessions | Optional external Redis |\n\nThe database system includes automatic data type conversion, transaction management, and cross-platform compatibility.\n\nSources: CHANGELOG.md:470-474, CHANGELOG.md:534-540\n\n### Web Interface\n\nThe web interface provides a browser-based setup and configuration system, particularly useful for initial authentication and module management.\n\n#### Web Interface Components\n\n```mermaid\ngraph TB\n    subgraph \"Frontend Components\"\n        LOGIN_PAGE[\"root.jinja2\u003cbr/\u003eLogin Template\"]\n        STATIC_JS[\"root.js\u003cbr/\u003eFrontend Logic\"]\n        ASSETS[\"Static Assets\u003cbr/\u003eCSS/Images\"]\n    end\n    \n    subgraph \"Backend Services\"\n        WEB_SERVER[\"Web Server\u003cbr/\u003eFlask/Aiohttp\"]\n        AUTH_HANDLER[\"Authentication Handler\u003cbr/\u003eQR/Phone Login\"]\n        CONFIG_UI[\"Configuration Interface\u003cbr/\u003eModule Settings\"]\n    end\n    \n    subgraph \"Integration Points\"\n        TG_AUTH[\"Telegram Authentication\u003cbr/\u003eSession Management\"]\n        MODULE_MGMT[\"Module Management\u003cbr/\u003eInstall/Configure\"]\n        TUNNEL_SERVICE[\"Tunnel Service\u003cbr/\u003elocalhost.run/Cloudflare\"]\n    end\n    \n    LOGIN_PAGE --\u003e WEB_SERVER\n    STATIC_JS --\u003e WEB_SERVER\n    WEB_SERVER --\u003e AUTH_HANDLER\n    AUTH_HANDLER --\u003e TG_AUTH\n    CONFIG_UI --\u003e MODULE_MGMT\n    WEB_SERVER --\u003e TUNNEL_SERVICE\n```\n\nThe web interface supports both QR code and phone number authentication methods with comprehensive error handling and user guidance.\n\nSources: CHANGELOG.md:142-153, CHANGELOG.md:277-280\n\n## System Interactions\n\n### Core System Integration Flow\n\n```mermaid\nsequenceDiagram\n    participant Main as \"__main__.py\"\n    participant Config as \"configurator.py\"\n    participant Dispatcher as \"dispatcher.py\"\n    participant Loader as \"Module Loader\"\n    participant Database as \"Database System\"\n    participant TgClient as \"CustomTelegramClient\"\n    \n    Main-\u003e\u003eConfig: Initialize configuration\n    Config-\u003e\u003eDatabase: Load stored settings\n    Main-\u003e\u003eDispatcher: Initialize dispatcher\n    Main-\u003e\u003eTgClient: Create Telegram client\n    TgClient-\u003e\u003eDatabase: Load session data\n    Main-\u003e\u003eLoader: Load core modules\n    Loader-\u003e\u003eDatabase: Register module configs\n    Dispatcher-\u003e\u003eTgClient: Register event handlers\n    Main-\u003e\u003eConfig: Start web interface (if enabled)\n    Note over Main: System ready for operation\n    \n    TgClient-\u003e\u003eDispatcher: Incoming message\n    Dispatcher-\u003e\u003eLoader: Route to module handler\n    Loader-\u003e\u003eDatabase: Access module data\n    Loader-\u003e\u003eTgClient: Send response\n```\n\nThis sequence demonstrates how the core systems collaborate during initialization and runtime operation.\n\nSources: System architecture diagrams, CHANGELOG.md initialization improvements\n\n### File Organization\n\nThe core systems are organized in a logical file structure that reflects their relationships and dependencies:\n\n```\nhikka/\n├── __main__.py              # Application entry point\n├── configurator.py          # Configuration management\n├── dispatcher.py            # Command dispatch system\n├── database.py             # Database abstraction layer\n├── inline/                 # Inline bot functionality\n│   ├── manager.py          # InlineManager core\n│   ├── forms.py            # Interactive forms\n│   └── galleries.py        # Image galleries\n├── translations/           # i18n support\n├── utils.py               # Utility functions\n└── web/                   # Web interface\n    ├── root.py            # Web server implementation\n    ├── root.jinja2        # Login template\n    └── root.js            # Frontend JavaScript\n```\n\nEach subsystem maintains clear separation of concerns while providing well-defined interfaces for integration with other components.\n\nSources: File structure analysis from architectural overview, CHANGELOG.md:36\n\nThe core systems form a cohesive foundation that enables the Heroku framework's advanced features including multi-platform deployment, comprehensive security, and extensive module ecosystem support. For detailed information about specific subsystems, refer to the individual sections covering each component."])</script><script>self.__next_f.push([1,"19:T1c26,"])</script><script>self.__next_f.push([1,"# Main Module and Entry Point\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [requirements.txt](requirements.txt)\n\n\u003c/details\u003e\n\n\n\n## Purpose and Scope\n\nThis document covers the main module and entry point of the Heroku Telegram userbot system, including dependency management, startup process, and initialization flow. It focuses on how the system bootstraps itself and connects to core components.\n\nFor information about the core dispatcher that handles runtime operations, see [Command Dispatcher](#2.3). For details about the web interface setup process, see [Web Interface](#2.5). For module loading and management after startup, see [Module System](#2.2).\n\n## Entry Point Architecture\n\nThe system entry point serves as the bootstrap mechanism that initializes all core components and establishes connections to external services. The main entry point coordinates between dependency loading, configuration validation, and core system initialization.\n\n### Entry Point Flow\n\n```mermaid\nflowchart TD\n    START[\"System Start\"] --\u003e DEPS[\"Load Dependencies\"]\n    DEPS --\u003e VALIDATE[\"Validate Environment\"]\n    VALIDATE --\u003e CONFIG[\"Load Configuration\"]\n    CONFIG --\u003e SECURITY[\"Initialize Security\"]\n    SECURITY --\u003e DISPATCHER[\"Start Core Dispatcher\"]\n    DISPATCHER --\u003e MODULES[\"Load Core Modules\"]\n    MODULES --\u003e WEB[\"Start Web Interface\"]\n    WEB --\u003e TUNNEL[\"Setup Network Tunnel\"]\n    TUNNEL --\u003e READY[\"System Ready\"]\n    \n    DEPS --\u003e DEP_ERROR[\"Dependency Error\"]\n    VALIDATE --\u003e ENV_ERROR[\"Environment Error\"]\n    CONFIG --\u003e CONFIG_ERROR[\"Configuration Error\"]\n    \n    DEP_ERROR --\u003e EXIT[\"Exit with Error\"]\n    ENV_ERROR --\u003e EXIT\n    CONFIG_ERROR --\u003e EXIT\n```\n\n**Main Entry Point Bootstrap Process**\n\nThis diagram illustrates the sequential startup process from initial dependency loading through final system readiness. Error conditions at any stage result in graceful system exit with appropriate error reporting.\n\nSources: [requirements.txt:1-5]()\n\n## Dependency Management\n\nThe system relies on a carefully curated set of dependencies that provide core functionality for Telegram interaction, network tunneling, and image processing.\n\n### Core Dependencies\n\n| Package | Version | Purpose |\n|---------|---------|---------|\n| `heroku-tl-new` | 1.1.3 | Primary Telegram library for userbot functionality |\n| `pycloudflared` | 0.2.0 | Cloudflare tunnel integration for secure web access |\n| `Pillow` | Latest | Image processing and manipulation capabilities |\n\n### Python Version Requirements\n\nThe system requires Python 3.9 or higher to ensure compatibility with modern async/await patterns and library dependencies.\n\n### Dependency Loading Process\n\n```mermaid\nsequenceDiagram\n    participant MAIN as \"Main Entry Point\"\n    participant PIP as \"Package Manager\"\n    participant HEROKU_TL as \"heroku-tl-new\"\n    participant CLOUDFLARE as \"pycloudflared\"\n    participant PILLOW as \"Pillow\"\n    participant VALIDATOR as \"Dependency Validator\"\n    \n    MAIN-\u003e\u003ePIP: \"Check installed packages\"\n    PIP-\u003e\u003eMAIN: \"Package status\"\n    \n    MAIN-\u003e\u003eHEROKU_TL: \"Import heroku-tl-new==1.1.3\"\n    HEROKU_TL-\u003e\u003eMAIN: \"Telegram library ready\"\n    \n    MAIN-\u003e\u003eCLOUDFLARE: \"Import pycloudflared==0.2.0\"\n    CLOUDFLARE-\u003e\u003eMAIN: \"Tunnel client ready\"\n    \n    MAIN-\u003e\u003ePILLOW: \"Import Pillow\"\n    PILLOW-\u003e\u003eMAIN: \"Image processing ready\"\n    \n    MAIN-\u003e\u003eVALIDATOR: \"Validate all dependencies\"\n    VALIDATOR-\u003e\u003eMAIN: \"Dependencies validated\"\n```\n\n**Dependency Initialization Sequence**\n\nThis sequence shows how the main entry point systematically validates and initializes each required dependency before proceeding with core system startup.\n\nSources: [requirements.txt:1-5]()\n\n## System Integration Points\n\nThe main module serves as the integration hub that connects various system components and external services during startup.\n\n### Core Component Integration\n\n```mermaid\ngraph TD\n    MAIN[\"hikka/__main__.py\"] --\u003e DISPATCHER[\"hikka/dispatcher.py\"]\n    MAIN --\u003e CONFIGURATOR[\"hikka/configurator.py\"]\n    MAIN --\u003e SECURITY[\"Security System\"]\n    \n    DISPATCHER --\u003e HEROKU_TL[\"heroku-tl-new\"]\n    CONFIGURATOR --\u003e WEB_UI[\"Web Interface\"]\n    SECURITY --\u003e VALIDATORS[\"Config Validators\"]\n    \n    subgraph \"External Dependencies\"\n        HEROKU_TL[\"heroku-tl-new==1.1.3\"]\n        PYCLOUDFLARED[\"pycloudflared==0.2.0\"]\n        PILLOW[\"Pillow\"]\n    end\n    \n    subgraph \"Core Initialization\"\n        MAIN\n        DISPATCHER\n        CONFIGURATOR\n        SECURITY\n    end\n    \n    subgraph \"Support Systems\"\n        WEB_UI\n        VALIDATORS\n        MODULE_LOADER[\"Module Loader\"]\n    end\n    \n    WEB_UI --\u003e PYCLOUDFLARED\n    DISPATCHER --\u003e PILLOW\n    DISPATCHER --\u003e MODULE_LOADER\n```\n\n**Main Module System Integration**\n\nThis diagram shows how the main entry point (`hikka/__main__.py`) orchestrates connections between core components and external dependencies, establishing the foundation for all subsequent system operations.\n\nSources: [requirements.txt:1-5]()\n\n## Startup Configuration\n\nThe main module handles environment detection and configuration setup to ensure proper system initialization across different deployment scenarios.\n\n### Environment Detection\n\nThe startup process includes detection of the deployment environment to apply appropriate configurations:\n\n- **Local Development**: Direct execution with local web interface\n- **Docker Container**: Containerized deployment with volume mounts\n- **Heroku Platform**: Cloud platform deployment with worker processes\n- **Okteto/VPS**: Alternative cloud deployments with custom configurations\n\n### Network Tunnel Setup\n\nWhen required, the main module coordinates with `pycloudflared` to establish secure network tunnels for web interface access:\n\n```mermaid\nflowchart LR\n    MAIN[\"Main Entry Point\"] --\u003e DETECT[\"Detect Network Requirements\"]\n    DETECT --\u003e LOCAL[\"Local Access Available?\"]\n    \n    LOCAL --\u003e|Yes| DIRECT[\"Direct Web Access\"]\n    LOCAL --\u003e|No| TUNNEL[\"Setup Cloudflare Tunnel\"]\n    \n    TUNNEL --\u003e CLOUDFLARED[\"pycloudflared Client\"]\n    CLOUDFLARED --\u003e SECURE_URL[\"Secure Public URL\"]\n    \n    DIRECT --\u003e WEB_READY[\"Web Interface Ready\"]\n    SECURE_URL --\u003e WEB_READY\n```\n\n**Network Access Configuration Flow**\n\nThis flow demonstrates how the main module determines the appropriate network access method and configures tunnel services when direct access is not available.\n\nSources: [requirements.txt:2]()\n\n## Error Handling and Recovery\n\nThe main entry point implements comprehensive error handling to ensure graceful failure modes and appropriate user feedback during startup failures.\n\n### Error Categories\n\n- **Dependency Errors**: Missing or incompatible package versions\n- **Environment Errors**: Invalid Python version or system configuration\n- **Configuration Errors**: Missing or invalid configuration parameters\n- **Network Errors**: Failed connection to external services\n- **Permission Errors**: Insufficient system or API permissions\n\nThe main module provides clear error messages and guidance for resolving common startup issues, ensuring users can quickly identify and address problems preventing system initialization.\n\nSources: [requirements.txt:1-5]()"])</script><script>self.__next_f.push([1,"1a:T396b,"])</script><script>self.__next_f.push([1,"# Module System\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [CHANGELOG.md](CHANGELOG.md)\n\n\u003c/details\u003e\n\n\n\nThe Module System is the core architecture that enables Heroku Telegram Userbot's extensibility through loadable modules. This document explains how modules are structured, loaded, registered, and executed within the Heroku framework. For information about creating custom modules, see [Creating Modules](#7.1).\n\n## Overview of the Module System\n\nThe Module System provides a structure for organizing functionality into discrete, manageable components called modules. Each module is a Python class that can define commands, watchers, inline handlers, and callback handlers, making it easy to extend the userbot's capabilities.\n\n**Module System Architecture**\n\n```mermaid\ngraph TD\n    A[\"heroku/loader.py\u003cbr/\u003eModule Loading Engine\"] --\u003e B[\"Modules Class\u003cbr/\u003eCentral Registry\"]\n    B --\u003e C[\"commands dict\u003cbr/\u003eCommand Registry\"]\n    B --\u003e D[\"watchers list\u003cbr/\u003eMessage Processors\"]\n    B --\u003e E[\"inline_handlers dict\u003cbr/\u003eInline Query Handlers\"]\n    B --\u003e F[\"callback_handlers dict\u003cbr/\u003eButton Click Handlers\"]\n    B --\u003e G[\"libraries list\u003cbr/\u003eUtility Libraries\"]\n    \n    H[\"heroku/dispatcher.py\u003cbr/\u003eCommand Dispatcher\"] --\u003e C\n    I[\"heroku/dispatcher.py\u003cbr/\u003eMessage Handler\"] --\u003e D\n    J[\"heroku/inline/manager.py\u003cbr/\u003eInline Manager\"] --\u003e E\n    J --\u003e F\n    \n    K[\"Telegram User Input\"] --\u003e H\n    K --\u003e I\n    K --\u003e J\n    \n    L[\"Module Instance\"] --\u003e B\n    M[\"@loader.command\"] --\u003e C\n    N[\"@loader.watcher\"] --\u003e D\n    O[\"@loader.inline_handler\"] --\u003e E\n    P[\"@loader.callback_handler\"] --\u003e F\n```\n\nSources: [heroku/loader.py:1-1200](), [heroku/dispatcher.py:1-450](), [heroku/inline/manager.py:1-300]()\n\n## Module Structure\n\nA Heroku module is a Python class that inherits from the `Module` base class defined in the types module. The module class contains various components that define its behavior and functionality.\n\n### Key Components of a Module\n\n| Component | Description | Registration Method |\n|-----------|-------------|---------------------|\n| Commands | Functions that respond to user commands | `@loader.command` decorator |\n| Watchers | Functions that process all incoming messages | `@loader.watcher` decorator |\n| Inline Handlers | Functions that handle inline queries | `@loader.inline_handler` decorator |\n| Callback Handlers | Functions that handle callback queries | `@loader.callback_handler` decorator |\n| Raw Handlers | Functions that handle raw Telegram events | `@loader.raw_handler` decorator |\n| Loops | Background tasks and infinite loops | `@loader.loop` decorator |\n| Configuration | Module settings stored in database | `loader.ModuleConfig` |\n| Strings | Translatable text strings | Module `strings` attribute |\n\nSources: [heroku/loader.py:233-480]()\n\n## Module Loading Lifecycle\n\nThe process of loading and initializing a module involves several steps, from reading the module code to registering its components.\n\n**Module Loading and Registration Pipeline**\n\n```mermaid\nflowchart TD\n    A[\"load_module()\u003cbr/\u003eEntry Point\"] --\u003e B[\"create_module_spec()\u003cbr/\u003eModule Spec Creation\"]\n    B --\u003e C[\"Module() Instance\u003cbr/\u003eClass Instantiation\"]\n    C --\u003e D[\"register_module()\u003cbr/\u003eComponent Registration\"]\n    D --\u003e E[\"send_config()\u003cbr/\u003eConfiguration Loading\"]\n    E --\u003e F[\"send_ready()\u003cbr/\u003eclient_ready() Call\"]\n    \n    D --\u003e G[\"register_commands()\u003cbr/\u003eCommand Registration\"]\n    D --\u003e H[\"register_watchers()\u003cbr/\u003eWatcher Registration\"]\n    D --\u003e I[\"register_inline_handlers()\u003cbr/\u003eInline Registration\"]\n    D --\u003e J[\"register_callback_handlers()\u003cbr/\u003eCallback Registration\"]\n    D --\u003e K[\"register_raw_handlers()\u003cbr/\u003eRaw Event Registration\"]\n    D --\u003e L[\"register_loops()\u003cbr/\u003eBackground Task Registration\"]\n    \n    M[\"modules.py\u003cbr/\u003eLoaderMod\"] --\u003e A\n    N[\".dlmod command\"] --\u003e M\n    O[\".loadmod command\"] --\u003e M\n```\n\nSources: [heroku/loader.py:483-600](), [heroku/loader.py:623-661](), [heroku/modules/loader.py:100-200]()\n\n### Loading Process Details\n\n1. **Source Acquisition**: The module code is obtained from a file, URL, or inline message\n2. **Module Creation**: A Python module instance is created from the source code using `importlib`\n3. **Class Instantiation**: The module class is instantiated and added to `self.modules`\n4. **Registration**: The module's components are registered with the appropriate managers\n5. **Configuration**: The module's configuration is loaded from the database via `send_config()`\n6. **Initialization**: The module's `client_ready()` method is called to complete setup\n\nSources: [heroku/modules/loader.py:477-515](), [heroku/modules/loader.py:725-758]()\n\n## The Modules Class\n\nThe `Modules` class in `loader.py` is the central registry for all loaded modules and their components. It maintains collections of commands, watchers, and handlers, and provides methods for registering, dispatching, and unloading modules.\n\n**Modules Class Structure**\n\n```mermaid\nclassDiagram\n    class Modules {\n        +commands: dict\n        +inline_handlers: dict\n        +callback_handlers: dict\n        +aliases: dict\n        +modules: list\n        +libraries: list\n        +watchers: list\n        +loops: list\n        +register_all()\n        +register_module()\n        +complete_registration()\n        +send_config()\n        +send_ready()\n        +unload_module()\n        +dispatch()\n        +check_security()\n    }\n    \n    class Module {\n        +config: ModuleConfig\n        +strings: dict\n        +name: str\n        +commands: dict\n        +watchers: list\n        +inline_handlers: dict\n        +callback_handlers: dict\n        +loops: list\n        +client_ready()\n        +config_complete()\n        +on_unload()\n        +on_dlmod()\n    }\n    \n    class LoaderMod {\n        +dlmod()\n        +loadmod()\n        +unloadmod()\n        +clearmodules()\n        +mlcmd()\n        +addrepo()\n        +delrepo()\n    }\n    \n    Module --o Modules\n    LoaderMod --|\u003e Module\n```\n\nSources: [heroku/loader.py:483-598](), [heroku/modules/loader.py:1-300]()\n\n## Module Registration\n\nWhen a module is loaded, its various components are registered with the appropriate managers. This includes commands, watchers, inline handlers, callback handlers, raw handlers, and loops.\n\n### Command Registration\n\nCommands are registered with the `Modules` instance through the `@loader.command` decorator, and are available to be dispatched when a user sends a command message with the configured prefix.\n\n```python\n@loader.command\nasync def example(self, message):\n    \"\"\"Example command - sends a greeting\"\"\"\n    await utils.answer(message, \"Hello, world!\")\n```\n\nThe command registration process extracts the function name, strips any `cmd` suffix, and adds it to the `self.commands` dictionary with the module instance as the value.\n\nSources: [heroku/loader.py:699-726]()\n\n### Watcher Registration\n\nWatchers are registered to process all incoming messages, allowing modules to react to specific message content. The watcher system supports extensive filtering through tags.\n\n```python\n@loader.watcher\nasync def watcher(self, message):\n    \"\"\"Process incoming messages\"\"\"\n    if \"hello\" in message.raw_text.lower():\n        await message.reply(\"Hello to you too!\")\n\n@loader.tag(\"no_commands\", \"out\")\n@loader.watcher\nasync def outgoing_watcher(self, message):\n    \"\"\"Only processes outgoing non-command messages\"\"\"\n    # Handle outgoing messages here\n```\n\nSources: [heroku/loader.py:800-811]()\n\n### Inline Handlers Registration\n\nInline handlers respond to inline queries from users, allowing modules to provide rich inline content through the bot's inline mode.\n\n```python\n@loader.inline_handler\nasync def inline_handler(self, query):\n    \"\"\"Handle inline queries\"\"\"\n    return {\n        \"title\": \"Example Result\",\n        \"description\": \"This is an example inline result\",\n        \"message\": \"Hello from inline!\",\n        \"thumb\": \"https://example.com/thumb.jpg\"\n    }\n```\n\nSources: [heroku/loader.py:729-767]()\n\n### Tags System\n\nHeroku provides a comprehensive tagging system for commands and watchers that allows for fine-grained control over when handlers are triggered.\n\n**Available Watcher Tags**\n\n| Tag | Description |\n|-----|-------------|\n| `no_commands` | Skip messages that are commands |\n| `only_commands` | Only process command messages |\n| `out` | Only outgoing messages |\n| `in` | Only incoming messages |\n| `only_messages` | Only text messages |\n| `only_media` | Only media messages |\n| `no_pm` | Skip private messages |\n| `no_groups` | Skip group messages |\n| `no_channels` | Skip channel messages |\n| `no_inline` | Skip inline messages |\n| `only_reply` | Only messages that are replies |\n| `no_reply` | Skip reply messages |\n\n```python\n@loader.tag(\"no_commands\", \"out\", \"only_groups\")\n@loader.watcher\nasync def group_outgoing_watcher(self, message):\n    \"\"\"Only processes outgoing non-command messages in groups\"\"\"\n    # Watcher code here\n```\n\nSources: [heroku/loader.py:341-409](), [heroku/dispatcher.py:51-94]()\n\n## Command Dispatching\n\nThe `dispatcher.py` module is responsible for processing incoming messages, determining if they're commands, and dispatching them to the appropriate handlers.\n\n**Command Dispatch Flow**\n\n```mermaid\nsequenceDiagram\n    participant U as \"Telegram User\"\n    participant TC as \"CustomTelegramClient\"\n    participant D as \"dispatcher.py\u003cbr/\u003ecommand_handler()\"\n    participant S as \"HerokuSecurity\"\n    participant M as \"Modules.dispatch()\"\n    participant MOD as \"Module Instance\"\n    \n    U-\u003e\u003e+TC: \"Send Message\"\n    TC-\u003e\u003e+D: \"NewMessage Event\"\n    D-\u003e\u003eD: \"Check prefix\u003cbr/\u003eget_prefix()\"\n    D-\u003e\u003eD: \"Parse command\u003cbr/\u003emessage.raw_text\"\n    D-\u003e\u003e+S: \"check_security()\u003cbr/\u003eValidate permissions\"\n    S--\u003e\u003e-D: \"Permission granted\"\n    D-\u003e\u003eD: \"Check rate limits\u003cbr/\u003eAPILimiter\"\n    D-\u003e\u003e+M: \"dispatch(command, message)\"\n    M-\u003e\u003e+MOD: \"Execute command method\"\n    MOD-\u003e\u003eMOD: \"await utils.answer()\"\n    MOD--\u003e\u003e-M: \"Command completed\"\n    M--\u003e\u003e-D: \"Dispatch result\"\n    D--\u003e\u003e-TC: \"Message processed\"\n    TC--\u003e\u003e-U: \"Response sent\"\n```\n\nSources: [heroku/dispatcher.py:104-425]()\n\n### Command Processing Steps\n\n1. **Prefix Check**: Check if the message starts with the command prefix using `get_prefix()`\n2. **Command Parsing**: Extract the command name and arguments from `message.raw_text`\n3. **Security Check**: Verify the user has permission to execute the command via `HerokuSecurity`\n4. **Rate Limiting**: Enforce rate limits through `APILimiter` to prevent abuse\n5. **Module Lookup**: Find the module that handles the command in `self.commands`\n6. **Execution**: Execute the command handler within the module with proper error handling\n\nSources: [heroku/dispatcher.py:272-425]()\n\n## Module Management Commands\n\nThe `LoaderMod` class in `heroku/modules/loader.py` provides user-facing commands for managing modules:\n\n| Command | Description |\n|---------|-------------|\n| `.dlmod \u003cname\u003e` | Download a module from a repository |\n| `.loadmod` | Load a module from a file attachment |\n| `.unloadmod \u003cname\u003e` | Unload a module |\n| `.clearmodules` | Remove all loaded modules |\n| `.mlcmd \u003cname\u003e` | Get a module's file |\n| `.addrepo \u003curl\u003e` | Add a module repository |\n| `.delrepo \u003curl\u003e` | Remove a module repository |\n| `.mlinfo \u003cname\u003e` | Show module information |\n\nSources: [heroku/modules/loader.py:56-355](), [heroku/modules/loader.py:1030-1146]()\n\n## Infinite Loops in Modules\n\nHeroku provides a mechanism for modules to create background tasks using the `@loader.loop` decorator, which creates an `InfiniteLoop` instance.\n\n```python\n@loader.loop(interval=60, autostart=True)\nasync def background_task(self):\n    \"\"\"This function will run every 60 seconds\"\"\"\n    # Task code here\n    \n@loader.loop(autostart=False)\nasync def manual_task(self):\n    \"\"\"Manual task that can be started/stopped programmatically\"\"\"\n    # Use self.background_task.start() to begin\n```\n\nThe loop system supports automatic startup, manual control, and proper cleanup on module unload.\n\nSources: [heroku/loader.py:149-259]()\n\n## Module Configuration\n\nModules can define configuration options using the `ModuleConfig` class. These configurations are stored in the database and can be modified by users through the `.config` command.\n\n```python\nself.config = loader.ModuleConfig(\n    loader.ConfigValue(\n        \"option_name\",\n        \"default_value\",\n        lambda: self.strings(\"option_description\"),\n        validator=loader.validators.String()\n    ),\n    loader.ConfigValue(\n        \"auto_update\",\n        True,\n        lambda: \"Enable automatic updates\",\n        validator=loader.validators.Boolean()\n    )\n)\n```\n\nAvailable validators include `String`, `Integer`, `Boolean`, `Choice`, `Series`, `Float`, `RegExp`, `TelegramID`, and others.\n\nSources: [heroku/loader.py:925-958]()\n\n## Module Internationalization\n\nHeroku provides a comprehensive translation system for modules, allowing them to support multiple languages with the `@loader.tds` (translatable docstring) decorator.\n\n```python\n@loader.tds\nclass LocalizedMod(loader.Module):\n    \"\"\"Module with translations\"\"\"\n    \n    strings = {\n        \"name\": \"Localized\",\n        \"hello\": \"Hello, {}!\",\n        \"_cmd_doc_greet\": \"Greet a user\",\n        \"_cls_doc\": \"This is a localized module\"\n    }\n    \n    strings_ru = {\n        \"hello\": \"Привет, {}!\",\n        \"_cmd_doc_greet\": \"Поприветствовать пользователя\",\n        \"_cls_doc\": \"Это локализованный модуль\"\n    }\n    \n    @loader.command\n    async def greet(self, message):\n        \"\"\"Greet a user\"\"\"\n        user = await message.get_sender()\n        await utils.answer(message, self.strings(\"hello\").format(user.first_name))\n```\n\nThe translation system supports multiple languages through `strings_\u003clang\u003e` dictionaries and integrates with the `Translator` core module.\n\nSources: [heroku/loader.py:277-332]()\n\n## Module Storage Directory\n\nHeroku stores loaded modules in a specific directory structure for persistence across restarts:\n\n```\nheroku/loaded_modules/\n├── ModuleName_{client_id}.py\n├── AnotherModule_{client_id}.py\n└── ThirdModule_{client_id}.py\n```\n\nWhen a module is loaded from a file or URL, it is saved to this directory. The `{client_id}` suffix ensures modules are isolated between different userbot instances.\n\nSources: [heroku/loader.py:266-274](), [heroku/modules/loader.py:477-486]()\n\n## Conclusion\n\nThe Module System is the foundation of Hikka's extensibility, providing a structured way to add functionality through modular components. By understanding how modules are structured, loaded, and executed, users and developers can leverage the full power of the Hikka Userbot."])</script><script>self.__next_f.push([1,"1b:T28d9,"])</script><script>self.__next_f.push([1,"# Command Dispatcher\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [CHANGELOG.md](CHANGELOG.md)\n\n\u003c/details\u003e\n\n\n\nThe Command Dispatcher is the central message routing and event processing system that handles all incoming messages, commands, and events in the Heroku userbot framework. It serves as the primary interface between Telegram messages and the module system, managing command execution, security validation, and event distribution.\n\nFor information about the overall module loading and management system, see [Module System](#2.2). For details about the database system that stores command configurations, see [Database System](#2.4). For security features that integrate with the dispatcher, see [Security System](#3).\n\n## Architecture Overview\n\nThe Command Dispatcher acts as the central hub for all message processing and command execution within the userbot framework. It coordinates between the Telegram client, security system, module system, and various event handlers.\n\n```mermaid\ngraph TB\n    subgraph \"Telegram Interface\"\n        TG_CLIENT[\"TelegramClient\"]\n        EVENTS[\"Telegram Events\"]\n        MESSAGES[\"Incoming Messages\"]\n    end\n    \n    subgraph \"Command Dispatcher Core\"\n        DISPATCHER[\"hikka.dispatcher\"]\n        CMD_PARSER[\"Command Parser\"]\n        EVENT_ROUTER[\"Event Router\"]\n        SECURITY_CHECK[\"Security Validator\"]\n    end\n    \n    subgraph \"Module System\"\n        MODULE_LOADER[\"Module Loader\"]\n        CMD_HANDLERS[\"Command Handlers\"]\n        WATCHERS[\"Event Watchers\"]\n        INLINE_HANDLERS[\"Inline Handlers\"]\n    end\n    \n    subgraph \"Execution Environment\"\n        EXECUTOR[\"Command Executor\"]\n        CONTEXT[\"Execution Context\"]\n        RESPONSE_HANDLER[\"Response Handler\"]\n    end\n    \n    TG_CLIENT --\u003e EVENTS\n    EVENTS --\u003e MESSAGES\n    MESSAGES --\u003e DISPATCHER\n    \n    DISPATCHER --\u003e CMD_PARSER\n    DISPATCHER --\u003e EVENT_ROUTER\n    DISPATCHER --\u003e SECURITY_CHECK\n    \n    CMD_PARSER --\u003e CMD_HANDLERS\n    EVENT_ROUTER --\u003e WATCHERS\n    SECURITY_CHECK --\u003e MODULE_LOADER\n    \n    CMD_HANDLERS --\u003e EXECUTOR\n    WATCHERS --\u003e EXECUTOR\n    INLINE_HANDLERS --\u003e EXECUTOR\n    \n    EXECUTOR --\u003e CONTEXT\n    CONTEXT --\u003e RESPONSE_HANDLER\n    RESPONSE_HANDLER --\u003e TG_CLIENT\n```\n\nSources: Architecture based on system overview diagrams and CHANGELOG.md references to dispatcher and executor components.\n\n## Command Processing Flow\n\nThe dispatcher processes commands through a structured pipeline that validates, routes, and executes commands while maintaining security and proper context.\n\n```mermaid\nflowchart TD\n    MSG_RECEIVED[\"Message Received\"] --\u003e PREFIX_CHECK{\"Has Command Prefix?\"}\n    \n    PREFIX_CHECK --\u003e|No| WATCHER_CHECK[\"Check Event Watchers\"]\n    PREFIX_CHECK --\u003e|Yes| PARSE_CMD[\"Parse Command\"]\n    \n    PARSE_CMD --\u003e CMD_LOOKUP[\"Lookup Command Handler\"]\n    CMD_LOOKUP --\u003e CMD_EXISTS{\"Command Exists?\"}\n    \n    CMD_EXISTS --\u003e|No| NO_CMD_RESPONSE[\"No Command Response\"]\n    CMD_EXISTS --\u003e|Yes| SECURITY_VALIDATE[\"Security Validation\"]\n    \n    SECURITY_VALIDATE --\u003e SEC_PASS{\"Security Check Passed?\"}\n    SEC_PASS --\u003e|No| ACCESS_DENIED[\"Access Denied\"]\n    SEC_PASS --\u003e|Yes| PREPARE_CONTEXT[\"Prepare Execution Context\"]\n    \n    PREPARE_CONTEXT --\u003e EXECUTE_CMD[\"Execute Command\"]\n    EXECUTE_CMD --\u003e HANDLE_RESPONSE[\"Handle Response\"]\n    \n    WATCHER_CHECK --\u003e WATCHER_MATCH{\"Watchers Match?\"}\n    WATCHER_MATCH --\u003e|Yes| EXECUTE_WATCHERS[\"Execute Watchers\"]\n    WATCHER_MATCH --\u003e|No| MSG_IGNORED[\"Message Ignored\"]\n    \n    EXECUTE_WATCHERS --\u003e HANDLE_RESPONSE\n    HANDLE_RESPONSE --\u003e SEND_RESPONSE[\"Send Response to Telegram\"]\n```\n\nSources: Flow inferred from CHANGELOG.md mentions of command processing, security validation, and watcher systems.\n\n## Event Handling and Watchers\n\nThe dispatcher manages various types of event watchers that can monitor and respond to different message types and conditions. These watchers use a sophisticated tagging system to filter events.\n\n### Watcher Types and Tags\n\n| Watcher Tag | Purpose | Description |\n|-------------|---------|-------------|\n| `no_commands` | Filter out commands | Excludes messages that are commands |\n| `only_commands` | Command-only | Only processes command messages |\n| `out` | Outgoing messages | Messages sent by the userbot |\n| `in` | Incoming messages | Messages received by the userbot |\n| `only_messages` | Text messages only | Excludes media and other content |\n| `no_media` | Exclude media | Text messages without attachments |\n| `only_photos` | Photo messages | Only processes photo messages |\n| `only_videos` | Video messages | Only processes video messages |\n| `startswith` | Text prefix | Messages starting with specific text |\n| `regex` | Pattern matching | Messages matching regex pattern |\n| `from_id` | Sender filter | Messages from specific user ID |\n| `chat_id` | Chat filter | Messages from specific chat |\n\n```mermaid\ngraph TB\n    subgraph \"Event Processing Pipeline\"\n        EVENT_IN[\"Incoming Event\"]\n        TAG_FILTER[\"Tag Filter Engine\"]\n        WATCHER_MATCH[\"Watcher Matcher\"]\n        CONTEXT_BUILD[\"Context Builder\"]\n        WATCHER_EXEC[\"Watcher Execution\"]\n    end\n    \n    subgraph \"Watcher Registry\"\n        REGISTERED_WATCHERS[\"Registered Watchers\"]\n        TAG_DEFINITIONS[\"Tag Definitions\"]\n        SECURITY_RULES[\"Security Rules\"]\n    end\n    \n    EVENT_IN --\u003e TAG_FILTER\n    TAG_FILTER --\u003e WATCHER_MATCH\n    WATCHER_MATCH --\u003e REGISTERED_WATCHERS\n    REGISTERED_WATCHERS --\u003e CONTEXT_BUILD\n    CONTEXT_BUILD --\u003e WATCHER_EXEC\n    \n    TAG_FILTER --\u003e TAG_DEFINITIONS\n    WATCHER_MATCH --\u003e SECURITY_RULES\n```\n\nSources: CHANGELOG.md:354-357, CHANGELOG.md:391-392 describe watcher tags and event processing features.\n\n## Security Integration\n\nThe dispatcher integrates closely with the security system to validate permissions before executing commands or processing events.\n\n```mermaid\ngraph LR\n    subgraph \"Security Validation Flow\"\n        CMD_REQUEST[\"Command Request\"]\n        USER_CHECK[\"User Permission Check\"]\n        CHAT_CHECK[\"Chat Permission Check\"]\n        MODULE_SEC[\"Module Security Rules\"]\n        TARGETED_SEC[\"Targeted Security Rules\"]\n        EXEC_DECISION[\"Execution Decision\"]\n    end\n    \n    CMD_REQUEST --\u003e USER_CHECK\n    USER_CHECK --\u003e CHAT_CHECK\n    CHAT_CHECK --\u003e MODULE_SEC\n    MODULE_SEC --\u003e TARGETED_SEC\n    TARGETED_SEC --\u003e EXEC_DECISION\n    \n    EXEC_DECISION --\u003e|Allowed| EXECUTE[\"Execute Command\"]\n    EXEC_DECISION --\u003e|Denied| BLOCK[\"Block Execution\"]\n```\n\nSources: CHANGELOG.md:327, CHANGELOG.md:153 reference security validation and targeted security rules.\n\n## Module Integration\n\nThe dispatcher coordinates with the module system to register, unregister, and execute commands and handlers dynamically.\n\n### Command Registration Flow\n\n```mermaid\nsequenceDiagram\n    participant Module as \"Module\"\n    participant Dispatcher as \"Command Dispatcher\"\n    participant Registry as \"Command Registry\"\n    participant Security as \"Security System\"\n    \n    Module-\u003e\u003eDispatcher: Register Command Handler\n    Dispatcher-\u003e\u003eRegistry: Add Command Mapping\n    Registry-\u003e\u003eSecurity: Apply Security Rules\n    Security--\u003e\u003eRegistry: Rules Applied\n    Registry--\u003e\u003eDispatcher: Registration Complete\n    Dispatcher--\u003e\u003eModule: Handler Registered\n    \n    Note over Module,Security: Command now available for execution\n```\n\n### Module Lifecycle Events\n\n| Event | Trigger | Dispatcher Action |\n|-------|---------|-------------------|\n| Module Load | `@loader.command` | Register command handlers |\n| Module Load | `@loader.watcher` | Register event watchers |\n| Module Load | `@loader.inline_handler` | Register inline handlers |\n| Module Unload | `.unloadmod` | Unregister all handlers |\n| Module Reload | `.reload` | Re-register updated handlers |\n\nSources: CHANGELOG.md:409-410, CHANGELOG.md:346-347 describe module registration and handler management.\n\n## Message Processing Context\n\nThe dispatcher creates execution contexts that provide modules with access to message data, client methods, and framework utilities.\n\n### Context Components\n\n```mermaid\ngraph TB\n    subgraph \"Execution Context\"\n        MSG_OBJ[\"Message Object\"]\n        CLIENT_REF[\"Client Reference\"]\n        DB_ACCESS[\"Database Access\"]\n        UTILS_ACCESS[\"Utils Access\"]\n        SECURITY_CTX[\"Security Context\"]\n        MODULE_REF[\"Module Reference\"]\n    end\n    \n    subgraph \"Context Preparation\"\n        PARSE_ARGS[\"Parse Arguments\"]\n        VALIDATE_PERMS[\"Validate Permissions\"]\n        SETUP_ENV[\"Setup Environment\"]\n        INJECT_DEPS[\"Inject Dependencies\"]\n    end\n    \n    MSG_OBJ --\u003e PARSE_ARGS\n    CLIENT_REF --\u003e VALIDATE_PERMS\n    DB_ACCESS --\u003e SETUP_ENV\n    UTILS_ACCESS --\u003e INJECT_DEPS\n    SECURITY_CTX --\u003e VALIDATE_PERMS\n    MODULE_REF --\u003e SETUP_ENV\n```\n\n### Message Types Handled\n\n| Message Type | Processing Method | Special Handling |\n|--------------|-------------------|------------------|\n| Text Messages | Direct parsing | Command prefix detection |\n| Media Messages | Content + metadata | File type validation |\n| Forwarded Messages | Original + forward info | Attribution tracking |\n| Reply Messages | Reply context | Thread awareness |\n| Channel Messages | Broadcast handling | Permission checks |\n| Inline Queries | Query processing | Results generation |\n\nSources: CHANGELOG.md:183, CHANGELOG.md:376 reference message processing and context handling.\n\n## Error Handling and Recovery\n\nThe dispatcher implements comprehensive error handling to maintain stability during command execution and event processing.\n\n```mermaid\ngraph TB\n    subgraph \"Error Handling Pipeline\"\n        EXCEPTION[\"Exception Caught\"]\n        ERROR_TYPE[\"Classify Error Type\"]\n        LOG_ERROR[\"Log Error Details\"]\n        USER_NOTIFY[\"User Notification\"]\n        RECOVERY[\"Recovery Action\"]\n    end\n    \n    subgraph \"Error Types\"\n        RPC_ERROR[\"RPC Errors\"]\n        FLOOD_ERROR[\"Flood Wait Errors\"]\n        NETWORK_ERROR[\"Network Errors\"]\n        MODULE_ERROR[\"Module Errors\"]\n        SECURITY_ERROR[\"Security Errors\"]\n    end\n    \n    EXCEPTION --\u003e ERROR_TYPE\n    ERROR_TYPE --\u003e RPC_ERROR\n    ERROR_TYPE --\u003e FLOOD_ERROR\n    ERROR_TYPE --\u003e NETWORK_ERROR\n    ERROR_TYPE --\u003e MODULE_ERROR\n    ERROR_TYPE --\u003e SECURITY_ERROR\n    \n    ERROR_TYPE --\u003e LOG_ERROR\n    LOG_ERROR --\u003e USER_NOTIFY\n    USER_NOTIFY --\u003e RECOVERY\n```\n\nSources: CHANGELOG.md:202, CHANGELOG.md:552 reference error handling and recovery mechanisms in the dispatcher."])</script><script>self.__next_f.push([1,"1c:T2e84,"])</script><script>self.__next_f.push([1,"# Database System\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [.gitignore](.gitignore)\n- [CHANGELOG.md](CHANGELOG.md)\n\n\u003c/details\u003e\n\n\n\nThis document covers the database architecture, storage backends, and data persistence mechanisms within the Heroku Telegram userbot system. The database system provides a unified interface for storing user configurations, module data, session information, and other persistent state across multiple storage backends including PostgreSQL, Redis, and JSON files.\n\nFor information about how modules interact with the database through the pointer system, see [Working with the Database](#7.3). For details about configuration management and data validation, see [Configuration and Visual Feedback](#2.6).\n\n## Overview\n\nThe database system serves as the persistence layer for the entire Heroku userbot, supporting multiple storage backends with automatic failover and platform-specific optimizations. The system abstracts away the complexity of different storage mechanisms while providing a consistent API for modules and core components.\n\n## Database Architecture\n\nThe database system implements a multi-backend architecture with intelligent routing based on data type, platform capabilities, and performance requirements.\n\n**Database Architecture Overview**\n```mermaid\ngraph TB\n    subgraph \"Application Layer\"\n        MOD[\"Module Instance\"]\n        CORE[\"Core Components\"]\n        DISP[\"hikka/dispatcher.py\"]\n        CONF[\"hikka/configurator.py\"]\n    end\n    \n    subgraph \"Database Abstraction Layer\"\n        DB_API[\"Database API\"]\n        POINTER[\"Pointer System\"]\n        VALIDATOR[\"Data Validators\"]\n        MIGRATOR[\"Migration Engine\"]\n    end\n    \n    subgraph \"Storage Backends\"\n        REDIS[\"Redis Cache\u003cbr/\u003eSession \u0026 Temp Data\"]\n        POSTGRES[\"PostgreSQL\u003cbr/\u003ePersistent Data\"]\n        JSON[\"JSON Files\u003cbr/\u003eLocal Fallback\"]\n        MEMORY[\"In-Memory\u003cbr/\u003eRuntime Cache\"]\n    end\n    \n    subgraph \"Platform Integration\"\n        HEROKU[\"Heroku Platform\u003cbr/\u003ePostgres Add-on\"]\n        LOCAL[\"Local Development\u003cbr/\u003eSQLite/JSON\"]\n        DOCKER[\"Docker Deployment\u003cbr/\u003eExternal Redis\"]\n    end\n    \n    MOD --\u003e DB_API\n    CORE --\u003e DB_API\n    DISP --\u003e DB_API\n    CONF --\u003e DB_API\n    \n    DB_API --\u003e POINTER\n    DB_API --\u003e VALIDATOR\n    DB_API --\u003e MIGRATOR\n    \n    POINTER --\u003e REDIS\n    POINTER --\u003e POSTGRES\n    POINTER --\u003e JSON\n    POINTER --\u003e MEMORY\n    \n    REDIS --\u003e HEROKU\n    POSTGRES --\u003e HEROKU\n    JSON --\u003e LOCAL\n    REDIS --\u003e DOCKER\n    \n    style DB_API fill:#f9f9f9\n    style POINTER fill:#e3f2fd\n    style POSTGRES fill:#fff3e0\n```\n\nSources: CHANGELOG.md:518-522, CHANGELOG.md:453-456, CHANGELOG.md:713\n\n## Storage Backend Implementation\n\nThe system supports multiple storage backends with automatic selection based on platform capabilities and data requirements.\n\n### PostgreSQL Backend\n\nPostgreSQL serves as the primary persistent storage for production deployments, particularly on Heroku platform with native add-on support.\n\n**PostgreSQL Integration**\n```mermaid\ngraph LR\n    subgraph \"PostgreSQL Features\"\n        SCHEMA[\"Database Schema\u003cbr/\u003eid: int64\u003cbr/\u003ekey: text\u003cbr/\u003evalue: jsonb\"]\n        MIGRATION[\"Schema Migration\u003cbr/\u003eint32 → int64\u003cbr/\u003eLegacy Support\"]\n        HEROKU_ADDON[\"Heroku Postgres\u003cbr/\u003eAdd-on Integration\"]\n    end\n    \n    subgraph \"Data Operations\"\n        SAVE[\"Save Operation\u003cbr/\u003eAtomic Writes\"]\n        LOAD[\"Load Operation\u003cbr/\u003eLazy Loading\"]\n        SERIALIZE[\"JSON Serialization\u003cbr/\u003eType Preservation\"]\n    end\n    \n    subgraph \"Error Handling\"\n        AUTOFIX[\"Automatic Repair\u003cbr/\u003eCorruption Detection\"]\n        ROLLBACK[\"Rollback Mechanism\u003cbr/\u003eBackup Restoration\"]\n        FALLBACK[\"Fallback Strategy\u003cbr/\u003eAlternative Backends\"]\n    end\n    \n    SCHEMA --\u003e SAVE\n    MIGRATION --\u003e SCHEMA\n    HEROKU_ADDON --\u003e SCHEMA\n    \n    SAVE --\u003e SERIALIZE\n    LOAD --\u003e SERIALIZE\n    \n    SERIALIZE --\u003e AUTOFIX\n    AUTOFIX --\u003e ROLLBACK\n    ROLLBACK --\u003e FALLBACK\n    \n    style SCHEMA fill:#f9f9f9\n    style AUTOFIX fill:#fff3e0\n```\n\nSources: CHANGELOG.md:453, CHANGELOG.md:456, CHANGELOG.md:713\n\n### Redis Backend\n\nRedis provides high-performance caching for session data, temporary storage, and frequently accessed information.\n\n| Feature | Description | Use Case |\n|---------|-------------|----------|\n| Session Storage | Telegram session data | Authentication state |\n| Temporary Cache | Short-lived data | API rate limiting |\n| Optional Deployment | Not required for local | Development flexibility |\n| External Support | External Redis instances | Docker deployments |\n\nSources: CHANGELOG.md:519, CHANGELOG.md:522\n\n### JSON File Backend\n\nJSON files serve as the fallback storage mechanism for local development and platforms without database add-ons.\n\n**Data Flow and Persistence**\n```mermaid\nsequenceDiagram\n    participant App as \"Application Code\"\n    participant API as \"Database API\"\n    participant Val as \"Validators\"\n    participant Back as \"Storage Backend\"\n    participant File as \"Persistence Layer\"\n    \n    Note over App,File: Write Operation\n    App-\u003e\u003eAPI: \"db.set(key, value)\"\n    API-\u003e\u003eVal: \"validate_data(value)\"\n    Val-\u003e\u003eVal: \"check_serializability()\"\n    Val-\u003e\u003eAPI: \"validated_value\"\n    API-\u003e\u003eBack: \"select_backend(key, value)\"\n    Back-\u003e\u003eFile: \"atomic_write(key, value)\"\n    File-\u003e\u003eBack: \"write_confirmation\"\n    Back-\u003e\u003eAPI: \"success_status\"\n    \n    Note over App,File: Read Operation\n    App-\u003e\u003eAPI: \"db.get(key)\"\n    API-\u003e\u003eBack: \"route_read_request(key)\"\n    Back-\u003e\u003eFile: \"read_data(key)\"\n    File-\u003e\u003eBack: \"raw_data\"\n    Back-\u003e\u003eVal: \"deserialize(raw_data)\"\n    Val-\u003e\u003eAPI: \"typed_value\"\n    API-\u003e\u003eApp: \"return value\"\n    \n    Note over App,File: Error Recovery\n    File-\u003e\u003eBack: \"corruption_detected\"\n    Back-\u003e\u003eAPI: \"trigger_autofix()\"\n    API-\u003e\u003eVal: \"validate_backup()\"\n    Val-\u003e\u003eBack: \"rollback_to_backup()\"\n```\n\nSources: CHANGELOG.md:713, CHANGELOG.md:518\n\n## Pointer System\n\nThe pointer system provides an advanced interface for working with complex data structures, supporting both direct access and nested object manipulation.\n\n### Pointer Types and Usage\n\n| Pointer Type | Description | Example Usage |\n|--------------|-------------|---------------|\n| `PointerList` | List-like interface | Dynamic arrays, collections |\n| `PointerDict` | Dictionary interface | Nested configurations |\n| `db.pointer` | Direct pointer access | Complex object references |\n| `self.pointer` | Module pointer | Module-specific data |\n\n**Pointer System Architecture**\n```mermaid\ngraph TB\n    subgraph \"Module Interface\"\n        MOD_PTR[\"self.pointer\u003cbr/\u003eModule Instance\"]\n        DB_PTR[\"db.pointer\u003cbr/\u003eGlobal Access\"]\n    end\n    \n    subgraph \"Pointer Types\"\n        PTR_LIST[\"PointerList\u003cbr/\u003eArray Operations\"]\n        PTR_DICT[\"PointerDict\u003cbr/\u003eObject Operations\"]\n        PTR_RAW[\"Raw Pointer\u003cbr/\u003eDirect Access\"]\n    end\n    \n    subgraph \"Data Operations\"\n        GET_OP[\"Get Operation\u003cbr/\u003e.get(key)\"]\n        SET_OP[\"Set Operation\u003cbr/\u003e.set(key, value)\"]\n        DATA_ACCESS[\"Data Access\u003cbr/\u003e.data attribute\"]\n    end\n    \n    subgraph \"Storage Layer\"\n        SERIALIZE[\"Serialization\u003cbr/\u003eType Preservation\"]\n        BACKEND[\"Backend Router\u003cbr/\u003eStorage Selection\"]\n        PERSIST[\"Persistence\u003cbr/\u003eAtomic Operations\"]\n    end\n    \n    MOD_PTR --\u003e PTR_LIST\n    MOD_PTR --\u003e PTR_DICT\n    DB_PTR --\u003e PTR_RAW\n    \n    PTR_LIST --\u003e GET_OP\n    PTR_DICT --\u003e SET_OP\n    PTR_RAW --\u003e DATA_ACCESS\n    \n    GET_OP --\u003e SERIALIZE\n    SET_OP --\u003e SERIALIZE\n    DATA_ACCESS --\u003e SERIALIZE\n    \n    SERIALIZE --\u003e BACKEND\n    BACKEND --\u003e PERSIST\n    \n    style MOD_PTR fill:#e3f2fd\n    style SERIALIZE fill:#f9f9f9\n    style PERSIST fill:#fff3e0\n```\n\nSources: CHANGELOG.md:98, CHANGELOG.md:117, CHANGELOG.md:339-341\n\n## Database API Interface\n\nThe database system exposes a consistent API across all storage backends with automatic type handling and validation.\n\n### Core Database Methods\n\n| Method | Purpose | Return Type |\n|--------|---------|-------------|\n| `db.get(key)` | Retrieve value by key | Any |\n| `db.set(key, value)` | Store value with key | None |\n| `db.pointer(key, item_type)` | Create pointer interface | Pointer |\n| `validate_data(value)` | Check serializability | Bool |\n\n### Advanced Features\n\n**Database Integration with Core Systems**\n```mermaid\ngraph LR\n    subgraph \"hikka/dispatcher.py\"\n        CMD_PROC[\"Command Processor\"]\n        MODULE_MGR[\"Module Manager\"]\n    end\n    \n    subgraph \"Database System\"\n        DB_API[\"Database API\"]\n        CONFIG_STORE[\"Configuration Storage\"]\n        SESSION_STORE[\"Session Storage\"]\n        MODULE_DATA[\"Module Data\"]\n    end\n    \n    subgraph \"hikka/configurator.py\"\n        CONFIG_MGR[\"Configuration Manager\"]\n        VALIDATOR[\"Config Validators\"]\n    end\n    \n    subgraph \"Data Validation\"\n        SERIAL_CHECK[\"Serializability Check\"]\n        TYPE_CONV[\"Type Conversion\"]\n        ERROR_HANDLE[\"Error Handling\"]\n    end\n    \n    CMD_PROC --\u003e DB_API\n    MODULE_MGR --\u003e MODULE_DATA\n    \n    DB_API --\u003e CONFIG_STORE\n    DB_API --\u003e SESSION_STORE\n    DB_API --\u003e MODULE_DATA\n    \n    CONFIG_MGR --\u003e CONFIG_STORE\n    VALIDATOR --\u003e CONFIG_STORE\n    \n    CONFIG_STORE --\u003e SERIAL_CHECK\n    SESSION_STORE --\u003e TYPE_CONV\n    MODULE_DATA --\u003e ERROR_HANDLE\n    \n    style DB_API fill:#f9f9f9\n    style CONFIG_STORE fill:#e3f2fd\n    style SERIAL_CHECK fill:#fff3e0\n```\n\nSources: CHANGELOG.md:899, CHANGELOG.md:731-732\n\n## Migration and Backup System\n\nThe database system includes comprehensive migration support for schema changes and data format updates.\n\n### Migration Features\n\n- **Schema Migration**: Automatic updates for database structure changes\n- **Legacy Support**: Backward compatibility with older data formats  \n- **Type Migration**: Integer size changes (int32 → int64)\n- **Module Migration**: References replacement during library updates\n- **Automatic Backup**: Corruption detection and rollback capability\n\n### Error Recovery\n\nThe system implements automatic error detection and recovery mechanisms:\n\n1. **Corruption Detection**: Automatic identification of corrupted data\n2. **Autofix Mechanism**: Attempts to repair minor data corruption\n3. **Rollback System**: Restoration from known good backups\n4. **Fallback Strategy**: Alternative backend selection on failure\n\n**Migration and Recovery Flow**\n```mermaid\nstateDiagram-v2\n    [*] --\u003e Normal_Operation\n    Normal_Operation --\u003e Corruption_Detected: \"Data Error\"\n    Corruption_Detected --\u003e Auto_Fix_Attempt: \"Trigger Repair\"\n    Auto_Fix_Attempt --\u003e Validation_Check: \"Repair Complete\"\n    Validation_Check --\u003e Normal_Operation: \"Fix Successful\"\n    Validation_Check --\u003e Backup_Rollback: \"Fix Failed\"\n    Backup_Rollback --\u003e Fallback_Backend: \"Rollback Failed\"\n    Fallback_Backend --\u003e Normal_Operation: \"Backend Switch\"\n    Backup_Rollback --\u003e Normal_Operation: \"Rollback Success\"\n```\n\nSources: CHANGELOG.md:713, CHANGELOG.md:419, CHANGELOG.md:456\n\n## Platform-Specific Implementations\n\nThe database system adapts to different deployment platforms with optimized configurations.\n\n### Heroku Platform\n\n- **Native PostgreSQL**: Heroku Postgres add-on integration\n- **Automatic Scaling**: Database resources scale with app instances\n- **Backup Integration**: Platform-provided backup and restore\n- **Session Management**: Optimized for dyno restart cycles\n\n### Local Development\n\n- **JSON Fallback**: File-based storage for development\n- **SQLite Option**: Lightweight database for testing\n- **Redis Optional**: Can run without Redis dependency\n- **Flexible Config**: Easy switching between backends\n\n### Docker Deployment\n\n- **External Redis**: Support for external Redis instances\n- **Volume Mounting**: Persistent storage across container restarts\n- **Environment Config**: Database URLs via environment variables\n- **Health Checks**: Database connectivity monitoring\n\nSources: CHANGELOG.md:519, CHANGELOG.md:522, CHANGELOG.md:453"])</script><script>self.__next_f.push([1,"1d:T27db,"])</script><script>self.__next_f.push([1,"# Web Interface\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [web-resources/base.jinja2](web-resources/base.jinja2)\n- [web-resources/root.jinja2](web-resources/root.jinja2)\n- [web-resources/static/base.css](web-resources/static/base.css)\n- [web-resources/static/root.js](web-resources/static/root.js)\n\n\u003c/details\u003e\n\n\n\nThe Web Interface provides a browser-based setup and configuration system for the Heroku Telegram userbot framework. This system handles the initial userbot installation, Telegram authentication, and configuration through an interactive web application that runs on port 8080.\n\nFor information about the core application entry point and dependency management, see [Main Module and Entry Point](#2.1). For details about the underlying command processing system, see [Command Dispatcher](#2.3).\n\n## Overview and Architecture\n\nThe web interface consists of a multi-step configuration wizard that guides users through userbot setup. It supports multiple authentication methods, provides real-time feedback, and adapts to different platforms including mobile devices.\n\n### Web Interface Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Frontend Components\"\n        RT[\"root.jinja2\u003cbr/\u003eMain Template\"]\n        BT[\"base.jinja2\u003cbr/\u003eBase Template\"]\n        RJS[\"root.js\u003cbr/\u003eAuthentication Logic\"]\n        CSS[\"base.css\u003cbr/\u003eStyling \u0026 Animations\"]\n    end\n    \n    subgraph \"Authentication Endpoints\"\n        WA[\"/web_auth\u003cbr/\u003eSession Authentication\"]\n        CA[\"/can_add\u003cbr/\u003eEULA Validation\"]\n        SA[\"/set_api\u003cbr/\u003eAPI Credentials\"]\n        QR[\"/init_qr_login\u003cbr/\u003eQR Code Generation\"]\n        GQ[\"/get_qr_url\u003cbr/\u003eQR Code Updates\"]\n        TC[\"/send_tg_code\u003cbr/\u003ePhone Auth\"]\n        TGC[\"/tg_code\u003cbr/\u003eCode Verification\"]\n        CB[\"/custom_bot\u003cbr/\u003eBot Configuration\"]\n    end\n    \n    subgraph \"Session Management\"\n        CS[\"/check_session\u003cbr/\u003eSession Validation\"]\n        COOK[\"$.cookie\u003cbr/\u003eClient Storage\"]\n    end\n    \n    subgraph \"External Dependencies\"\n        LOTTIE[\"Lottie Animations\u003cbr/\u003ebodymovin.js\"]\n        QRS[\"QR Code Styling\u003cbr/\u003eqr-code-styling.js\"]\n        SWT[\"SweetAlert2\u003cbr/\u003eError Dialogs\"]\n    end\n    \n    RT --\u003e BT\n    RT --\u003e RJS\n    BT --\u003e CSS\n    \n    RJS --\u003e WA\n    RJS --\u003e CA\n    RJS --\u003e SA\n    RJS --\u003e QR\n    RJS --\u003e GQ\n    RJS --\u003e TC\n    RJS --\u003e TGC\n    RJS --\u003e CB\n    RJS --\u003e CS\n    RJS --\u003e COOK\n    \n    RJS --\u003e LOTTIE\n    RJS --\u003e QRS\n    RJS --\u003e SWT\n```\n\nSources: [web-resources/root.jinja2:1-197](), [web-resources/static/root.js:1-472](), [web-resources/base.jinja2:1-28](), [web-resources/static/base.css:1-773]()\n\n### Component Responsibilities\n\n| Component | File | Purpose |\n|-----------|------|---------|\n| `root.jinja2` | [web-resources/root.jinja2]() | Main template with authentication forms and UI elements |\n| `base.jinja2` | [web-resources/base.jinja2]() | Base HTML structure and external library imports |\n| `root.js` | [web-resources/static/root.js]() | Authentication logic, form validation, and API communication |\n| `base.css` | [web-resources/static/base.css]() | Styling, animations, and responsive design |\n\n## Authentication Flow System\n\nThe web interface supports two primary authentication methods: QR code scanning for desktop users and phone number authentication for mobile users or when QR is unavailable.\n\n### Authentication State Machine\n\n```mermaid\nstateDiagram-v2\n    [*] --\u003e check_session: \"Page Load\"\n    check_session --\u003e auth_required: \"auth_required = true\"\n    check_session --\u003e installation: \"auth_required = false\"\n    \n    auth_required --\u003e web_auth: \"auth() function\"\n    web_auth --\u003e authorized: \"heroku_ session\"\n    web_auth --\u003e timeout: \"TIMEOUT response\"\n    \n    authorized --\u003e get_started: \"User clicks get_started\"\n    get_started --\u003e can_add: \"EULA check\"\n    can_add --\u003e eula_form: \"403 status\"\n    can_add --\u003e api_flow: \"Platform allows\"\n    \n    state api_flow {\n        [*] --\u003e api_id: \"skip_creds = false\"\n        [*] --\u003e qr_login: \"skip_creds = true\"\n        api_id --\u003e api_hash: \"isInt() validation\"\n        api_hash --\u003e set_api: \"32 char validation\"\n        set_api --\u003e qr_login: \"is_phone() = false\"\n        set_api --\u003e phone: \"is_phone() = true\"\n    }\n    \n    state auth_method {\n        qr_login --\u003e init_qr_login: \"QR flow\"\n        qr_login --\u003e phone: \"denyqr button\"\n        init_qr_login --\u003e get_qr_url: \"QR polling\"\n        get_qr_url --\u003e qr_success: \"SUCCESS response\"\n        get_qr_url --\u003e show_2fa: \"2FA response\"\n        \n        phone --\u003e send_tg_code: \"isValidPhone()\"\n        send_tg_code --\u003e tg_code_form: \"Code sent\"\n        tg_code_form --\u003e tg_code: \"5 digit code\"\n        tg_code --\u003e show_2fa: \"401 status\"\n        tg_code --\u003e custom_bot: \"Success\"\n    }\n    \n    show_2fa --\u003e qr_2fa: \"QR 2FA flow\"\n    show_2fa --\u003e tg_code: \"Phone 2FA flow\"\n    qr_2fa --\u003e finish_login: \"Success\"\n    \n    custom_bot --\u003e finish_login: \"Bot configured\"\n    finish_login --\u003e [*]: \"Setup complete\"\n    \n    timeout --\u003e [*]\n    eula_form --\u003e [*]\n```\n\nSources: [web-resources/static/root.js:187-195](), [web-resources/static/root.js:109-127](), [web-resources/static/root.js:52-108](), [web-resources/static/root.js:304-422]()\n\n### Authentication Functions and Endpoints\n\n| Function | Endpoint | Purpose | Validation |\n|----------|----------|---------|------------|\n| `auth()` | `/web_auth` | Establishes authenticated session | Session timeout (250s) |\n| `login_qr()` | `/init_qr_login` | Initiates QR code authentication | Platform detection |\n| `process_next()` | `/set_api` | Validates and stores API credentials | `isInt()`, length checks |\n| `tg_code()` | `/send_tg_code` | Sends Telegram verification code | `isValidPhone()` regex |\n| `finish_login()` | `/custom_bot` | Completes setup with bot configuration | Username validation |\n\n## User Interface Components\n\nThe web interface provides a responsive, animated experience with multiple visual states and form components.\n\n### Form Blocks and Navigation\n\n```mermaid\ngraph LR\n    subgraph \"Form Blocks\"\n        API_ID[\"#block_api_id\u003cbr/\u003eAPI ID Input\"]\n        API_HASH[\"#block_api_hash\u003cbr/\u003eAPI Hash Input\"]\n        PHONE[\"#block_phone\u003cbr/\u003ePhone Input\"]\n        QR[\"#block_qr_login\u003cbr/\u003eQR Code Display\"]\n        BOT[\"#block_custom_bot\u003cbr/\u003eBot Username\"]\n    end\n    \n    subgraph \"Control Buttons\"\n        GET_STARTED[\"#get_started\u003cbr/\u003eInitial Entry\"]\n        CONTINUE[\"#continue_btn\u003cbr/\u003eStep Navigation\"]\n        DENY_QR[\"#denyqr\u003cbr/\u003ePhone Fallback\"]\n        ENTER_API[\"#enter_api\u003cbr/\u003eAPI Override\"]\n    end\n    \n    subgraph \"Modal Forms\"\n        AUTH_CODE[\"auth-code-form\u003cbr/\u003eCode Entry\"]\n        EULA[\"eula-form\u003cbr/\u003eEULA Violation\"]\n        AUTH_WAIT[\"auth\u003cbr/\u003eSession Wait\"]\n        FINISH[\"finish_block\u003cbr/\u003eCompletion\"]\n    end\n    \n    GET_STARTED --\u003e API_ID\n    API_ID --\u003e API_HASH\n    API_HASH --\u003e QR\n    API_HASH --\u003e PHONE\n    QR --\u003e AUTH_CODE\n    PHONE --\u003e AUTH_CODE\n    DENY_QR --\u003e PHONE\n    AUTH_CODE --\u003e BOT\n    BOT --\u003e FINISH\n    \n    CONTINUE -.-\u003e API_ID\n    CONTINUE -.-\u003e API_HASH\n    CONTINUE -.-\u003e PHONE\n    CONTINUE -.-\u003e BOT\n```\n\nSources: [web-resources/root.jinja2:114-130](), [web-resources/root.jinja2:76-113](), [web-resources/root.jinja2:155-178](), [web-resources/static/base.css:257-266]()\n\n### Animation and Visual Feedback\n\nThe interface uses Lottie animations for visual feedback and state indication:\n\n| Element | Animation Source | Purpose |\n|---------|------------------|---------|\n| `#tg_icon` | `lf20_bgqoyj8l.json` | Telegram authentication waiting |\n| `#monkey` | `lf30_t52znxni.json` | Code entry form |\n| `#monkey-close` | `lf20_eg88dyk9.json` | 2FA password entry |\n| `#installation_icon` | `lf20_n3jgitst.json` | Installation completion |\n| `#law` | `forbidden.json` | EULA violation warning |\n\nSources: [web-resources/static/root.js:8-17](), [web-resources/static/root.js:351-365](), [web-resources/static/root.js:170-184](), [web-resources/static/root.js:153-162]()\n\n## Technical Implementation\n\n### Session Management and Security\n\nThe web interface implements session-based authentication with cookie storage and CSRF protection:\n\n```javascript\n// Session validation\nfetch(\"/check_session\", {\n    method: \"POST\",\n    credentials: \"include\"\n})\n\n// Cookie-based session storage\n$.cookie(\"session\", session_token)\n```\n\nSources: [web-resources/static/root.js:187-194](), [web-resources/static/root.js:32-33]()\n\n### Platform Detection and Responsive Design\n\nThe interface automatically detects mobile devices and adjusts the authentication flow:\n\n```javascript\nfunction is_phone() {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(\n        navigator.userAgent,\n    );\n}\n```\n\nMobile users are automatically redirected from QR code authentication to phone number authentication for better usability.\n\nSources: [web-resources/static/root.js:296-300](), [web-resources/static/root.js:301]()\n\n### Error Handling and Validation\n\nThe system implements comprehensive input validation and error reporting:\n\n| Validation Function | Purpose | Implementation |\n|-------------------|---------|----------------|\n| `isInt()` | API ID validation | ParseFloat and integer check |\n| `isValidPhone()` | Phone format validation | Regex pattern `/^[+]?\\d{11,13}$/` |\n| `error_state()` | Visual error feedback | CSS class toggle with timeout |\n| `error_message()` | User error notification | SweetAlert2 integration |\n\nSources: [web-resources/static/root.js:139-142](), [web-resources/static/root.js:144-146](), [web-resources/static/root.js:282-288](), [web-resources/static/root.js:275-280]()\n\n### QR Code Implementation\n\nQR code authentication uses the `qr-code-styling` library with custom styling:\n\n```javascript\nconst qrCode = new QRCodeStyling({\n    width: window.innerHeight / 3,\n    height: window.innerHeight / 3,\n    type: \"svg\",\n    dotsOptions: { type: \"rounded\" },\n    cornersSquareOptions: { type: \"extra-rounded\" },\n    backgroundOptions: { color: \"transparent\" }\n});\n```\n\nThe QR code updates every 1.25 seconds via polling to maintain security and handle expiration.\n\nSources: [web-resources/static/root.js:62-83](), [web-resources/static/root.js:88-106]()"])</script><script>self.__next_f.push([1,"1e:T25a0,"])</script><script>self.__next_f.push([1,"# Configuration and Visual Feedback\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [assets/2fa.txt](assets/2fa.txt)\n- [assets/banner.txt](assets/banner.txt)\n- [assets/download.txt](assets/download.txt)\n- [assets/success.txt](assets/success.txt)\n\n\u003c/details\u003e\n\n\n\nThis document covers the configuration system and visual feedback mechanisms used throughout the Heroku Telegram userbot framework. The system provides rich ASCII art displays and visual indicators to guide users through setup, authentication, and operational processes.\n\nFor information about the web-based configuration interface, see [Web Interface](#2.5). For details about the main application initialization, see [Main Module and Entry Point](#2.1).\n\n## Overview\n\nThe framework implements a comprehensive visual feedback system using ASCII art assets and terminal-based displays to enhance user experience during configuration and operational phases. This system provides immediate visual confirmation of system states, progress indicators, and branded interface elements.\n\n## ASCII Visual Assets System\n\nThe framework maintains a collection of ASCII art files that serve as visual components throughout the user interface:\n\n### Asset Types and Usage\n\n| Asset File | Purpose | Display Context |\n|------------|---------|-----------------|\n| `banner.txt` | Main application logo/branding | Startup, main interface display |\n| `2fa.txt` | Two-factor authentication indicator | 2FA setup and verification |\n| `success.txt` | Success confirmation | Successful operations completion |\n| `download.txt` | Download/installation progress | Module installation, updates |\n\n```mermaid\nflowchart TB\n    subgraph \"Visual Asset System\"\n        BANNER[\"banner.txt\u003cbr/\u003eMain Brand Display\"]\n        TWO_FA[\"2fa.txt\u003cbr/\u003eAuth Visual\"]\n        SUCCESS[\"success.txt\u003cbr/\u003eConfirmation Display\"]\n        DOWNLOAD[\"download.txt\u003cbr/\u003eProgress Indicator\"]\n    end\n    \n    subgraph \"Configuration Processes\"\n        STARTUP[\"Application Startup\"]\n        AUTH_FLOW[\"Authentication Flow\"]\n        MODULE_INSTALL[\"Module Installation\"]\n        OPERATION_COMPLETE[\"Operation Completion\"]\n    end\n    \n    subgraph \"Display Contexts\"\n        TERMINAL[\"Terminal Output\"]\n        WEB_CONSOLE[\"Web Console\"]\n        LOG_OUTPUT[\"Log Messages\"]\n    end\n    \n    STARTUP --\u003e BANNER\n    AUTH_FLOW --\u003e TWO_FA\n    MODULE_INSTALL --\u003e DOWNLOAD\n    OPERATION_COMPLETE --\u003e SUCCESS\n    \n    BANNER --\u003e TERMINAL\n    TWO_FA --\u003e WEB_CONSOLE\n    SUCCESS --\u003e LOG_OUTPUT\n    DOWNLOAD --\u003e TERMINAL\n```\n\n**Sources:** [assets/banner.txt:1-29](), [assets/2fa.txt:1-20](), [assets/success.txt:1-20](), [assets/download.txt:1-33]()\n\n### ANSI Color Encoding System\n\nThe ASCII assets utilize sophisticated ANSI escape sequences for terminal coloring:\n\n```mermaid\ngraph TB\n    subgraph \"Color System Architecture\"\n        RGB_CODES[\"RGB Color Codes\u003cbr/\u003e[48;2;R;G;B m\"]\n        RESET_CODES[\"Reset Sequences\u003cbr/\u003e[0m\"]\n        BACKGROUND[\"Background Colors\u003cbr/\u003e48;2 prefix\"]\n        FOREGROUND[\"Foreground Colors\u003cbr/\u003e38;2 prefix\"]\n    end\n    \n    subgraph \"Visual Elements\"\n        GRADIENTS[\"Color Gradients\"]\n        SHAPES[\"ASCII Shapes\"]\n        BORDERS[\"Border Elements\"]\n        HIGHLIGHTS[\"Highlight Areas\"]\n    end\n    \n    RGB_CODES --\u003e GRADIENTS\n    BACKGROUND --\u003e SHAPES\n    FOREGROUND --\u003e BORDERS\n    RESET_CODES --\u003e HIGHLIGHTS\n    \n    GRADIENTS --\u003e TERMINAL_DISPLAY[\"Terminal Display\"]\n    SHAPES --\u003e TERMINAL_DISPLAY\n    BORDERS --\u003e TERMINAL_DISPLAY\n    HIGHLIGHTS --\u003e TERMINAL_DISPLAY\n```\n\n**Sources:** [assets/banner.txt:3-27](), [assets/2fa.txt:3-16](), [assets/success.txt:6-14]()\n\n## Configuration Visual Flow\n\nThe visual feedback system provides step-by-step guidance through the configuration process:\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant ConfigSystem as \"Configuration System\"\n    participant VisualFeedback as \"Visual Feedback Engine\"\n    participant AssetLoader as \"Asset Loader\"\n    \n    User-\u003e\u003eConfigSystem: \"Initiate Setup\"\n    ConfigSystem-\u003e\u003eVisualFeedback: \"Display Welcome\"\n    VisualFeedback-\u003e\u003eAssetLoader: \"Load banner.txt\"\n    AssetLoader--\u003e\u003eVisualFeedback: \"ASCII Banner Data\"\n    VisualFeedback--\u003e\u003eUser: \"🎨 Branded Welcome Display\"\n    \n    User-\u003e\u003eConfigSystem: \"Start Authentication\"\n    ConfigSystem-\u003e\u003eVisualFeedback: \"Show 2FA Prompt\"\n    VisualFeedback-\u003e\u003eAssetLoader: \"Load 2fa.txt\"\n    AssetLoader--\u003e\u003eVisualFeedback: \"2FA Visual\"\n    VisualFeedback--\u003e\u003eUser: \"🔐 2FA Setup Display\"\n    \n    User-\u003e\u003eConfigSystem: \"Install Modules\"\n    ConfigSystem-\u003e\u003eVisualFeedback: \"Show Progress\"\n    VisualFeedback-\u003e\u003eAssetLoader: \"Load download.txt\"\n    AssetLoader--\u003e\u003eVisualFeedback: \"Download Visual\"\n    VisualFeedback--\u003e\u003eUser: \"⬇️ Installation Progress\"\n    \n    ConfigSystem-\u003e\u003eVisualFeedback: \"Confirm Success\"\n    VisualFeedback-\u003e\u003eAssetLoader: \"Load success.txt\"\n    AssetLoader--\u003e\u003eVisualFeedback: \"Success Visual\"\n    VisualFeedback--\u003e\u003eUser: \"✅ Success Confirmation\"\n```\n\n**Sources:** [assets/banner.txt:1-29](), [assets/2fa.txt:1-20](), [assets/download.txt:1-33](), [assets/success.txt:1-20]()\n\n## Asset Loading and Display System\n\nThe framework implements a standardized approach to loading and displaying ASCII assets:\n\n### Asset File Structure\n\nEach asset file follows a consistent format:\n- **Header**: ANSI reset sequences to ensure clean display\n- **Content**: RGB-encoded ASCII art with precise color positioning\n- **Footer**: Final reset sequences for terminal cleanup\n\n### Color Palette Analysis\n\n| Asset | Primary Colors | Visual Theme |\n|-------|---------------|--------------|\n| `banner.txt` | Purple/Pink gradients | Brand identity, warmth |\n| `2fa.txt` | Red/Yellow contrast | Security, attention |\n| `success.txt` | Green/Yellow accents | Achievement, positivity |\n| `download.txt` | Purple/Pink/Yellow | Progress, activity |\n\n```mermaid\ngraph LR\n    subgraph \"Asset Processing Pipeline\"\n        RAW_FILE[\"Raw ASCII File\"]\n        ANSI_PARSER[\"ANSI Code Parser\"]\n        COLOR_RENDERER[\"Color Renderer\"]\n        TERMINAL_OUTPUT[\"Terminal Output\"]\n    end\n    \n    subgraph \"Display Contexts\"\n        STARTUP_BANNER[\"Startup Display\"]\n        AUTH_PROMPTS[\"Authentication UI\"]\n        PROGRESS_INDICATORS[\"Progress Displays\"]\n        SUCCESS_MESSAGES[\"Completion Messages\"]\n    end\n    \n    RAW_FILE --\u003e ANSI_PARSER\n    ANSI_PARSER --\u003e COLOR_RENDERER\n    COLOR_RENDERER --\u003e TERMINAL_OUTPUT\n    \n    TERMINAL_OUTPUT --\u003e STARTUP_BANNER\n    TERMINAL_OUTPUT --\u003e AUTH_PROMPTS\n    TERMINAL_OUTPUT --\u003e PROGRESS_INDICATORS\n    TERMINAL_OUTPUT --\u003e SUCCESS_MESSAGES\n```\n\n**Sources:** [assets/banner.txt:1-3](), [assets/2fa.txt:1-2](), [assets/success.txt:1-2](), [assets/download.txt:1-2]()\n\n## Configuration State Management\n\nThe visual feedback system integrates with the broader configuration management to provide contextual displays:\n\n### State-Visual Mapping\n\n```mermaid\nstateDiagram-v2\n    [*] --\u003e InitialSetup\n    InitialSetup --\u003e ShowBanner: \"Display main banner\"\n    ShowBanner --\u003e AuthenticationRequired: \"User setup needed\"\n    \n    AuthenticationRequired --\u003e Show2FA: \"2FA enabled\"\n    AuthenticationRequired --\u003e DirectAuth: \"Simple auth\"\n    \n    Show2FA --\u003e AuthInProgress: \"Display 2fa.txt\"\n    DirectAuth --\u003e AuthInProgress\n    \n    AuthInProgress --\u003e ModuleSetup: \"Auth successful\"\n    ModuleSetup --\u003e ShowDownload: \"Display download.txt\"\n    \n    ShowDownload --\u003e InstallationComplete: \"Modules installed\"\n    InstallationComplete --\u003e ShowSuccess: \"Display success.txt\"\n    \n    ShowSuccess --\u003e [*]: \"Setup complete\"\n    \n    AuthInProgress --\u003e AuthFailed: \"Auth error\"\n    AuthFailed --\u003e AuthenticationRequired: \"Retry auth\"\n```\n\n**Sources:** [assets/banner.txt:23-27](), [assets/2fa.txt:1-20](), [assets/download.txt:1-33](), [assets/success.txt:1-20]()\n\n## Terminal Compatibility and Rendering\n\nThe ASCII assets are designed for broad terminal compatibility while maintaining visual fidelity:\n\n### ANSI Sequence Standards\n\nThe framework uses standard ANSI escape sequences for maximum compatibility:\n- **Background colors**: `[48;2;R;G;B m` format for 24-bit RGB\n- **Reset sequences**: `[0m` for returning to default terminal state\n- **Positioning**: Careful spacing to maintain layout across terminals\n\n### Cross-Platform Considerations\n\n| Platform | Color Support | Compatibility Notes |\n|----------|---------------|-------------------|\n| Linux terminals | Full RGB | Native ANSI support |\n| macOS Terminal | Full RGB | Excellent compatibility |\n| Windows Command Prompt | Limited | Requires Windows 10+ |\n| Termux (Android) | Full RGB | Mobile-optimized display |\n\n```mermaid\nflowchart TB\n    subgraph \"Terminal Compatibility Layer\"\n        DETECT_CAPS[\"Terminal Capability Detection\"]\n        FALLBACK_HANDLER[\"Fallback Display Handler\"]\n        COLOR_MAPPER[\"Color Space Mapper\"]\n    end\n    \n    subgraph \"Display Modes\"\n        FULL_COLOR[\"Full RGB Display\"]\n        REDUCED_COLOR[\"16-Color Fallback\"]\n        MONOCHROME[\"Plain Text Mode\"]\n    end\n    \n    subgraph \"Platform Targets\"\n        LINUX[\"Linux Terminals\"]\n        MACOS[\"macOS Terminal\"]\n        WINDOWS[\"Windows Console\"]\n        MOBILE[\"Termux/Mobile\"]\n    end\n    \n    DETECT_CAPS --\u003e FULL_COLOR\n    DETECT_CAPS --\u003e REDUCED_COLOR\n    FALLBACK_HANDLER --\u003e MONOCHROME\n    \n    FULL_COLOR --\u003e LINUX\n    FULL_COLOR --\u003e MACOS\n    REDUCED_COLOR --\u003e WINDOWS\n    FULL_COLOR --\u003e MOBILE\n    \n    COLOR_MAPPER --\u003e FULL_COLOR\n    COLOR_MAPPER --\u003e REDUCED_COLOR\n```\n\n**Sources:** [assets/banner.txt:2-28](), [assets/2fa.txt:3-17](), [assets/success.txt:5-16](), [assets/download.txt:9-25]()"])</script><script>self.__next_f.push([1,"1f:T2502,"])</script><script>self.__next_f.push([1,"# Security System\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [CHANGELOG.md](CHANGELOG.md)\n- [LICENSE](LICENSE)\n- [README.md](README.md)\n\n\u003c/details\u003e\n\n\n\nThe Security System provides comprehensive protection mechanisms for the Heroku Telegram userbot framework, including module validation, API protection, user permission management, and threat prevention. This system safeguards against malicious modules, API abuse, account restrictions, and unauthorized access while maintaining backward compatibility with existing modules.\n\nFor information about user permissions and access control in inline functionality, see [Inline System](#4). For module loading and validation processes, see [Module System](#2.2).\n\n## Overview\n\nThe Security System operates as a multi-layered defense mechanism integrated throughout the framework's core components. It validates modules from different sources, enforces API usage limits, manages user permissions, and provides targeted security rules for specific users and chats.\n\n```mermaid\ngraph TB\n    subgraph \"Security Architecture\"\n        SCAM_DETECT[\"ScamModuleProtection\"]\n        SECURITY_RULES[\"TargetedSecurityRules\"]\n        FLOOD_PROTECT[\"APIFloodProtection\"]\n        ENTITY_CACHE[\"NativeEntityCaching\"]\n        SECURITY_GROUPS[\"SecurityGroups\"]\n        PERMISSIONS[\"PermissionManager\"]\n    end\n    \n    subgraph \"Module Sources\"\n        OFFICIAL[\"OfficialRepository\"]\n        TRUSTED[\"TrustedDevelopers\"] \n        UNKNOWN[\"UnknownSources\"]\n        LEGACY[\"LegacyModules\"]\n    end\n    \n    subgraph \"Protection Targets\"\n        USER_ACCOUNT[\"UserAccount\"]\n        API_LIMITS[\"TelegramAPI\"]\n        CHAT_SECURITY[\"ChatSecurity\"]\n        COMMAND_ACCESS[\"CommandAccess\"]\n    end\n    \n    OFFICIAL --\u003e SCAM_DETECT\n    TRUSTED --\u003e SCAM_DETECT\n    UNKNOWN --\u003e SCAM_DETECT\n    LEGACY --\u003e SCAM_DETECT\n    \n    SCAM_DETECT --\u003e PERMISSIONS\n    SECURITY_RULES --\u003e PERMISSIONS\n    FLOOD_PROTECT --\u003e API_LIMITS\n    ENTITY_CACHE --\u003e CHAT_SECURITY\n    SECURITY_GROUPS --\u003e COMMAND_ACCESS\n    \n    PERMISSIONS --\u003e USER_ACCOUNT\n```\n\nSources: CHANGELOG.md:106-111, CHANGELOG.md:120-122, CHANGELOG.md:133, README.md:42\n\n## Module Security and Scam Protection\n\nThe framework implements comprehensive module validation to protect against malicious code injection and scam modules. This system categorizes modules by source and applies appropriate security measures.\n\n### Module Source Classification\n\n| Source Type | Security Level | Validation Process |\n|------------|---------------|-------------------|\n| Official Repository | Trusted | Basic validation |\n| Trusted Developers | Verified | Enhanced validation |\n| Unknown Sources | High Risk | Comprehensive scanning |\n| Legacy Modules | Compatible | Compatibility validation |\n\nThe system provides **Personal messages scam modules protection** to prevent malicious modules from accessing private conversations and performing unauthorized actions.\n\n```mermaid\ngraph LR\n    MODULE_LOAD[\"ModuleLoader\"] --\u003e SOURCE_CHECK[\"SourceClassification\"]\n    SOURCE_CHECK --\u003e SCAM_SCAN[\"ScamDetection\"]\n    SCAM_SCAN --\u003e VALIDATION[\"CodeValidation\"]\n    VALIDATION --\u003e APPROVAL[\"LoadApproval\"]\n    \n    SCAM_SCAN --\u003e BLOCK[\"BlockMalicious\"]\n    BLOCK --\u003e LOG[\"SecurityLog\"]\n    \n    APPROVAL --\u003e LOAD[\"ModuleLoaded\"]\n```\n\nSources: CHANGELOG.md:106, CHANGELOG.md:158\n\n## API Flood Protection\n\nThe `APILimiter` component (renamed from `APIRatelimiter`) provides protection against Telegram API abuse that could result in account restrictions or bans.\n\n### API Protection Features\n\n- **Request rate limiting** - Controls frequency of API calls\n- **Method whitelisting** - Allows blocking specific Telegram API methods\n- **Flood detection** - Identifies and prevents API flooding\n- **Account protection** - Prevents flood-based account restrictions\n\nThe system includes configurable protection levels accessible via the `.api_fw_protection` command and `.config APILimiter` interface.\n\n```mermaid\ngraph TB\n    API_CALL[\"TelegramAPICall\"] --\u003e RATE_CHECK[\"RateLimitCheck\"]\n    RATE_CHECK --\u003e METHOD_CHECK[\"MethodValidation\"]\n    METHOD_CHECK --\u003e FLOOD_CHECK[\"FloodDetection\"]\n    \n    FLOOD_CHECK --\u003e|\"Safe\"| EXECUTE[\"ExecuteCall\"]\n    FLOOD_CHECK --\u003e|\"Blocked\"| REJECT[\"RejectCall\"]\n    \n    REJECT --\u003e LOG_FLOOD[\"LogFloodAttempt\"]\n    EXECUTE --\u003e UPDATE_COUNTERS[\"UpdateCounters\"]\n```\n\nSources: CHANGELOG.md:289, CHANGELOG.md:276, README.md:124\n\n## Entity Caching and Performance Security\n\nThe **Native Entity Caching** system improves both performance and security by reducing unnecessary API requests and preventing entity enumeration attacks.\n\n### Caching Components\n\n- `client.get_entity` with expiration support\n- `client.get_perms_cached` for permission caching  \n- `client.get_fulluser` and `client.get_fullchannel` with cache\n- `client.force_get_entity` to bypass cache when needed\n\nThe system includes cache management commands and automatic cache invalidation to prevent stale data issues.\n\n```mermaid\ngraph LR\n    ENTITY_REQUEST[\"EntityRequest\"] --\u003e CACHE_CHECK[\"CacheCheck\"]\n    CACHE_CHECK --\u003e|\"Hit\"| RETURN_CACHED[\"ReturnCached\"]\n    CACHE_CHECK --\u003e|\"Miss\"| API_CALL[\"TelegramAPI\"]\n    \n    API_CALL --\u003e UPDATE_CACHE[\"UpdateCache\"]\n    UPDATE_CACHE --\u003e RETURN_FRESH[\"ReturnFresh\"]\n    \n    CACHE_CHECK --\u003e EXPIRY_CHECK[\"ExpiryCheck\"]\n    EXPIRY_CHECK --\u003e|\"Expired\"| API_CALL\n```\n\nSources: CHANGELOG.md:42, CHANGELOG.md:364-368, CHANGELOG.md:683\n\n## Targeted Security Rules\n\nThe framework provides **Targeted Security Rules** (`.tsec`) for granular access control on a per-user and per-chat basis. This system allows setting specific permissions for individual users or entire chats.\n\n### Security Rule Types\n\n- **User-specific rules** - Apply to individual Telegram users\n- **Chat-specific rules** - Apply to entire chats or channels  \n- **Command-specific rules** - Control access to specific commands\n- **Inline command rules** - Security for inline bot functionality\n\nThe system includes **automatic NoNick for tsec methods** to prevent username exposure in security-sensitive contexts.\n\n```mermaid\ngraph TB\n    COMMAND_EXEC[\"CommandExecution\"] --\u003e USER_CHECK[\"UserSecurityCheck\"]\n    USER_CHECK --\u003e CHAT_CHECK[\"ChatSecurityCheck\"]\n    CHAT_CHECK --\u003e RULE_LOOKUP[\"SecurityRuleLookup\"]\n    \n    RULE_LOOKUP --\u003e ALLOW[\"AllowExecution\"]\n    RULE_LOOKUP --\u003e DENY[\"DenyExecution\"]\n    \n    DENY --\u003e LOG_DENIAL[\"LogSecurityDenial\"]\n    ALLOW --\u003e EXECUTE_CMD[\"ExecuteCommand\"]\n```\n\nSources: CHANGELOG.md:122, CHANGELOG.md:153, CHANGELOG.md:327\n\n## Security Groups and Permissions\n\nThe security system maintains **Custom Security Groups** for organizing users with similar permission levels. The framework has migrated away from legacy `SUDO` and `SUPPORT` groups to a more flexible system.\n\n### Permission Management\n\n- **Owner** - Full system access\n- **Custom Groups** - User-defined permission sets  \n- **Everyone** - Public access level\n- **Security bounding masks** - Fine-grained permission control\n\nThe system provides both command-level and inline-level security controls with separate permission mappings.\n\n```mermaid\ngraph LR\n    USER[\"User\"] --\u003e GROUP_CHECK[\"SecurityGroupCheck\"]\n    GROUP_CHECK --\u003e PERMISSION_MAP[\"PermissionMapping\"]\n    PERMISSION_MAP --\u003e ACCESS_DECISION[\"AccessDecision\"]\n    \n    ACCESS_DECISION --\u003e COMMAND_SECURITY[\"CommandSecurity\"]\n    ACCESS_DECISION --\u003e INLINE_SECURITY[\"InlineSecurity\"]\n    \n    COMMAND_SECURITY --\u003e EXECUTE[\"ExecuteCommand\"]\n    INLINE_SECURITY --\u003e INLINE_EXEC[\"ExecuteInline\"]\n```\n\nSources: CHANGELOG.md:120, CHANGELOG.md:125, CHANGELOG.md:154, CHANGELOG.md:854-855\n\n## Message and Communication Security\n\nThe security system protects against various message-based attacks and unauthorized communications.\n\n### Protection Mechanisms\n\n- **Edited channel message security** - Prevents exploitation of message edits\n- **Private message protection** - Safeguards personal conversations  \n- **Command prefix security** - Prevents prefix manipulation attacks\n- **Forward and reply security** - Controls message forwarding behavior\n\nThe system includes comprehensive **watcher tags** for security filtering: `no_pm`, `no_channels`, `no_groups`, `no_inline`, and others for content-type restrictions.\n\n```mermaid\ngraph TB\n    MESSAGE_IN[\"IncomingMessage\"] --\u003e TYPE_CHECK[\"MessageTypeCheck\"]\n    TYPE_CHECK --\u003e CONTENT_FILTER[\"ContentFiltering\"]\n    CONTENT_FILTER --\u003e PERMISSION_CHECK[\"PermissionValidation\"]\n    \n    PERMISSION_CHECK --\u003e PROCESS[\"ProcessMessage\"]\n    PERMISSION_CHECK --\u003e BLOCK[\"BlockMessage\"]\n    \n    BLOCK --\u003e SECURITY_LOG[\"SecurityEventLog\"]\n    PROCESS --\u003e COMMAND_DISPATCH[\"CommandDispatcher\"]\n```\n\nSources: CHANGELOG.md:133, CHANGELOG.md:157, CHANGELOG.md:160\n\n## Configuration and Management\n\nThe security system provides multiple interfaces for configuration and monitoring:\n\n### Management Commands\n\n- `.security` - Core security configuration (owner only by default)\n- `.inlinesec` - Inline security settings (owner only by default)  \n- `.tsec` - Targeted security rules management\n- `.api_fw_protection` - API flood protection toggle\n- `.config APILimiter` - API rate limiting configuration\n\n### Security Logging\n\nThe system maintains comprehensive security logs accessible through the logging infrastructure, tracking security events, blocked attempts, and configuration changes.\n\nSources: CHANGELOG.md:403, CHANGELOG.md:276, CHANGELOG.md:855"])</script><script>self.__next_f.push([1,"20:T2dbc,"])</script><script>self.__next_f.push([1,"# Inline System\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [CHANGELOG.md](CHANGELOG.md)\n\n\u003c/details\u003e\n\n\n\nThe Inline System provides enhanced Telegram user interaction capabilities through button-based interfaces, interactive forms, media galleries, and data presentation components. This system enables rich user experiences beyond simple text-based commands by leveraging Telegram's inline bot features and callback mechanisms.\n\nFor information about command processing and routing, see [Command Dispatcher](#2.3). For security controls and access management, see [Security System](#3).\n\n## Purpose and Architecture\n\nThe inline system transforms static command responses into dynamic, interactive interfaces. It consists of four main components: the InlineManager for core functionality, Forms for button-based interactions, Galleries for media presentation, and Lists for data navigation.\n\n```mermaid\ngraph TB\n    subgraph \"User Interface Layer\"\n        TG_USER[\"Telegram User\"]\n        BOT_INTERFACE[\"Inline Bot Interface\"]\n    end\n    \n    subgraph \"Inline System Core\"\n        INLINE_MGR[\"InlineManager\"]\n        INLINE_PROC[\"Inline Processor\"]\n        MARKUP_GEN[\"Markup Generator\"]\n        CALLBACK_HANDLER[\"Callback Handler\"]\n    end\n    \n    subgraph \"Interactive Components\"\n        FORMS[\"Forms\"]\n        GALLERIES[\"Galleries\"] \n        LISTS[\"Lists\"]\n        CUSTOM_MAP[\"Custom Map\"]\n    end\n    \n    subgraph \"Security and Validation\"\n        INLINE_SEC[\"Inline Security\"]\n        VALIDATOR[\"URL Validator\"]\n        PERMISSION_CHECK[\"Permission Checker\"]\n    end\n    \n    subgraph \"Integration Layer\"\n        DISPATCHER[\"Core Dispatcher\"]\n        SECURITY_SYS[\"Security System\"]\n        MODULE_SYS[\"Module System\"]\n    end\n    \n    TG_USER --\u003e BOT_INTERFACE\n    BOT_INTERFACE --\u003e INLINE_PROC\n    INLINE_PROC --\u003e INLINE_MGR\n    \n    INLINE_MGR --\u003e FORMS\n    INLINE_MGR --\u003e GALLERIES\n    INLINE_MGR --\u003e LISTS\n    INLINE_MGR --\u003e CUSTOM_MAP\n    \n    INLINE_MGR --\u003e MARKUP_GEN\n    MARKUP_GEN --\u003e CALLBACK_HANDLER\n    \n    INLINE_SEC --\u003e VALIDATOR\n    INLINE_SEC --\u003e PERMISSION_CHECK\n    \n    INLINE_MGR --\u003e DISPATCHER\n    INLINE_SEC --\u003e SECURITY_SYS\n    CALLBACK_HANDLER --\u003e MODULE_SYS\n    \n    style INLINE_MGR fill:#f9f9f9\n    style FORMS fill:#e3f2fd\n    style GALLERIES fill:#e8f5e8\n    style LISTS fill:#fff3e0\n```\n\n**Inline System Architecture Overview**\n\nThis diagram shows how user interactions flow from Telegram through the inline bot interface into the core inline management system, which coordinates with interactive components and integrates with the broader security and module systems.\n\nSources: [CHANGELOG.md:939-941](), [CHANGELOG.md:194](), [CHANGELOG.md:761-762]()\n\n## Core Components Integration\n\nThe inline system integrates tightly with the core dispatcher and security systems to provide seamless user experiences while maintaining proper access controls.\n\n```mermaid\nsequenceDiagram\n    participant User as \"Telegram User\"\n    participant Bot as \"Inline Bot\"\n    participant InlineProc as \"Inline Processor\" \n    participant InlineMgr as \"InlineManager\"\n    participant Security as \"Inline Security\"\n    participant CallbackH as \"Callback Handler\"\n    participant Module as \"User Module\"\n    \n    Note over User,Module: Inline Query Processing\n    User-\u003e\u003eBot: Send inline query\n    Bot-\u003e\u003eInlineProc: Process query\n    InlineProc-\u003e\u003eSecurity: Check permissions\n    Security-\u003e\u003eInlineMgr: Validate access\n    InlineMgr-\u003e\u003eModule: Execute inline handler\n    Module-\u003e\u003eInlineMgr: Return inline result\n    InlineMgr-\u003e\u003eBot: Send formatted response\n    Bot-\u003e\u003eUser: Display inline results\n    \n    Note over User,Module: Callback Processing  \n    User-\u003e\u003eBot: Click inline button\n    Bot-\u003e\u003eCallbackH: Process callback\n    CallbackH-\u003e\u003eSecurity: Validate callback security\n    Security-\u003e\u003eInlineMgr: Check permissions\n    InlineMgr-\u003e\u003eModule: Execute callback handler\n    Module-\u003e\u003eInlineMgr: Return updated content\n    InlineMgr-\u003e\u003eBot: Edit message\n    Bot-\u003e\u003eUser: Update interface\n```\n\n**Inline Interaction Flow**\n\nThis sequence diagram illustrates the complete flow from user interaction through security validation to module execution and response delivery.\n\nSources: [CHANGELOG.md:898-899](), [CHANGELOG.md:837](), [CHANGELOG.md:781-782]()\n\n## Interactive Component Types\n\nThe inline system provides three primary interactive component types, each optimized for specific use cases and user interaction patterns.\n\n| Component | Purpose | Key Features | Use Cases |\n|-----------|---------|--------------|-----------|\n| `Forms` | Button-based interactions | Photo support, media editing, TTL control | Configuration interfaces, data input |\n| `Galleries` | Media presentation | Slideshow, memoization, navigation | Image browsing, media management |\n| `Lists` | Data presentation | Custom buttons, pagination, search | Command output, data browsing |\n\n### Form Components\n\nForms provide interactive button-based interfaces with support for media attachments and dynamic content updates.\n\n```mermaid\ngraph LR\n    subgraph \"Form Features\"\n        PHOTO[\"Photo Support\"]\n        MEDIA_EDIT[\"Media Editing\"]\n        TTL[\"TTL Control\"]\n        SILENT[\"Silent Mode\"]\n    end\n    \n    subgraph \"Media Types\"\n        GIF[\"GIF\"]\n        FILE[\"File\"]\n        VIDEO[\"Video\"] \n        AUDIO[\"Audio\"]\n        LOCATION[\"Location\"]\n    end\n    \n    subgraph \"Form Management\"\n        AUTO_PATCH[\"Auto Patch Markup\"]\n        DISABLE_SEC[\"Security Override\"]\n        CALLBACK_MAP[\"Callback Mapping\"]\n    end\n    \n    PHOTO --\u003e MEDIA_EDIT\n    MEDIA_EDIT --\u003e GIF\n    MEDIA_EDIT --\u003e FILE\n    MEDIA_EDIT --\u003e VIDEO\n    MEDIA_EDIT --\u003e AUDIO\n    MEDIA_EDIT --\u003e LOCATION\n    \n    TTL --\u003e AUTO_PATCH\n    SILENT --\u003e DISABLE_SEC\n    AUTO_PATCH --\u003e CALLBACK_MAP\n```\n\n**Form Component Architecture**\n\nSources: [CHANGELOG.md:842-843](), [CHANGELOG.md:605](), [CHANGELOG.md:555](), [CHANGELOG.md:402-403]()\n\n### Gallery Components\n\nGalleries handle media presentation with advanced features like slideshow functionality and state memoization.\n\n```mermaid\ngraph TB\n    subgraph \"Gallery Core\"\n        GALLERY_BASE[\"Gallery Base\"]\n        SLIDESHOW[\"Slideshow Engine\"]\n        MEMOIZATION[\"State Memoization\"]\n    end\n    \n    subgraph \"Navigation Features\"\n        BACK_BTN[\"Back Button\"]\n        PRELOAD[\"Preloading\"]\n        SCROLL_STATE[\"Scroll State\"]\n    end\n    \n    subgraph \"Media Support\"\n        IMG_SUPPORT[\"Image Support\"]\n        GIF_SUPPORT[\"GIF Support\"] \n        CAPTION[\"Caption Management\"]\n    end\n    \n    subgraph \"Query Integration\"\n        QUERY_GALLERY[\"Query Gallery\"]\n        INLINE_QUERY[\"Inline Query Result\"]\n        E404[\"E404 Handler\"]\n    end\n    \n    GALLERY_BASE --\u003e SLIDESHOW\n    GALLERY_BASE --\u003e MEMOIZATION\n    \n    SLIDESHOW --\u003e BACK_BTN\n    SLIDESHOW --\u003e PRELOAD\n    MEMOIZATION --\u003e SCROLL_STATE\n    \n    GALLERY_BASE --\u003e IMG_SUPPORT\n    IMG_SUPPORT --\u003e GIF_SUPPORT\n    GIF_SUPPORT --\u003e CAPTION\n    \n    GALLERY_BASE --\u003e QUERY_GALLERY\n    QUERY_GALLERY --\u003e INLINE_QUERY\n    INLINE_QUERY --\u003e E404\n```\n\n**Gallery Component Architecture**\n\nSources: [CHANGELOG.md:951](), [CHANGELOG.md:960](), [CHANGELOG.md:913](), [CHANGELOG.md:929-930](), [CHANGELOG.md:934-935]()\n\n## Security and Permissions\n\nThe inline system implements comprehensive security controls to manage access to interactive components and prevent unauthorized usage.\n\n```mermaid\ngraph TD\n    subgraph \"Security Levels\"\n        OWNER[\"Owner Only\"]\n        SUDO[\"Sudo Access\"] \n        SUPPORT[\"Support Access\"]\n        EVERYONE[\"Everyone Access\"]\n    end\n    \n    subgraph \"Security Decorators\"\n        LOADER_INLINE[\"@loader.inline_everyone\"]\n        DISABLE_SEC[\"disable_security\"]\n        ALWAYS_ALLOW[\"always_allow\"]\n    end\n    \n    subgraph \"Validation Systems\"\n        URL_VALID[\"URL Validator\"]\n        CALLBACK_VALID[\"Callback Validator\"]\n        PERMISSION_INHERIT[\"Permission Inheritance\"]\n    end\n    \n    subgraph \"Security Context\"\n        CALLER_FIELD[\"Caller Field\"]\n        SEC_MAP[\"Security Map\"]\n        TARGETED_SEC[\"Targeted Security\"]\n    end\n    \n    OWNER --\u003e LOADER_INLINE\n    SUDO --\u003e DISABLE_SEC\n    SUPPORT --\u003e ALWAYS_ALLOW\n    EVERYONE --\u003e ALWAYS_ALLOW\n    \n    LOADER_INLINE --\u003e URL_VALID\n    DISABLE_SEC --\u003e CALLBACK_VALID\n    ALWAYS_ALLOW --\u003e PERMISSION_INHERIT\n    \n    URL_VALID --\u003e CALLER_FIELD\n    CALLBACK_VALID --\u003e SEC_MAP\n    PERMISSION_INHERIT --\u003e TARGETED_SEC\n```\n\n**Inline Security Architecture**\n\nSources: [CHANGELOG.md:837](), [CHANGELOG.md:898-899](), [CHANGELOG.md:858](), [CHANGELOG.md:924](), [CHANGELOG.md:194]()\n\n## Message and Markup Processing\n\nThe inline system provides sophisticated markup generation and message processing capabilities that handle various button types and callback mechanisms.\n\n### Markup Generation Pipeline\n\n```mermaid\nflowchart TD\n    INPUT[\"Button Configuration\"]\n    PARSER[\"Markup Parser\"]\n    VALIDATOR[\"Format Validator\"]\n    GENERATOR[\"Markup Generator\"]\n    CALLBACK_SETUP[\"Callback Setup\"]\n    OUTPUT[\"Telegram Markup\"]\n    \n    INPUT --\u003e PARSER\n    PARSER --\u003e VALIDATOR\n    VALIDATOR --\u003e GENERATOR\n    GENERATOR --\u003e CALLBACK_SETUP\n    CALLBACK_SETUP --\u003e OUTPUT\n    \n    subgraph \"Button Types\"\n        URL_BTN[\"URL Buttons\"]\n        CALLBACK_BTN[\"Callback Buttons\"] \n        SWITCH_INLINE[\"Switch Inline\"]\n        WEBAPP[\"Web App\"]\n    end\n    \n    subgraph \"Processing Features\"\n        AUTO_CALLBACK[\"Auto Callback Hooks\"]\n        CUSTOM_MAP[\"Custom Map Integration\"]\n        REPLY_MARKUP[\"Reply Markup Field\"]\n    end\n    \n    VALIDATOR --\u003e URL_BTN\n    VALIDATOR --\u003e CALLBACK_BTN\n    VALIDATOR --\u003e SWITCH_INLINE\n    VALIDATOR --\u003e WEBAPP\n    \n    GENERATOR --\u003e AUTO_CALLBACK\n    AUTO_CALLBACK --\u003e CUSTOM_MAP\n    CUSTOM_MAP --\u003e REPLY_MARKUP\n```\n\n**Markup Generation and Processing**\n\nSources: [CHANGELOG.md:761-762](), [CHANGELOG.md:882-883](), [CHANGELOG.md:844](), [CHANGELOG.md:68]()\n\n## Integration with Module System\n\nThe inline system seamlessly integrates with the broader module ecosystem, providing developers with powerful tools for creating interactive user experiences.\n\n```mermaid\ngraph TB\n    subgraph \"Module Integration Points\"\n        INLINE_HANDLERS[\"Inline Handlers\"]\n        CALLBACK_HANDLERS[\"Callback Handlers\"]\n        MODULE_METHODS[\"Module Methods\"]\n    end\n    \n    subgraph \"Developer APIs\"\n        SELF_INLINE[\"self.inline\"]\n        UTILS_ANSWER[\"utils.answer\"]\n        REPLY_MARKUP[\"reply_markup\"]\n    end\n    \n    subgraph \"Response Processing\"\n        LARGE_OUTPUT[\"Large Output Handling\"]\n        SMART_SPLIT[\"Smart Split\"] \n        AUTO_LIST[\"Auto List Creation\"]\n    end\n    \n    subgraph \"Error Handling\"\n        MEANINGFUL_ERRORS[\"Meaningful Errors\"]\n        EXCEPTION_PROP[\"Exception Propagation\"]\n        ERROR_MESSAGES[\"Error Messages\"]\n    end\n    \n    INLINE_HANDLERS --\u003e SELF_INLINE\n    CALLBACK_HANDLERS --\u003e UTILS_ANSWER\n    MODULE_METHODS --\u003e REPLY_MARKUP\n    \n    UTILS_ANSWER --\u003e LARGE_OUTPUT\n    LARGE_OUTPUT --\u003e SMART_SPLIT\n    SMART_SPLIT --\u003e AUTO_LIST\n    \n    SELF_INLINE --\u003e MEANINGFUL_ERRORS\n    MEANINGFUL_ERRORS --\u003e EXCEPTION_PROP\n    EXCEPTION_PROP --\u003e ERROR_MESSAGES\n```\n\n**Module System Integration**\n\nSources: [CHANGELOG.md:498](), [CHANGELOG.md:854](), [CHANGELOG.md:553-554](), [CHANGELOG.md:99]()\n\nThe inline system represents a comprehensive solution for creating rich, interactive Telegram bot experiences. It provides developers with the tools needed to build sophisticated user interfaces while maintaining security and performance standards. The system's modular architecture allows for easy extension and customization while ensuring consistent behavior across all interactive components."])</script><script>self.__next_f.push([1,"21:T3419,"])</script><script>self.__next_f.push([1,"# Inline Manager\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [CHANGELOG.md](CHANGELOG.md)\n\n\u003c/details\u003e\n\n\n\n## Purpose\n\nThe Inline Manager is a core component of the Heroku Telegram userbot framework that handles all inline interaction functionality. It creates and manages a Telegram bot to support interactive inline UI elements like forms, galleries, and lists. This system enables users to interact with the userbot through inline queries and callback buttons, providing a rich interactive experience within Telegram chats.\n\nFor more information about specific UI components that are built on top of the Inline Manager, see:\n- Forms [4.2](#4.2)\n- Galleries [4.3](#4.3) \n- Lists [4.4](#4.4)\n\n## Architecture Overview\n\nThe Inline Manager system consists of several specialized components that work together to provide comprehensive inline interaction capabilities:\n\n```mermaid\ngraph TD\n    IM[\"InlineManager\"] --\u003e Bot[\"Inline Bot Instance\"]\n    IM --\u003e Events[\"Event Handlers\"]\n    IM --\u003e Security[\"Security System\"]\n    IM --\u003e Units[\"UI Units\"]\n    \n    Bot --\u003e Profile[\"/profile command\"]\n    Bot --\u003e Help[\"Inline Help System\"]\n    Bot --\u003e WebApp[\"WebApp Support\"]\n    \n    Events --\u003e Queries[\"Inline Queries\"]\n    Events --\u003e Callbacks[\"Callback Handlers\"]\n    Events --\u003e Messages[\"Message Processing\"]\n    \n    Security --\u003e Permissions[\"Permission Checks\"]\n    Security --\u003e Groups[\"Security Groups\"]\n    Security --\u003e Rules[\"Inline Security Rules\"]\n    \n    Units --\u003e Forms[\"Interactive Forms\"]\n    Units --\u003e Galleries[\"Image Galleries\"]\n    Units --\u003e Lists[\"Data Lists\"]\n    Units --\u003e Buttons[\"InlineKeyboardButton\"]\n```\n\nSources: [CHANGELOG.md:10](), [CHANGELOG.md:41](), [CHANGELOG.md:60](), [CHANGELOG.md:85]()\n\n## Core Components\n\nThe Inline Manager provides a comprehensive inline interaction system with the following core components:\n\n| Component | Purpose |\n|-----------|---------|\n| **Inline Bot** | Dedicated Telegram bot for handling inline queries and interactions |\n| **Event System** | Processes inline queries, callback queries, and message events |\n| **Security Layer** | Enforces permissions and security rules for inline interactions |\n| **UI Units** | Manages interactive forms, galleries, lists, and custom buttons |\n| **Profile System** | Provides `/profile` command functionality in the inline bot |\n| **Help System** | Delivers contextual help through inline queries |\n| **WebApp Integration** | Supports WebApp functionality in inline keyboards |\n\nSources: [CHANGELOG.md:10](), [CHANGELOG.md:60](), [CHANGELOG.md:85](), [CHANGELOG.md:807-808]()\n\n## Bot Setup and Configuration\n\nThe Inline Manager handles bot creation and configuration through the web setup interface:\n\n```mermaid\nsequenceDiagram\n    participant User as \"User\"\n    participant Web as \"Web Interface\"\n    participant IM as \"InlineManager\"\n    participant BF as \"@BotFather\"\n    participant Bot as \"Inline Bot\"\n    \n    User-\u003e\u003eWeb: Access setup interface\n    Web-\u003e\u003eUser: Display bot username option\n    User-\u003e\u003eWeb: Set custom bot username\n    Web-\u003e\u003eIM: Configure bot settings\n    \n    IM-\u003e\u003eBF: Create/validate bot\n    BF-\u003e\u003eIM: Return bot token\n    IM-\u003e\u003eBot: Initialize bot instance\n    \n    Bot-\u003e\u003eBot: Register event handlers\n    Bot-\u003e\u003eBot: Configure inline settings\n    Bot-\u003e\u003eBot: Setup profile command\n    \n    IM-\u003e\u003eWeb: Confirm bot ready\n    Web-\u003e\u003eUser: Bot configured successfully\n```\n\nSources: [CHANGELOG.md:807]()\n\nThe initialization process includes:\n1. **Web Interface Setup**: Users can configure the inline bot username during initial setup\n2. **Bot Token Management**: Automatic creation and validation of bot tokens with @BotFather\n3. **Handler Registration**: Registration of inline query, callback query, and message handlers\n4. **Profile Command Setup**: Configuration of the `/profile` command for the inline bot\n5. **Security Configuration**: Application of inline security rules and permission checks\n\n## Inline Bot Features\n\nThe inline bot provides several key features for user interaction:\n\n```mermaid\nflowchart TD\n    InlineBot[\"Inline Bot\"] --\u003e Profile[\"/profile Command\"]\n    InlineBot --\u003e Help[\"Inline Help System\"]\n    InlineBot --\u003e WebApp[\"WebApp Support\"]\n    InlineBot --\u003e Security[\"Security Integration\"]\n    \n    Profile --\u003e UserInfo[\"Display user information\"]\n    Profile --\u003e ModuleStats[\"Show module statistics\"]\n    \n    Help --\u003e ModuleHelp[\"Module-specific help\"]\n    Help --\u003e CommandHelp[\"Command documentation\"]\n    \n    WebApp --\u003e Buttons[\"WebApp Buttons\"]\n    WebApp --\u003e Integration[\"External app integration\"]\n    \n    Security --\u003e Permissions[\"User permission checks\"]\n    Security --\u003e Groups[\"Security group validation\"]\n```\n\nSources: [CHANGELOG.md:10](), [CHANGELOG.md:85](), [CHANGELOG.md:808]()\n\n### Profile Command System\nThe `/profile` command in the inline bot provides users with:\n- **User Information**: Display of current user details and statistics\n- **Module Status**: Information about loaded modules and their configurations\n- **System Status**: Current framework version and platform information\n\n### WebApp Integration\nThe inline system supports WebApp functionality through:\n- **WebApp Buttons**: `InlineKeyboardButton` elements that can launch web applications\n- **External Integration**: Seamless connection between Telegram and external web services\n- **Enhanced UI**: Rich interactive experiences beyond traditional bot interfaces\n\n## Event Processing\n\n### Inline Query Processing\n\nThe inline system processes user queries through a structured pipeline:\n\n```mermaid\nflowchart TD\n    User[\"User types @bot query\"] --\u003e Query[\"Inline Query Event\"]\n    \n    Query --\u003e Parse[\"Parse Query\"]\n    Parse --\u003e Empty{\"Empty\\nquery?\"}\n    \n    Empty --\u003e|\"Yes\"| Help[\"Show help results\"]\n    Empty --\u003e|\"No\"| Command[\"Extract command\"]\n    \n    Command --\u003e Module[\"Find module handler\"]\n    Module --\u003e Security[\"Security validation\"]\n    \n    Security --\u003e|\"Pass\"| Execute[\"Execute handler\"]\n    Security --\u003e|\"Fail\"| Deny[\"Access denied\"]\n    \n    Execute --\u003e Format[\"Format results\"]\n    Format --\u003e Response[\"Send inline results\"]\n    \n    Help --\u003e Response\n    Deny --\u003e ErrorMsg[\"Error message\"]\n```\n\nSources: [CHANGELOG.md:808]()\n\n### Button Interaction Handling\n\nInteractive buttons in inline interfaces are processed through callback queries:\n\n```mermaid\nflowchart TD\n    Button[\"User clicks button\"] --\u003e Callback[\"Callback Query\"]\n    \n    Callback --\u003e Type{\"Button\\ntype?\"}\n    \n    Type --\u003e|\"Form\"| FormHandler[\"Form interaction\"]\n    Type --\u003e|\"Gallery\"| GalleryHandler[\"Gallery navigation\"]\n    Type --\u003e|\"List\"| ListHandler[\"List selection\"]\n    Type --\u003e|\"Custom\"| CustomHandler[\"Custom callback\"]\n    \n    FormHandler --\u003e SecurityCheck[\"Security validation\"]\n    GalleryHandler --\u003e SecurityCheck\n    ListHandler --\u003e SecurityCheck\n    CustomHandler --\u003e SecurityCheck\n    \n    SecurityCheck --\u003e|\"Pass\"| Process[\"Process action\"]\n    SecurityCheck --\u003e|\"Fail\"| Block[\"Block action\"]\n    \n    Process --\u003e Update[\"Update interface\"]\n    Block --\u003e NoChange[\"No change\"]\n```\n\nSources: [CHANGELOG.md:41](), [CHANGELOG.md:85]()\n\n## UI Unit Management\n\nThe Inline Manager maintains interactive UI components that provide rich user experiences:\n\n```mermaid\ngraph TD\n    UISystem[\"UI Unit System\"] --\u003e Forms[\"Interactive Forms\"]\n    UISystem --\u003e Galleries[\"Image Galleries\"]\n    UISystem --\u003e Lists[\"Data Lists\"]\n    UISystem --\u003e Buttons[\"Custom Buttons\"]\n    \n    Forms --\u003e FormElements[\"Input fields, validation, submission\"]\n    Galleries --\u003e GalleryFeatures[\"Navigation, captions, media\"]\n    Lists --\u003e ListFeatures[\"Selection, pagination, filtering\"]\n    Buttons --\u003e ButtonFeatures[\"WebApp support, callbacks, actions\"]\n    \n    UISystem --\u003e Management[\"Unit Management\"]\n    Management --\u003e Lifecycle[\"Creation and cleanup\"]\n    Management --\u003e State[\"State persistence\"]\n    Management --\u003e Events[\"Event handling\"]\n```\n\nSources: [CHANGELOG.md:41](), [CHANGELOG.md:85]()\n\n### Unit Characteristics\n\nEach UI unit in the system includes:\n\n| Feature | Description |\n|---------|-------------|\n| **Unique Identification** | Each unit has a distinct identifier for tracking and management |\n| **Interactive Elements** | Buttons, inputs, and navigation controls with callback handling |\n| **Security Integration** | Permission checks and access control at the unit level |\n| **State Management** | Persistent state across user interactions |\n| **Automatic Cleanup** | Memory management and expired unit removal |\n| **WebApp Support** | Integration with external web applications through specialized buttons |\n\n### Message Handling Improvements\n\nThe system includes fixes for asynchronous message handling to prevent common issues:\n- **Awaited Messages**: Resolution of `\"bot.inline.send.message is never awaited\"` errors\n- **Button Responsiveness**: Improved reliability of button interactions\n- **Error Handling**: Better error reporting and recovery for failed interactions\n\n## Security Framework\n\nThe inline system implements comprehensive security measures to protect user interactions and prevent unauthorized access:\n\n```mermaid\nflowchart TD\n    Security[\"Inline Security System\"] --\u003e Rules[\"Targeted Security Rules\"]\n    Security --\u003e Groups[\"Security Groups\"]\n    Security --\u003e Permissions[\"Permission Validation\"]\n    \n    Rules --\u003e Commands[\"Inline command restrictions\"]\n    Rules --\u003e Users[\"User-specific access control\"]\n    Rules --\u003e Chats[\"Chat-based permissions\"]\n    \n    Groups --\u003e Owner[\"Owner privileges\"]\n    Groups --\u003e Sudo[\"Sudo access level\"]\n    Groups --\u003e Support[\"Support permissions\"]\n    Groups --\u003e Custom[\"Custom security groups\"]\n    \n    Permissions --\u003e Validate[\"Real-time validation\"]\n    Permissions --\u003e Block[\"Access blocking\"]\n    Permissions --\u003e Audit[\"Security logging\"]\n```\n\nSources: [CHANGELOG.md:120](), [CHANGELOG.md:153]()\n\n### Security Features\n\nThe inline security system provides multiple layers of protection:\n\n| Security Layer | Functionality |\n|----------------|---------------|\n| **Targeted Security Rules** | Custom rules for specific inline commands and user interactions |\n| **Custom Security Groups** | Flexible permission groups beyond default owner/sudo/support levels |\n| **Command-Level Security** | Individual command access control in inline mode |\n| **Real-Time Validation** | Immediate permission checks for all inline interactions |\n| **Automatic NoNick** | Automatic no-nickname mode for security-sensitive operations |\n\n### Inline Command Security\n\nThe framework includes specialized security controls for inline commands:\n- **Inline Commands Targeted Security Rules Control**: Granular permission management for specific inline functions\n- **Custom Security Groups**: Ability to create and manage custom permission levels\n- **Access Logging**: Comprehensive logging of security events and access attempts\n\n## System Integration\n\n### Module Integration\n\nModules can seamlessly integrate with the inline system to provide enhanced user interactions:\n\n```mermaid\ngraph TD\n    Module[\"User Module\"] --\u003e Decorators[\"@loader decorators\"]\n    Decorators --\u003e InlineHandler[\"@loader.inline_handler\"]\n    Decorators --\u003e CallbackHandler[\"@loader.callback_handler\"]\n    \n    InlineHandler --\u003e Registration[\"Register with InlineManager\"]\n    CallbackHandler --\u003e Registration\n    \n    Registration --\u003e QueryProcessing[\"Inline query processing\"]\n    Registration --\u003e ButtonHandling[\"Button callback handling\"]\n    \n    QueryProcessing --\u003e Results[\"Formatted inline results\"]\n    ButtonHandling --\u003e Actions[\"UI state changes\"]\n```\n\nSources: [CHANGELOG.md:409]()\n\n### Framework Integration Points\n\nThe inline system integrates with several framework components:\n\n| Integration Point | Purpose |\n|-------------------|---------|\n| **Module System** | Automatic registration of inline handlers from user modules |\n| **Security System** | Permission validation for all inline interactions |\n| **Database System** | State persistence and configuration storage |\n| **Translation System** | Multilingual support for inline interfaces |\n| **Help System** | Dynamic help generation for inline commands |\n| **Web Interface** | Bot configuration through the web setup interface |\n\n## Integration with Modules\n\nModules can register inline handlers that are triggered by specific commands in inline queries:\n\n```mermaid\ngraph TD\n    Module[\"Module with @loader.inline\"] --\u003e Register[\"Register with InlineManager\"]\n    Register --\u003e InlineHandlers[\"_allmodules.inline_handlers\"]\n    \n    User[\"User types @bot cmd\"] --\u003e Query[\"InlineQuery\"]\n    Query --\u003e InlineHandler[\"_inline_handler()\"]\n    InlineHandler --\u003e LookupCmd[\"Look up command\"]\n    LookupCmd --\u003e Security[\"Security check\"]\n    Security --\u003e ExecuteHandler[\"Execute module's handler\"]\n    ExecuteHandler --\u003e Results[\"Return formatted results\"]\n```\n\nSources: [heroku/inline/events.py:50-205]()\n\n## Conclusion\n\nThe Inline Manager is a sophisticated system that provides the foundation for all interactive inline elements in the Heroku Telegram Userbot. It handles token management, event processing, security, and unit management to create a seamless interactive experience for users.\n\nFor more information about specific components built on top of the Inline Manager:\n- Forms [4.2](#4.2)\n- Galleries [4.3](#4.3)\n- Lists [4.4](#4.4)"])</script><script>self.__next_f.push([1,"22:T280c,"])</script><script>self.__next_f.push([1,"# Forms\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [CHANGELOG.md](CHANGELOG.md)\n\n\u003c/details\u003e\n\n\n\nForms provide an interactive button-based user interface system within the Heroku Telegram userbot framework. They enable modules to create rich, interactive messages with clickable buttons, media content, and real-time editing capabilities. Forms are a core component of the inline system that allows users to interact with the userbot through intuitive graphical interfaces rather than text commands.\n\nFor information about the broader inline system architecture, see [Inline System](#4). For gallery-based interfaces, see [Galleries](#4.3). For list-based displays, see [Lists](#4.4).\n\n## System Overview\n\nThe Forms system operates as part of the inline infrastructure, providing developers with tools to create interactive Telegram messages that can contain buttons, media, and dynamic content. Forms support real-time editing, security controls, and various media types.\n\n```mermaid\ngraph TB\n    subgraph \"Form Creation Layer\"\n        MODULE[\"Module Code\"]\n        FORM_CALL[\"inline.form()\"]\n        FORM_CONFIG[\"Form Configuration\"]\n    end\n    \n    subgraph \"Form Processing Core\"\n        FORM_MANAGER[\"Form Manager\"]\n        MARKUP_GEN[\"Markup Generator\"]\n        MEDIA_PROC[\"Media Processor\"]\n        SECURITY_CHECK[\"Security Validator\"]\n    end\n    \n    subgraph \"Telegram Interface\"\n        INLINE_BOT[\"Inline Bot\"]\n        CALLBACK_HANDLER[\"Callback Handler\"]\n        MESSAGE_EDIT[\"Message Editor\"]\n    end\n    \n    subgraph \"User Interaction\"\n        USER_CLICK[\"Button Click\"]\n        CALL_EDIT[\"call.edit()\"]\n        FORM_UPDATE[\"Form Update\"]\n    end\n    \n    MODULE --\u003e FORM_CALL\n    FORM_CALL --\u003e FORM_CONFIG\n    FORM_CONFIG --\u003e FORM_MANAGER\n    \n    FORM_MANAGER --\u003e MARKUP_GEN\n    FORM_MANAGER --\u003e MEDIA_PROC\n    FORM_MANAGER --\u003e SECURITY_CHECK\n    \n    MARKUP_GEN --\u003e INLINE_BOT\n    MEDIA_PROC --\u003e INLINE_BOT\n    SECURITY_CHECK --\u003e CALLBACK_HANDLER\n    \n    INLINE_BOT --\u003e USER_CLICK\n    USER_CLICK --\u003e CALLBACK_HANDLER\n    CALLBACK_HANDLER --\u003e CALL_EDIT\n    CALL_EDIT --\u003e FORM_UPDATE\n    FORM_UPDATE --\u003e MESSAGE_EDIT\n```\n\n*Sources: CHANGELOG.md:419-420, CHANGELOG.md:571, CHANGELOG.md:622*\n\n## Form Lifecycle and Management\n\nForms follow a structured lifecycle from creation to automatic cleanup, with built-in memory management and timeout handling.\n\n```mermaid\nflowchart TD\n    CREATE[\"Form Creation\u003cbr/\u003einline.form()\"]\n    VALIDATE[\"Security Validation\u003cbr/\u003edisable_security check\"]\n    GENERATE[\"Markup Generation\u003cbr/\u003e_generate_markup\"]\n    SEND[\"Send to Telegram\u003cbr/\u003eInline Bot\"]\n    \n    ACTIVE[\"Form Active State\u003cbr/\u003e10 minute TTL\"]\n    INTERACT[\"User Interaction\u003cbr/\u003eButton Callbacks\"]\n    EDIT[\"Form Editing\u003cbr/\u003ecall.edit()\"]\n    \n    TIMEOUT[\"Timeout Reached\"]\n    MANUAL_CLOSE[\"Manual Close\u003cbr/\u003eaction: close\"]\n    UNLOAD[\"Memory Cleanup\u003cbr/\u003eaction: unload\"]\n    \n    CREATE --\u003e VALIDATE\n    VALIDATE --\u003e GENERATE\n    GENERATE --\u003e SEND\n    SEND --\u003e ACTIVE\n    \n    ACTIVE --\u003e INTERACT\n    INTERACT --\u003e EDIT\n    EDIT --\u003e ACTIVE\n    \n    ACTIVE --\u003e TIMEOUT\n    INTERACT --\u003e MANUAL_CLOSE\n    INTERACT --\u003e UNLOAD\n    \n    TIMEOUT --\u003e UNLOAD\n    MANUAL_CLOSE --\u003e UNLOAD\n```\n\n*Sources: CHANGELOG.md:419-420, CHANGELOG.md:875*\n\n## Button System and Actions\n\nForms support a comprehensive button system with built-in actions and custom callback handling. Buttons can trigger various predefined actions or execute custom module code.\n\n| Button Action | Purpose | Behavior |\n|---------------|---------|----------|\n| `close` | Close form interface | Closes the form but keeps it in memory |\n| `unload` | Remove from memory | Completely unloads the form from memory |\n| `answer` | Show callback response | Displays text response to user |\n| Custom callback | Execute module code | Triggers developer-defined function |\n\n```mermaid\ngraph LR\n    subgraph \"Button Configuration\"\n        BTN_TEXT[\"Button Text\"]\n        BTN_ACTION[\"Button Action\"]\n        BTN_CALLBACK[\"Custom Callback\"]\n        BTN_SECURITY[\"Security Level\"]\n    end\n    \n    subgraph \"Action Processing\"\n        ACTION_CLOSE[\"action: close\"]\n        ACTION_UNLOAD[\"action: unload\"] \n        ACTION_ANSWER[\"action: answer\"]\n        CUSTOM_MAP[\"_custom_map handler\"]\n    end\n    \n    subgraph \"Response Generation\"\n        CALLBACK_QUERY[\"Callback Query Answer\"]\n        FORM_CLOSE[\"Form Closure\"]\n        MEMORY_CLEANUP[\"Memory Cleanup\"]\n        CUSTOM_RESPONSE[\"Custom Module Response\"]\n    end\n    \n    BTN_ACTION --\u003e ACTION_CLOSE\n    BTN_ACTION --\u003e ACTION_UNLOAD\n    BTN_ACTION --\u003e ACTION_ANSWER\n    BTN_CALLBACK --\u003e CUSTOM_MAP\n    \n    ACTION_CLOSE --\u003e FORM_CLOSE\n    ACTION_UNLOAD --\u003e MEMORY_CLEANUP\n    ACTION_ANSWER --\u003e CALLBACK_QUERY\n    CUSTOM_MAP --\u003e CUSTOM_RESPONSE\n```\n\n*Sources: CHANGELOG.md:550, CHANGELOG.md:798-799*\n\n## Media Support and Content Types\n\nForms provide comprehensive media support, allowing developers to include various types of content within interactive interfaces.\n\n```mermaid\ngraph TB\n    subgraph \"Supported Media Types\"\n        PHOTO[\"photo\"]\n        VIDEO[\"video\"] \n        AUDIO[\"audio\"]\n        GIF[\"gif\"]\n        FILE[\"file\"]\n        LOCATION[\"location\"]\n    end\n    \n    subgraph \"Media Processing\"\n        MIME_TYPE[\"mime_type detection\"]\n        METADATA[\"Audio metadata\"]\n        AUTO_GIF[\"Automatic gif conversion\"]\n        FAST_UPLOAD[\"Fast uploader integration\"]\n    end\n    \n    subgraph \"Form Integration\"\n        FORM_PARAM[\"Form parameter\"]\n        EDIT_SUPPORT[\"call.edit() support\"]\n        MEDIA_UPDATE[\"Runtime media update\"]\n    end\n    \n    PHOTO --\u003e MIME_TYPE\n    VIDEO --\u003e AUTO_GIF\n    AUDIO --\u003e METADATA\n    FILE --\u003e MIME_TYPE\n    \n    MIME_TYPE --\u003e FORM_PARAM\n    METADATA --\u003e FORM_PARAM\n    AUTO_GIF --\u003e FORM_PARAM\n    \n    FORM_PARAM --\u003e EDIT_SUPPORT\n    EDIT_SUPPORT --\u003e MEDIA_UPDATE\n```\n\n*Sources: CHANGELOG.md:439, CHANGELOG.md:464, CHANGELOG.md:571, CHANGELOG.md:622*\n\n## Security and Access Control\n\nThe Forms system implements comprehensive security controls to manage user access and protect against unauthorized interactions.\n\n```mermaid\ngraph TD\n    subgraph \"Security Levels\"\n        OWNER[\"owner\"]\n        SUDO[\"sudo\"] \n        SUPPORT[\"support\"]\n        EVERYONE[\"everyone\"]\n        DISABLED[\"disable_security\"]\n    end\n    \n    subgraph \"Permission Inheritance\"\n        CALLER_PERMS[\"Command caller permissions\"]\n        INHERIT_FEAT[\"Permission inheritance\"]\n        FORM_PERMS[\"Form-level permissions\"]\n    end\n    \n    subgraph \"Security Validation\"\n        SEC_CHECK[\"Security check\"]\n        BOUNDING_MASK[\"Bounding mask control\"]\n        ACCESS_DENIED[\"Access denied response\"]\n        ACCESS_GRANTED[\"Access granted\"]\n    end\n    \n    OWNER --\u003e SEC_CHECK\n    SUDO --\u003e SEC_CHECK\n    SUPPORT --\u003e SEC_CHECK  \n    EVERYONE --\u003e SEC_CHECK\n    DISABLED --\u003e ACCESS_GRANTED\n    \n    CALLER_PERMS --\u003e INHERIT_FEAT\n    INHERIT_FEAT --\u003e FORM_PERMS\n    FORM_PERMS --\u003e SEC_CHECK\n    \n    SEC_CHECK --\u003e ACCESS_DENIED\n    SEC_CHECK --\u003e ACCESS_GRANTED\n    SEC_CHECK --\u003e BOUNDING_MASK\n```\n\n*Sources: CHANGELOG.md:875, CHANGELOG.md:941*\n\n## Form Editing and Dynamic Updates\n\nForms support real-time editing capabilities, allowing developers to update content, media, and button configurations without recreating the entire form.\n\n```mermaid\nsequenceDiagram\n    participant M as \"Module\"\n    participant F as \"Form System\" \n    participant C as \"call.edit()\"\n    participant T as \"Telegram API\"\n    \n    M-\u003e\u003eF: Create initial form\n    F-\u003e\u003eT: Send form to user\n    \n    Note over M,T: User interaction occurs\n    \n    M-\u003e\u003eC: call.edit() with updates\n    C-\u003e\u003eC: Validate edit parameters\n    \n    alt Media update\n        C-\u003e\u003eC: Process new media\n        C-\u003e\u003eT: Edit message media\n    else Text/Buttons update  \n        C-\u003e\u003eC: Generate new markup\n        C-\u003e\u003eT: Edit message text/buttons\n    else Combined update\n        C-\u003e\u003eT: Edit both media and markup\n    end\n    \n    T-\u003e\u003eF: Confirm edit success\n    F-\u003e\u003eM: Return updated form state\n```\n\n*Sources: CHANGELOG.md:571, CHANGELOG.md:757*\n\n## Integration with Utils and Helper Functions\n\nThe Forms system integrates closely with the framework's utility functions to provide seamless development experience.\n\n| Utility Function | Purpose | Form Integration |\n|------------------|---------|------------------|\n| `utils.answer` | Send responses | Supports `reply_markup` parameter for buttons |\n| `_generate_markup` | Create button layouts | Core button generation for forms |\n| `utils.get_kwargs` | Extract parameters | Process form configuration arguments |\n| `prepare_callbacks` | Setup callbacks | Enable custom button handlers |\n\n```mermaid\ngraph LR\n    subgraph \"Utils Integration\"\n        UTILS_ANSWER[\"utils.answer()\"]\n        REPLY_MARKUP[\"reply_markup param\"]\n        GEN_MARKUP[\"_generate_markup()\"]\n        PREP_CALLBACKS[\"prepare_callbacks\"]\n    end\n    \n    subgraph \"Form Features\"\n        FORM_BUTTONS[\"Form buttons\"]\n        BUTTON_HANDLER[\"Button handlers\"]\n        CALLBACK_MAP[\"_custom_map\"]\n        INLINE_CALL[\"InlineCall object\"]\n    end\n    \n    UTILS_ANSWER --\u003e REPLY_MARKUP\n    REPLY_MARKUP --\u003e FORM_BUTTONS\n    \n    GEN_MARKUP --\u003e FORM_BUTTONS\n    PREP_CALLBACKS --\u003e BUTTON_HANDLER\n    \n    BUTTON_HANDLER --\u003e CALLBACK_MAP\n    CALLBACK_MAP --\u003e INLINE_CALL\n```\n\n*Sources: CHANGELOG.md:515, CHANGELOG.md:798-799*\n\n## Form Configuration Parameters\n\nForms accept various configuration parameters that control behavior, appearance, and functionality.\n\n| Parameter | Type | Purpose | Default |\n|-----------|------|---------|---------|\n| `text` | str | Form message text | Required |\n| `photo` | File/URL | Image content | None |\n| `video` | File/URL | Video content | None |\n| `audio` | File/URL | Audio content | None |\n| `gif` | File/URL | GIF animation | None |\n| `file` | File | Document attachment | None |\n| `location` | Location | Geographic coordinates | None |\n| `reply_markup` | List | Button configuration | None |\n| `silent` | bool | Send without notification | False |\n| `disable_security` | bool | Bypass security checks | False |\n| `ttl` | int | Time to live (seconds) | 600 |\n\n*Sources: CHANGELOG.md:622, CHANGELOG.md:859-860, CHANGELOG.md:875*"])</script><script>self.__next_f.push([1,"23:T1fed,"])</script><script>self.__next_f.push([1,"# Galleries\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [CHANGELOG.md](CHANGELOG.md)\n\n\u003c/details\u003e\n\n\n\nThe Galleries system provides scrollable image collections in Telegram through the inline bot functionality. It enables users to navigate through multiple media items using interactive buttons, supporting features like slideshow mode, memoization, and security controls. This system is part of the broader inline interface framework that allows rich user interactions within Telegram conversations.\n\nFor information about the core inline management system, see [Inline Manager](#4.1). For button-based interactive forms, see [Forms](#4.2). For structured data display, see [Lists](#4.4).\n\n## Architecture Overview\n\nThe Galleries system operates as a specialized component within the inline system architecture, providing media-focused interactive experiences.\n\n### Gallery System Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Inline System Core\"\n        INLINE_MANAGER[\"InlineManager\"]\n        INLINE_UNIT[\"InlineUnit\"]\n        CUSTOM_MAP[\"_custom_map\"]\n    end\n    \n    subgraph \"Gallery Components\"\n        GALLERY_CLASS[\"Gallery\"]\n        QUERY_GALLERY[\"query_gallery\"]\n        SLIDESHOW[\"slideshow\"]\n        MEMOIZATION[\"Gallery Memoization\"]\n    end\n    \n    subgraph \"Media Processing\"\n        MEDIA_HANDLER[\"Media Handler\"]\n        GIF_SUPPORT[\"GIF Support\"]\n        CAPTION_PROC[\"Caption Processing\"]\n        PRELOADER[\"Media Preloader\"]\n    end\n    \n    subgraph \"Navigation System\"\n        NAV_BUTTONS[\"Navigation Buttons\"]\n        BACK_BUTTON[\"Back Button\"]\n        CUSTOM_BUTTONS[\"Custom Buttons\"]\n        PAGINATION[\"Pagination Logic\"]\n    end\n    \n    subgraph \"Security Layer\"\n        SECURITY_MAP[\"Security Map\"]\n        PERMISSION_CHECK[\"Permission Inheritance\"]\n        DISABLE_SECURITY[\"disable_security\"]\n    end\n    \n    INLINE_MANAGER --\u003e GALLERY_CLASS\n    GALLERY_CLASS --\u003e INLINE_UNIT\n    GALLERY_CLASS --\u003e CUSTOM_MAP\n    \n    GALLERY_CLASS --\u003e MEDIA_HANDLER\n    GALLERY_CLASS --\u003e NAV_BUTTONS\n    GALLERY_CLASS --\u003e MEMOIZATION\n    \n    QUERY_GALLERY --\u003e GALLERY_CLASS\n    SLIDESHOW --\u003e MEDIA_HANDLER\n    \n    MEDIA_HANDLER --\u003e GIF_SUPPORT\n    MEDIA_HANDLER --\u003e CAPTION_PROC\n    MEDIA_HANDLER --\u003e PRELOADER\n    \n    NAV_BUTTONS --\u003e BACK_BUTTON\n    NAV_BUTTONS --\u003e CUSTOM_BUTTONS\n    NAV_BUTTONS --\u003e PAGINATION\n    \n    GALLERY_CLASS --\u003e SECURITY_MAP\n    PERMISSION_CHECK --\u003e SECURITY_MAP\n    DISABLE_SECURITY --\u003e SECURITY_MAP\n```\n\nSources: [CHANGELOG.md:489-977]()\n\n### Gallery Lifecycle and State Management\n\n```mermaid\nflowchart TD\n    START[\"Gallery Creation\"] --\u003e INIT[\"Initialize Gallery Object\"]\n    INIT --\u003e MEDIA_LOAD[\"Load Media Items\"]\n    MEDIA_LOAD --\u003e SECURITY_CHECK[\"Apply Security Rules\"]\n    \n    SECURITY_CHECK --\u003e RENDER[\"Render Initial View\"]\n    RENDER --\u003e DISPLAY[\"Display to User\"]\n    \n    DISPLAY --\u003e USER_ACTION{User Interaction}\n    \n    USER_ACTION --\u003e|Navigate| NAV_HANDLER[\"Navigation Handler\"]\n    USER_ACTION --\u003e|Custom Button| CUSTOM_HANDLER[\"Custom Button Handler\"]\n    USER_ACTION --\u003e|Close| CLEANUP[\"Cleanup Resources\"]\n    \n    NAV_HANDLER --\u003e UPDATE_VIEW[\"Update Gallery View\"]\n    UPDATE_VIEW --\u003e PRELOAD[\"Preload Next Items\"]\n    PRELOAD --\u003e DISPLAY\n    \n    CUSTOM_HANDLER --\u003e CUSTOM_LOGIC[\"Execute Custom Logic\"]\n    CUSTOM_LOGIC --\u003e UPDATE_VIEW\n    \n    CLEANUP --\u003e MEMOIZE{Memoization Enabled?}\n    MEMOIZE --\u003e|Yes| STORE_STATE[\"Store Gallery State\"]\n    MEMOIZE --\u003e|No| DESTROY[\"Destroy Gallery\"]\n    \n    STORE_STATE --\u003e MEMORY_STORAGE[\"Memory Storage\"]\n    MEMORY_STORAGE --\u003e RESTORE_LATER[\"Available for Restore\"]\n    \n    DESTROY --\u003e END[\"Gallery Ended\"]\n    RESTORE_LATER --\u003e DISPLAY\n```\n\nSources: [CHANGELOG.md:940-977]()\n\n## Core Functionality\n\n### Gallery Creation and Management\n\nThe Gallery system provides methods for creating and managing scrollable media collections. Galleries return `InlineMessage` objects that can be edited and manipulated programmatically.\n\n**Key Features:**\n- **Media Support**: Images, videos, GIFs, and other media types\n- **Caption Processing**: Optional captions for each media item\n- **Navigation Controls**: Previous/next buttons with pagination\n- **Custom Buttons**: Developer-defined action buttons\n- **Security Integration**: Permission-based access controls\n\n### Slideshow Functionality\n\nThe slideshow feature runs in the background and automatically advances through gallery items. This system was reworked to prevent userbot crashes during long-running slideshows.\n\n**Slideshow Characteristics:**\n- Background processing to prevent blocking\n- Configurable timing intervals\n- User controls for pause/resume\n- Integration with navigation system\n\nSources: [CHANGELOG.md:848-849]()\n\n### Memoization System\n\nGallery memoization allows users to close galleries and restore them later with preserved state, including current position and navigation history.\n\n**Memoization Features:**\n- State preservation across sessions\n- Position tracking\n- Navigation history\n- Resource optimization through selective storage\n\nSources: [CHANGELOG.md:940-977]()\n\n## Integration Points\n\n### Inline Query Integration\n\nThe `query_gallery` module enables galleries to be called via inline queries, allowing users to access galleries through the bot's inline interface.\n\n```mermaid\ngraph LR\n    INLINE_QUERY[\"Inline Query\"] --\u003e QUERY_PROCESSOR[\"Query Processor\"]\n    QUERY_PROCESSOR --\u003e GALLERY_MATCHER[\"Gallery Matcher\"]\n    GALLERY_MATCHER --\u003e GALLERY_INSTANCE[\"Gallery Instance\"]\n    GALLERY_INSTANCE --\u003e INLINE_RESULT[\"Inline Result\"]\n    INLINE_RESULT --\u003e USER_DISPLAY[\"User Display\"]\n```\n\nSources: [CHANGELOG.md:905-946]()\n\n### Security System Integration\n\nGalleries inherit security permissions from the command caller and integrate with the broader security framework.\n\n**Security Features:**\n- Permission inheritance from calling context\n- Custom security maps for gallery-specific rules\n- `disable_security` parameter for unrestricted access\n- Integration with user permission levels\n\n### Media Processing Pipeline\n\nThe gallery system processes various media types through a unified pipeline that handles format conversion, optimization, and delivery.\n\n**Supported Media Types:**\n- Static images (JPEG, PNG, WebP)\n- Animated GIFs with dedicated support\n- Videos with thumbnail generation\n- Documents and files\n\nSources: [CHANGELOG.md:951-952]()\n\n## Configuration and Customization\n\n### Custom Buttons\n\nDevelopers can add custom action buttons to galleries for enhanced interactivity. These buttons integrate with the callback handling system.\n\n**Button Configuration:**\n- Action callbacks\n- Security restrictions\n- Visual styling options\n- Conditional display logic\n\n### Silent Mode\n\nThe `silent` parameter allows galleries to be created without notification sounds or visual indicators, useful for background operations or automated processes.\n\n### Navigation Optimization\n\nThe system optimizes navigation through:\n- **Preloading**: Next items loaded in advance\n- **Back Button**: Dedicated navigation control\n- **Pagination**: Efficient handling of large collections\n- **Default Value Omission**: Storage optimization by excluding default values\n\nSources: [CHANGELOG.md:859-875](), [CHANGELOG.md:940-941]()\n\n## Error Handling and Reliability\n\nThe gallery system includes robust error handling for common issues:\n\n- `inline_message_id` errors with automatic recovery\n- Memory leak prevention in long-running galleries\n- Graceful degradation when media is unavailable\n- Network timeout handling for remote media\n\nSources: [CHANGELOG.md:489](), [CHANGELOG.md:848]()\n\n## Performance Considerations\n\n### Memory Management\n\nThe gallery system implements several performance optimizations:\n- Dynamic generation of default values\n- Selective memoization storage\n- Background slideshow processing\n- Efficient media preloading\n\n### Resource Cleanup\n\nProper resource management ensures galleries don't consume excessive memory:\n- Automatic cleanup on gallery close\n- Memory storage limits for memoization\n- Background process termination\n- Media cache management\n\nSources: [CHANGELOG.md:940-941]()"])</script><script>self.__next_f.push([1,"24:T26ad,"])</script><script>self.__next_f.push([1,"# Lists\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [CHANGELOG.md](CHANGELOG.md)\n\n\u003c/details\u003e\n\n\n\nThis document covers the interactive list components within the Heroku Telegram userbot's inline system. Lists provide paginated display of data with navigation controls and custom interaction buttons, enabling efficient presentation of large datasets within Telegram messages.\n\nFor information about other inline components, see [Forms](#4.2) and [Galleries](#4.3). For the overall inline system architecture, see [Inline Manager](#4.1).\n\n## Purpose and Architecture\n\nThe inline list system is designed to handle data presentation scenarios where content exceeds Telegram's message limits or requires structured navigation. Lists automatically paginate content, provide navigation controls, and support custom buttons for user interaction.\n\n### List Component Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Inline Manager System\"\n        IM[\"InlineManager\"]\n        IU[\"InlineUnit\"]\n    end\n    \n    subgraph \"List Implementation\"\n        LIST[\"List\"]\n        LP[\"ListPaginator\"]\n        LB[\"ListBuilder\"]\n    end\n    \n    subgraph \"Data Processing\"\n        DP[\"DataProcessor\"]\n        CF[\"ChunkFormatter\"]\n        BG[\"ButtonGenerator\"]\n    end\n    \n    subgraph \"Telegram Interface\"\n        BOT[\"TelegramBot\"]\n        KB[\"InlineKeyboard\"]\n        CB[\"CallbackHandler\"]\n    end\n    \n    subgraph \"User Interaction\"\n        USER[\"User\"]\n        NAV[\"Navigation\"]\n        ACT[\"Actions\"]\n    end\n    \n    IM --\u003e LIST\n    IU --\u003e LIST\n    LIST --\u003e LP\n    LIST --\u003e LB\n    \n    LP --\u003e DP\n    LB --\u003e CF\n    LB --\u003e BG\n    \n    LIST --\u003e BOT\n    BG --\u003e KB\n    KB --\u003e CB\n    \n    USER --\u003e NAV\n    USER --\u003e ACT\n    NAV --\u003e CB\n    ACT --\u003e CB\n    \n    CB --\u003e LIST\n```\n\n**List System Architecture**: Shows how list components integrate with the inline manager and handle user interactions through paginated data presentation.\n\nSources: CHANGELOG.md:473, CHANGELOG.md:854, CHANGELOG.md:878, CHANGELOG.md:939-940\n\n### Integration with Core Systems\n\n```mermaid\nsequenceDiagram\n    participant Module\n    participant InlineManager\n    participant List\n    participant TelegramBot\n    participant User\n    \n    Note over Module,User: List Creation and Display\n    Module-\u003e\u003eInlineManager: \"inline.list(items, **kwargs)\"\n    InlineManager-\u003e\u003eList: \"create_list_unit()\"\n    List-\u003e\u003eList: \"paginate_items()\"\n    List-\u003e\u003eList: \"generate_buttons()\"\n    List-\u003e\u003eTelegramBot: \"send_message(markup)\"\n    TelegramBot-\u003e\u003eUser: \"Display paginated list\"\n    \n    Note over Module,User: User Navigation\n    User-\u003e\u003eTelegramBot: \"Click navigation button\"\n    TelegramBot-\u003e\u003eList: \"handle_callback()\"\n    List-\u003e\u003eList: \"update_page()\"\n    List-\u003e\u003eTelegramBot: \"edit_message(new_markup)\"\n    TelegramBot-\u003e\u003eUser: \"Show updated page\"\n    \n    Note over Module,User: Custom Action\n    User-\u003e\u003eTelegramBot: \"Click custom button\"\n    TelegramBot-\u003e\u003eInlineManager: \"route_callback()\"\n    InlineManager-\u003e\u003eModule: \"execute_callback()\"\n    Module-\u003e\u003eList: \"update_list() [optional]\"\n```\n\n**List Interaction Flow**: Demonstrates the complete lifecycle of list creation, user navigation, and custom action handling.\n\nSources: CHANGELOG.md:473, CHANGELOG.md:854\n\n## Core Components\n\n### List Unit Structure\n\nThe list system extends the base `InlineUnit` architecture and provides specialized components for data presentation:\n\n| Component | Purpose | Key Features |\n|-----------|---------|--------------|\n| `List` | Main list controller | Pagination, button management, state tracking |\n| `ListPaginator` | Data chunking and navigation | Automatic page calculation, overflow handling |\n| `ListBuilder` | Markup generation | Button layout, custom actions, navigation controls |\n| `DataProcessor` | Content formatting | Text processing, length validation, HTML handling |\n\n### Button System Integration\n\n```mermaid\ngraph LR\n    subgraph \"Button Types\"\n        NAV[\"NavigationButtons\"]\n        CUST[\"CustomButtons\"]\n        ACT[\"ActionButtons\"]\n    end\n    \n    subgraph \"Button Generator\"\n        BG[\"ButtonGenerator\"]\n        BL[\"ButtonLayout\"]\n        BC[\"ButtonCallback\"]\n    end\n    \n    subgraph \"Callback Routing\"\n        CR[\"CallbackRouter\"]\n        IH[\"InlineHandler\"]\n        MH[\"ModuleHandler\"]\n    end\n    \n    NAV --\u003e BG\n    CUST --\u003e BG\n    ACT --\u003e BG\n    \n    BG --\u003e BL\n    BL --\u003e BC\n    \n    BC --\u003e CR\n    CR --\u003e IH\n    CR --\u003e MH\n    \n    IH --\u003e NAV\n    MH --\u003e CUST\n    MH --\u003e ACT\n```\n\n**Button System Architecture**: Shows how different button types are generated, managed, and routed to appropriate handlers.\n\nSources: CHANGELOG.md:473\n\n## Usage Patterns\n\n### Automatic List Generation\n\nThe system automatically converts oversized content to lists when `utils.answer` output exceeds message limits:\n\n```mermaid\nflowchart TD\n    START[\"utils.answer() called\"]\n    CHECK{\"Content size \u003e 4096?\"}\n    SPLIT[\"Split into chunks\"]\n    CREATE[\"Create inline.list()\"]\n    SEND[\"Send as list\"]\n    DIRECT[\"Send directly\"]\n    \n    START --\u003e CHECK\n    CHECK --\u003e|Yes| SPLIT\n    CHECK --\u003e|No| DIRECT\n    SPLIT --\u003e CREATE\n    CREATE --\u003e SEND\n```\n\n**Automatic List Conversion**: Demonstrates how the system automatically handles content overflow by converting to paginated lists.\n\nSources: CHANGELOG.md:854\n\n### Custom Button Integration\n\nLists support custom buttons for enhanced user interaction:\n\n| Button Type | Purpose | Implementation |\n|-------------|---------|----------------|\n| Navigation | Page switching | Built-in prev/next controls |\n| Action | Custom operations | Module-defined callbacks |\n| Selection | Item choosing | State-tracked selections |\n| Filter | Content filtering | Dynamic list updates |\n\n### Configuration Options\n\nThe list system supports various configuration parameters:\n\n| Parameter | Type | Description | Default |\n|-----------|------|-------------|---------|\n| `custom_buttons` | List | Additional interaction buttons | `[]` |\n| `silent` | Boolean | Suppress notifications | `False` |\n| `disable_security` | Boolean | Bypass security checks | `False` |\n| `ttl` | Integer | Auto-cleanup timeout | `600` |\n| `always_allow` | List | Permitted user IDs | `[]` |\n\nSources: CHANGELOG.md:473, CHANGELOG.md:842, CHANGELOG.md:858\n\n## Integration with Security System\n\n```mermaid\ngraph TB\n    subgraph \"Security Layer\"\n        SEC[\"SecurityManager\"]\n        PERM[\"PermissionCheck\"]\n        TARGET[\"TargetedSecurity\"]\n    end\n    \n    subgraph \"List Security\"\n        LS[\"ListSecurity\"]\n        BS[\"ButtonSecurity\"]\n        AS[\"ActionSecurity\"]\n    end\n    \n    subgraph \"Access Control\"\n        OWNER[\"Owner\"]\n        SUDO[\"Sudo\"]\n        SUPPORT[\"Support\"]\n        EVERYONE[\"Everyone\"]\n    end\n    \n    SEC --\u003e LS\n    PERM --\u003e BS\n    TARGET --\u003e AS\n    \n    LS --\u003e OWNER\n    BS --\u003e SUDO\n    AS --\u003e SUPPORT\n    AS --\u003e EVERYONE\n    \n    OWNER --\u003e LS\n    SUDO --\u003e LS\n    SUPPORT --\u003e LS\n    EVERYONE --\u003e LS\n```\n\n**List Security Architecture**: Shows how security permissions are applied to list components and user interactions.\n\nSources: CHANGELOG.md:858, CHANGELOG.md:837\n\n## Memory Management and Optimization\n\n### Unit Lifecycle Management\n\nThe list system implements efficient memory management through controlled unit lifecycles:\n\n```mermaid\nstateDiagram-v2\n    [*] --\u003e Created\n    Created --\u003e Active : Display\n    Active --\u003e Updated : User interaction\n    Updated --\u003e Active : Continue use\n    Active --\u003e Cached : TTL timeout\n    Cached --\u003e Active : User return\n    Cached --\u003e Destroyed : Memory cleanup\n    Active --\u003e Destroyed : Manual cleanup\n    Destroyed --\u003e [*]\n```\n\n**List Unit Lifecycle**: Demonstrates how list units are managed in memory with caching and cleanup mechanisms.\n\nSources: CHANGELOG.md:923, CHANGELOG.md:594\n\n### Performance Optimizations\n\nThe system includes several performance optimizations:\n\n| Optimization | Description | Impact |\n|--------------|-------------|---------|\n| Memoization | Cache frequent list states | Reduced computation |\n| Lazy Loading | Load content on demand | Lower memory usage |\n| Button Optimization | Omit default values in storage | Reduced storage overhead |\n| Cleanup Automation | Automatic unit disposal | Prevent memory leaks |\n\nSources: CHANGELOG.md:923, CHANGELOG.md:951\n\n## Development Patterns\n\n### Module Integration\n\nModules can create and manage lists through the inline manager interface:\n\n```mermaid\ngraph LR\n    subgraph \"Module Code\"\n        MOD[\"Module\"]\n        CMD[\"Command Handler\"]\n        CB[\"Callback Handler\"]\n    end\n    \n    subgraph \"Inline Interface\"\n        INLINE[\"self.inline\"]\n        LIST[\"list()\"]\n        EDIT[\"edit()\"]\n    end\n    \n    subgraph \"List Management\"\n        CREATE[\"Create List\"]\n        UPDATE[\"Update Content\"]\n        HANDLE[\"Handle Actions\"]\n    end\n    \n    MOD --\u003e CMD\n    CMD --\u003e INLINE\n    INLINE --\u003e LIST\n    LIST --\u003e CREATE\n    \n    CB --\u003e INLINE\n    INLINE --\u003e EDIT\n    EDIT --\u003e UPDATE\n    \n    CREATE --\u003e HANDLE\n    UPDATE --\u003e HANDLE\n```\n\n**Module Integration Pattern**: Shows how modules interact with the list system through the inline interface.\n\nSources: CHANGELOG.md:878, CHANGELOG.md:940\n\n### Error Handling and Fallbacks\n\nThe system provides robust error handling with automatic fallbacks:\n\n| Error Type | Fallback Behavior | Recovery Method |\n|------------|------------------|-----------------|\n| Content Too Large | File attachment | Automatic conversion |\n| Button Limit Exceeded | Pagination | Dynamic restructuring |\n| Callback Timeout | Error message | User notification |\n| Memory Exhaustion | Unit cleanup | Garbage collection |\n\nSources: CHANGELOG.md:734, CHANGELOG.md:854\n\nThis list system provides a comprehensive solution for interactive data presentation within the Heroku userbot, seamlessly integrating with the broader inline system architecture while maintaining security, performance, and user experience standards."])</script><script>self.__next_f.push([1,"25:T2ba6,"])</script><script>self.__next_f.push([1,"# Translation and Internationalization\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [.gitignore](.gitignore)\n- [CHANGELOG.md](CHANGELOG.md)\n\n\u003c/details\u003e\n\n\n\nThis document covers the comprehensive translation and internationalization (i18n) system in the Heroku Telegram userbot framework. The system provides multi-language support for core modules, user-created modules, web interface components, and command documentation through a flexible architecture that supports both static language packs and dynamic translation mechanisms.\n\nFor information about creating translatable modules, see [Creating Modules](#7.1). For details about the module system's integration with translations, see [Module System](#2.2).\n\n## Translation System Architecture\n\nThe Heroku framework implements a sophisticated translation system that operates across multiple layers of the application, from core system messages to user-defined module content.\n\n### Core Translation Components\n\n```mermaid\ngraph TB\n    subgraph \"Translation Sources\"\n        YAML_PACKS[\"YAML Language Packs\u003cbr/\u003eDisk \u0026 Web Sources\"]\n        LEGACY_PACKS[\"Legacy Translation Packs\u003cbr/\u003ePython Format\"]\n        DYNAMIC_TRANS[\"HerokuDynamicTranslate\u003cbr/\u003eRuntime Translation\"]\n    end\n    \n    subgraph \"Translation Engine\"\n        LOADER[\"Translation Loader\u003cbr/\u003eMulti-source Support\"]\n        RESOLVER[\"String Resolver\u003cbr/\u003ePriority \u0026 Fallback\"]\n        CACHE[\"Translation Cache\u003cbr/\u003ePerformance Layer\"]\n    end\n    \n    subgraph \"Consumer Systems\"\n        CORE_MODULES[\"Core Modules\u003cbr/\u003eBuilt-in Strings\"]\n        USER_MODULES[\"User Modules\u003cbr/\u003eCustom Strings\"]\n        WEB_INTERFACE[\"Web Interface\u003cbr/\u003eUI Translations\"]\n        HELP_SYSTEM[\"Help System\u003cbr/\u003eCommand Documentation\"]\n    end\n    \n    subgraph \"Language Management\"\n        LANG_CONFIG[\"Language Configuration\u003cbr/\u003eUser Preferences\"]\n        PRIORITY_SYS[\"Priority System\u003cbr/\u003eFallback Chains\"]\n        DETECTION[\"Auto-Detection\u003cbr/\u003eUser Locale\"]\n    end\n    \n    YAML_PACKS --\u003e LOADER\n    LEGACY_PACKS --\u003e LOADER\n    DYNAMIC_TRANS --\u003e RESOLVER\n    \n    LOADER --\u003e RESOLVER\n    RESOLVER --\u003e CACHE\n    \n    CACHE --\u003e CORE_MODULES\n    CACHE --\u003e USER_MODULES\n    CACHE --\u003e WEB_INTERFACE\n    CACHE --\u003e HELP_SYSTEM\n    \n    LANG_CONFIG --\u003e PRIORITY_SYS\n    PRIORITY_SYS --\u003e RESOLVER\n    DETECTION --\u003e LANG_CONFIG\n```\n\n**Sources:** [CHANGELOG.md:834-836](), [CHANGELOG.md:479](), [CHANGELOG.md:162]()\n\n### Translation Loading and Resolution Flow\n\n```mermaid\nflowchart TD\n    START[\"Application Startup\"] --\u003e DETECT_LANG[\"Auto-Detect User Language\"]\n    DETECT_LANG --\u003e LOAD_CONFIG[\"Load Language Configuration\"]\n    \n    LOAD_CONFIG --\u003e LOAD_SOURCES[\"Load Translation Sources\"]\n    LOAD_SOURCES --\u003e DISK_YAML[\"Load YAML Packs from Disk\"]\n    LOAD_SOURCES --\u003e WEB_YAML[\"Load YAML Packs from Web\"]\n    LOAD_SOURCES --\u003e LEGACY_PACKS[\"Load Legacy Python Packs\"]\n    \n    DISK_YAML --\u003e MERGE_TRANS[\"Merge Translation Data\"]\n    WEB_YAML --\u003e MERGE_TRANS\n    LEGACY_PACKS --\u003e MERGE_TRANS\n    \n    MERGE_TRANS --\u003e BUILD_PRIORITY[\"Build Priority Chain\"]\n    BUILD_PRIORITY --\u003e CACHE_TRANS[\"Cache Translations\"]\n    \n    CACHE_TRANS --\u003e READY[\"Translation System Ready\"]\n    \n    READY --\u003e STRING_REQUEST[\"String Translation Request\"]\n    STRING_REQUEST --\u003e LOOKUP_PRIMARY[\"Lookup Primary Language\"]\n    \n    LOOKUP_PRIMARY --\u003e FOUND_PRIMARY{Found in Primary?}\n    FOUND_PRIMARY --\u003e|Yes| RETURN_PRIMARY[\"Return Primary Translation\"]\n    FOUND_PRIMARY --\u003e|No| LOOKUP_FALLBACK[\"Lookup Fallback Language\"]\n    \n    LOOKUP_FALLBACK --\u003e FOUND_FALLBACK{Found in Fallback?}\n    FOUND_FALLBACK --\u003e|Yes| RETURN_FALLBACK[\"Return Fallback Translation\"]\n    FOUND_FALLBACK --\u003e|No| RETURN_KEY[\"Return Original Key\"]\n    \n    RETURN_PRIMARY --\u003e CACHE_RESULT[\"Cache Result\"]\n    RETURN_FALLBACK --\u003e CACHE_RESULT\n    RETURN_KEY --\u003e CACHE_RESULT\n```\n\n**Sources:** [CHANGELOG.md:835](), [CHANGELOG.md:479](), [CHANGELOG.md:162]()\n\n## Language Pack System\n\nThe framework supports multiple formats and sources for translation data, providing flexibility for both core system translations and community-contributed language packs.\n\n### Supported Language Formats\n\n| Format | Source | Purpose | Example |\n|--------|--------|---------|---------|\n| YAML | Disk/Web | Modern translation packs | `lang_pack.yaml` |\n| Python | Legacy | Backwards compatibility | `strings.py` |\n| Dynamic | Runtime | Module-specific translations | `HerokuDynamicTranslate` |\n\n### Currently Supported Languages\n\nBased on the development history, the framework supports the following languages:\n\n| Language | Code | Status | Notes |\n|----------|------|--------|-------|\n| English | `en` | Full | Default fallback language |\n| Russian | `ru` | Full | Core language support |\n| Ukrainian | `uk` | Full | Added in v1.6.6 beta |\n| French | `fr` | Full | Added in v1.6.1 |\n| Kazakh | `kk` | Full | Added in v1.6.0 |\n| Italian | `it` | Full | Added in v1.6.0 |\n| Tatar | `tt` | Partial | Extended in v1.6.2 |\n| Uzbek | `uz` | Full | Added in v1.5.3 |\n| Turkish | `tr` | Full | Added in v1.5.3 |\n| German | `de` | Full | Added in v1.5.3 |\n| Spanish | `es` | Full | Added in v1.5.3 |\n\n**Sources:** [CHANGELOG.md:80](), [CHANGELOG.md:88](), [CHANGELOG.md:170](), [CHANGELOG.md:207-209](), [CHANGELOG.md:225]()\n\n## Dynamic Translation System\n\nThe `HerokuDynamicTranslate` system enables runtime translation of module content without requiring pre-compiled language packs.\n\n### Dynamic Translation Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Module Translation Request\"\n        MOD_REQUEST[\"Module Requests Translation\u003cbr/\u003eself.strings[key]\"]\n        TRANS_KEY[\"Translation Key\u003cbr/\u003emodule.classname.string_id\"]\n    end\n    \n    subgraph \"HerokuDynamicTranslate Engine\"\n        DYNAMIC_RESOLVER[\"Dynamic Resolver\u003cbr/\u003eRuntime Translation\"]\n        TRANSLATION_API[\"Translation API\u003cbr/\u003eExternal Services\"]\n        LOCAL_CACHE[\"Local Translation Cache\u003cbr/\u003ePerformance Layer\"]\n    end\n    \n    subgraph \"Translation Sources\"\n        STATIC_PACK[\"Static Language Pack\u003cbr/\u003ePre-translated Strings\"]\n        FALLBACK_ENG[\"English Fallback\u003cbr/\u003eDefault Strings\"]\n        AUTO_TRANSLATE[\"Auto-Translation\u003cbr/\u003eMachine Translation\"]\n    end\n    \n    MOD_REQUEST --\u003e TRANS_KEY\n    TRANS_KEY --\u003e DYNAMIC_RESOLVER\n    \n    DYNAMIC_RESOLVER --\u003e STATIC_PACK\n    DYNAMIC_RESOLVER --\u003e LOCAL_CACHE\n    STATIC_PACK --\u003e FOUND_STATIC{Found Static?}\n    \n    FOUND_STATIC --\u003e|Yes| RETURN_STATIC[\"Return Static Translation\"]\n    FOUND_STATIC --\u003e|No| FALLBACK_ENG\n    \n    FALLBACK_ENG --\u003e FOUND_FALLBACK{Found Fallback?}\n    FOUND_FALLBACK --\u003e|Yes| RETURN_FALLBACK[\"Return Fallback\"]\n    FOUND_FALLBACK --\u003e|No| AUTO_TRANSLATE\n    \n    AUTO_TRANSLATE --\u003e TRANSLATION_API\n    TRANSLATION_API --\u003e CACHE_AUTO[\"Cache Auto-Translation\"]\n    CACHE_AUTO --\u003e RETURN_AUTO[\"Return Auto-Translation\"]\n    \n    RETURN_STATIC --\u003e LOCAL_CACHE\n    RETURN_FALLBACK --\u003e LOCAL_CACHE\n    RETURN_AUTO --\u003e LOCAL_CACHE\n```\n\n**Sources:** [CHANGELOG.md:834](), [CHANGELOG.md:835]()\n\n## Module Translation Integration\n\nThe translation system is deeply integrated with the module system, allowing both core modules and user-created modules to provide translatable content.\n\n### Module Translation Methods\n\n```mermaid\ngraph LR\n    subgraph \"Module Definition\"\n        MODULE_CLASS[\"Module Class\u003cbr/\u003eMyModule\"]\n        STRINGS_ATTR[\"strings Attribute\u003cbr/\u003eTranslation Keys\"]\n        DOC_STRINGS[\"Command Docstrings\u003cbr/\u003eTranslatable Help\"]\n    end\n    \n    subgraph \"Translation Access\"\n        SELF_STRINGS[\"self.strings[key]\u003cbr/\u003eGet Translation\"]\n        FORMATTER[\"String Formatting\u003cbr/\u003e{variables}\"]\n        FALLBACK[\"Fallback Handling\u003cbr/\u003eDefault Values\"]\n    end\n    \n    subgraph \"Translation Sources\"\n        MODULE_PACK[\"Module Language Pack\u003cbr/\u003emodule_name.yaml\"]\n        GLOBAL_PACK[\"Global Language Pack\u003cbr/\u003ecore.yaml\"]\n        DYNAMIC_GEN[\"Dynamic Generation\u003cbr/\u003eHerokuDynamicTranslate\"]\n    end\n    \n    MODULE_CLASS --\u003e STRINGS_ATTR\n    STRINGS_ATTR --\u003e SELF_STRINGS\n    DOC_STRINGS --\u003e SELF_STRINGS\n    \n    SELF_STRINGS --\u003e FORMATTER\n    FORMATTER --\u003e FALLBACK\n    \n    SELF_STRINGS --\u003e MODULE_PACK\n    SELF_STRINGS --\u003e GLOBAL_PACK\n    SELF_STRINGS --\u003e DYNAMIC_GEN\n```\n\n**Sources:** [CHANGELOG.md:226](), [CHANGELOG.md:834]()\n\n### Command Documentation Translation\n\nThe framework automatically translates command documentation and help text on-the-fly, ensuring that users see help content in their preferred language.\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant HelpSystem\n    participant TranslationEngine\n    participant ModuleSystem\n    \n    User-\u003e\u003eHelpSystem: Request help for command\n    HelpSystem-\u003e\u003eModuleSystem: Get command metadata\n    ModuleSystem-\u003e\u003eHelpSystem: Return docstring + attributes\n    HelpSystem-\u003e\u003eTranslationEngine: Translate docstring\n    TranslationEngine-\u003e\u003eTranslationEngine: Resolve user language\n    TranslationEngine-\u003e\u003eTranslationEngine: Lookup translation\n    TranslationEngine-\u003e\u003eHelpSystem: Return translated text\n    HelpSystem-\u003e\u003eUser: Display translated help\n```\n\n**Sources:** [CHANGELOG.md:226]()\n\n## Configuration and Language Management\n\nThe translation system provides comprehensive configuration options for language selection, priority handling, and fallback behavior.\n\n### Language Configuration Options\n\n| Setting | Purpose | Default | Notes |\n|---------|---------|---------|-------|\n| Primary Language | Main user language | Auto-detected | User's preferred language |\n| Fallback Language | Secondary option | English | When primary unavailable |\n| Web Interface Language | UI translations | Follows primary | Separate web UI setting |\n| Module Language Priority | Translation order | Primary → Fallback → Key | Resolution chain |\n\n### Quick Language Switching\n\nThe framework provides quick language switching through the web interface and quickstart buttons, allowing users to change their language preference without complex configuration.\n\n**Sources:** [CHANGELOG.md:126](), [CHANGELOG.md:790]()\n\n## Integration with Core Systems\n\nThe translation system integrates seamlessly with other framework components to provide a consistent multilingual experience.\n\n### Web Interface Integration\n\nThe web setup interface supports translation for:\n- Authentication flows\n- Configuration pages\n- Error messages\n- Status indicators\n- Button labels\n\n### Security System Integration\n\nTranslation keys are properly handled in security contexts to prevent injection attacks while maintaining multilingual support for security-related messages.\n\n### Inline System Integration\n\nThe inline bot system supports translated content for:\n- Inline query results\n- Button labels\n- Form fields\n- Gallery captions\n- List items\n\n**Sources:** [CHANGELOG.md:126](), [CHANGELOG.md:833]()\n\nThis translation and internationalization system ensures that the Heroku userbot framework can serve users globally while maintaining consistent functionality across all supported languages. The combination of static language packs, dynamic translation capabilities, and seamless module integration provides a robust foundation for multilingual userbot deployments."])</script><script>self.__next_f.push([1,"26:T227a,"])</script><script>self.__next_f.push([1,"# Utility Systems\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [.gitignore](.gitignore)\n- [requirements.txt](requirements.txt)\n\n\u003c/details\u003e\n\n\n\nThis page documents the supporting utility systems that provide essential infrastructure for the Heroku Telegram userbot framework. These systems handle dependency management, development environment setup, file management, and debugging support.\n\nFor information about the core application systems, see [Core Systems](#2). For deployment-specific utilities, see [Deployment and Maintenance](#8).\n\n## Dependency Management\n\nThe framework uses a minimal dependency approach with carefully selected packages that provide essential functionality for Telegram userbot operations and cloud deployment.\n\n### Core Dependencies\n\nThe primary dependencies are managed through `requirements.txt` which specifies three key packages:\n\n| Package | Version | Purpose |\n|---------|---------|---------|\n| `heroku-tl-new` | 1.1.3 | Heroku platform integration and deployment utilities |\n| `pycloudflared` | 0.2.0 | Cloudflare tunnel management for secure connections |\n| `Pillow` | Latest | Image processing and manipulation for media handling |\n\nThe framework requires Python 3.9 or higher as indicated in [requirements.txt:5]().\n\n### Dependency Resolution Strategy\n\n```mermaid\ngraph TB\n    PYTHON[\"Python 3.9+\"]\n    REQ_FILE[\"requirements.txt\"]\n    \n    subgraph \"Core Dependencies\"\n        HEROKU_PKG[\"heroku-tl-new==1.1.3\"]\n        CLOUDFLARE_PKG[\"pycloudflared==0.2.0\"] \n        PILLOW_PKG[\"Pillow\"]\n    end\n    \n    subgraph \"Platform Integration\"\n        HEROKU_API[\"Heroku Platform API\"]\n        CLOUDFLARE_TUNNEL[\"Cloudflare Tunnel Service\"]\n        IMAGE_PROC[\"Image Processing Pipeline\"]\n    end\n    \n    subgraph \"Framework Systems\"\n        DEPLOYMENT[\"Deployment System\"]\n        NETWORKING[\"Network Utilities\"]\n        MEDIA_HANDLER[\"Media Handler\"]\n    end\n    \n    PYTHON --\u003e REQ_FILE\n    REQ_FILE --\u003e HEROKU_PKG\n    REQ_FILE --\u003e CLOUDFLARE_PKG\n    REQ_FILE --\u003e PILLOW_PKG\n    \n    HEROKU_PKG --\u003e HEROKU_API\n    CLOUDFLARE_PKG --\u003e CLOUDFLARE_TUNNEL\n    PILLOW_PKG --\u003e IMAGE_PROC\n    \n    HEROKU_API --\u003e DEPLOYMENT\n    CLOUDFLARE_TUNNEL --\u003e NETWORKING\n    IMAGE_PROC --\u003e MEDIA_HANDLER\n```\n\nSources: [requirements.txt:1-5]()\n\n## Development Environment Management\n\nThe framework includes comprehensive development environment utilities that manage file artifacts, cache systems, and development tool integration.\n\n### File Management Patterns\n\nThe `.gitignore` configuration implements a multi-layered file management strategy that handles Python development artifacts, framework-specific files, and deployment artifacts.\n\n```mermaid\ngraph TB\n    subgraph \"Python Environment\"\n        PYCACHE[\"__pycache__/\"]\n        PYCOMPILED[\"*.py[cod], *$py.class\"]\n        VENV[\"venv/, .venv, ENV/\"]\n        EGGS[\".eggs/, *.egg-info/\"]\n    end\n    \n    subgraph \"Development Tools\"\n        IDE_FILES[\".idea/, .vscode/\"]\n        TESTING[\".tox/, .pytest_cache/\"]\n        COVERAGE[\".coverage, htmlcov/\"]\n        MYPY[\".mypy_cache/\"]\n    end\n    \n    subgraph \"Framework Artifacts\"\n        SESSIONS[\"heroku*.session*\"]\n        DATABASE_FILES[\"database-*.json\"]\n        CONFIG_FILES[\"config-*.json, config.ini\"]\n        CACHE_FILES[\"*cache*.json\"]\n    end\n    \n    subgraph \"Media and Logs\"\n        MEDIA_FILES[\"*.webp, *.mp4, *.mp3\"]\n        LOG_FILES[\"*.log, heroku.log.*\"]\n        DEBUG_FILES[\"unknown_errors.txt\"]\n    end\n    \n    subgraph \"Platform Specific\"\n        HEROKU_DEPLOY[\".heroku/, .apt/, vendor/\"]\n        LOADED_MODULES[\"heroku/loaded_modules\"]\n        API_TOKENS[\"heroku/api_token.py\"]\n    end\n    \n    GITIGNORE[\".gitignore\"] --\u003e PYCACHE\n    GITIGNORE --\u003e IDE_FILES\n    GITIGNORE --\u003e FRAMEWORK_ARTIFACTS\n    GITIGNORE --\u003e MEDIA_FILES\n    GITIGNORE --\u003e HEROKU_DEPLOY\n```\n\nSources: [.gitignore:1-174]()\n\n### Artifact Classification\n\nThe development environment manages several categories of artifacts:\n\n**Python Development Artifacts** ([.gitignore:2-6](), [.gitignore:134-135]())\n- Compiled bytecode files (`__pycache__/`, `*.pyc`)\n- Package distribution files (`build/`, `dist/`, `*.egg-info/`)\n- Virtual environment directories (`venv/`, `.venv`)\n\n**Framework-Specific Files** ([.gitignore:136-155]())\n- Session files (`heroku*.session*`)\n- Database snapshots (`database-*.json`)\n- Configuration files (`config-*.json`, `config.ini`)\n- Module loading state (`heroku/loaded_modules`, `heroku/debug_modules`)\n\n**Platform Integration Files** ([.gitignore:166-171]())\n- Heroku deployment artifacts (`.heroku/`, `.apt/`, `vendor/`)\n- Dependency lock files (`Pipfile.lock`)\n- Platform-specific directories\n\n**Media and Output Files** ([.gitignore:156-165](), [.gitignore:173-174]())\n- Media files (`*.webp`, `*.mp4`, `*.mp3`, `*.ogg`)\n- Log files (`heroku.log.*`)\n- Error output (`unknown_errors.txt`)\n\n## Cache and State Management\n\nThe framework implements a sophisticated caching strategy that manages different types of runtime state and temporary data.\n\n### Cache Hierarchy\n\n```mermaid\ngraph TB\n    subgraph \"Memory Cache\"\n        ENTITY_CACHE[\"Native Entity Caching\"]\n        SESSION_CACHE[\"Session State Cache\"]\n    end\n    \n    subgraph \"File System Cache\"\n        PYACHE_DIR[\"__pycache__/ directories\"]\n        CACHE_JSON[\"*cache*.json files\"]\n        REQUIREMENTS_HASH[\".requirements_hash/\"]\n    end\n    \n    subgraph \"Database Cache\"\n        CONFIG_CACHE[\"Configuration Cache\"]\n        MODULE_CACHE[\"Module State Cache\"]\n    end\n    \n    subgraph \"Cleanup Patterns\"\n        GITIGNORE_RULES[\".gitignore patterns\"]\n        TEMP_CLEANUP[\"Temporary file cleanup\"]\n    end\n    \n    ENTITY_CACHE --\u003e SESSION_CACHE\n    PYACHE_DIR --\u003e CACHE_JSON\n    CONFIG_CACHE --\u003e MODULE_CACHE\n    \n    GITIGNORE_RULES --\u003e PYACHE_DIR\n    GITIGNORE_RULES --\u003e CACHE_JSON\n    GITIGNORE_RULES --\u003e TEMP_CLEANUP\n```\n\nSources: [.gitignore:3](), [.gitignore:6](), [.gitignore:155]()\n\n## Logging and Debug Infrastructure\n\nThe framework provides comprehensive logging and debugging utilities that support development, deployment, and production monitoring.\n\n### Debug File Management\n\nThe `.gitignore` configuration reveals the framework's approach to debug file management:\n\n**Installation Logs** ([.gitignore:150]())\n- `ftg-install.log` - Installation process logging\n\n**Runtime Logs** ([.gitignore:173]())\n- `heroku.log.*` - Platform-specific runtime logs\n\n**Error Tracking** ([.gitignore:174]())\n- `unknown_errors.txt` - Unhandled error collection\n\n### Development Tool Integration\n\nThe framework supports multiple development environments and tools:\n\n**IDE Support** ([.gitignore:145](), [.gitignore:149]())\n- `.idea/` - IntelliJ IDEA/PyCharm integration\n- `.vscode/` - Visual Studio Code configuration\n\n**Testing and Coverage** ([.gitignore:144](), [.gitignore:148]())\n- `.tox` - Testing environment management\n- `.coverage` - Code coverage tracking\n\n**Version Control Integration** ([.gitignore:152]())\n- `.cache` - Git and tool cache management\n\n## Platform Utilities\n\nThe framework includes specialized utilities for different deployment platforms and environments.\n\n### Heroku Platform Integration\n\n```mermaid\ngraph LR\n    subgraph \"Heroku Utilities\"\n        HEROKU_TL[\"heroku-tl-new package\"]\n        HEROKU_DIRS[\".heroku/, .apt/, vendor/\"]\n        HEROKU_LOGS[\"heroku.log.*\"]\n    end\n    \n    subgraph \"Cloudflare Integration\"\n        PYCLOUDFLARED[\"pycloudflared package\"]\n        TUNNEL_CONFIG[\"Tunnel configuration\"]\n    end\n    \n    subgraph \"Media Processing\"\n        PILLOW_PKG[\"Pillow package\"]\n        MEDIA_ARTIFACTS[\"*.webp, *.mp4, *.tgs\"]\n    end\n    \n    subgraph \"Application State\"\n        API_TOKENS[\"api_token.txt, heroku/api_token.py\"]\n        SESSION_FILES[\"heroku*.session*\"]\n        CONFIG_STATE[\"config-*.json\"]\n    end\n    \n    HEROKU_TL --\u003e HEROKU_DIRS\n    HEROKU_TL --\u003e HEROKU_LOGS\n    PYCLOUDFLARED --\u003e TUNNEL_CONFIG\n    PILLOW_PKG --\u003e MEDIA_ARTIFACTS\n```\n\nSources: [requirements.txt:1-3](), [.gitignore:136-137](), [.gitignore:147](), [.gitignore:166-171]()\n\n### Environment-Specific Artifacts\n\nThe utility systems handle different types of environment-specific files:\n\n**Development Environment** ([.gitignore:106-113]())\n- Environment variable files (`.env`, `.venv`)\n- Virtual environment directories\n- Development configuration\n\n**Production Environment** ([.gitignore:166-171]())\n- Platform deployment artifacts\n- Vendor dependencies\n- Platform-specific configuration\n\n**Testing Environment** ([.gitignore:42-54]())\n- Test coverage reports\n- Test cache and artifacts\n- Continuous integration files\n\nThis utility infrastructure provides the foundation for reliable development, testing, and deployment of the Heroku Telegram userbot framework across different platforms and environments."])</script><script>self.__next_f.push([1,"27:T229c,"])</script><script>self.__next_f.push([1,"# Development Environment\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [.gitignore](.gitignore)\n\n\u003c/details\u003e\n\n\n\nThis document covers the setup and configuration of a local development environment for the Heroku Telegram userbot framework. It includes prerequisites, environment configuration, development tools, and local workflow setup.\n\nFor deployment-specific environment configuration, see [Docker Deployment](#8.1) and [Cloud Platform Deployment](#8.2). For dependency management details, see [Dependency Management](#6.2).\n\n## Development Prerequisites\n\nThe framework requires specific system dependencies and development tools for local development and testing.\n\n### System Requirements\n\n| Component | Requirement | Purpose |\n|-----------|-------------|---------|\n| Python | 3.10+ | Core runtime environment |\n| Git | Latest stable | Version control and repository management |\n| Docker | Latest stable | Containerized development and testing |\n| Poetry | Latest stable | Python dependency management |\n\n### Development Tools\n\n```mermaid\ngraph TB\n    subgraph \"Development Environment Stack\"\n        PYTHON[\"Python 3.10+\u003cbr/\u003eCore Runtime\"]\n        POETRY[\"Poetry\u003cbr/\u003eDependency Management\"]\n        DOCKER[\"Docker\u003cbr/\u003eContainerization\"]\n        GIT[\"Git\u003cbr/\u003eVersion Control\"]\n    end\n    \n    subgraph \"IDE Support\"\n        VSCODE[\".vscode/\u003cbr/\u003eVS Code Settings\"]\n        IDEA[\".idea/\u003cbr/\u003eIntelliJ Settings\"]\n        GENERIC[\"Generic IDE\u003cbr/\u003ePython Support\"]\n    end\n    \n    subgraph \"Development Files\"\n        GITIGNORE[\".gitignore\u003cbr/\u003eIgnore Patterns\"]\n        REQUIREMENTS[\"requirements.txt\u003cbr/\u003eDependencies\"]\n        DOCKERFILE[\"Dockerfile\u003cbr/\u003eContainer Spec\"]\n        COMPOSE[\"docker-compose.yml\u003cbr/\u003eMulti-service Setup\"]\n    end\n    \n    PYTHON --\u003e POETRY\n    DOCKER --\u003e COMPOSE\n    GIT --\u003e GITIGNORE\n    \n    VSCODE --\u003e PYTHON\n    IDEA --\u003e PYTHON\n    GENERIC --\u003e PYTHON\n    \n    POETRY --\u003e REQUIREMENTS\n    DOCKER --\u003e DOCKERFILE\n```\n\n**Sources:** [.gitignore:145-149]()\n\n## Environment Setup Workflow\n\nThe development environment setup follows a structured workflow accommodating different development preferences and deployment targets.\n\n```mermaid\nflowchart TD\n    START[\"Start Development Setup\"] --\u003e CLONE[\"git clone repository\"]\n    CLONE --\u003e ENV_CHOICE{\"Choose Environment Type\"}\n    \n    ENV_CHOICE --\u003e|\"Local Development\"| LOCAL_SETUP[\"Local Python Setup\"]\n    ENV_CHOICE --\u003e|\"Containerized\"| DOCKER_SETUP[\"Docker Development\"]\n    ENV_CHOICE --\u003e|\"Hybrid\"| HYBRID_SETUP[\"Mixed Environment\"]\n    \n    LOCAL_SETUP --\u003e VENV_CREATE[\"python -m venv venv\"]\n    VENV_CREATE --\u003e VENV_ACTIVATE[\"source venv/bin/activate\"]\n    VENV_ACTIVATE --\u003e PIP_INSTALL[\"pip install -r requirements.txt\"]\n    \n    DOCKER_SETUP --\u003e DOCKER_BUILD[\"docker build -t heroku-dev .\"]\n    DOCKER_BUILD --\u003e DOCKER_RUN[\"docker run -p 8080:8080\"]\n    \n    HYBRID_SETUP --\u003e LOCAL_SETUP\n    HYBRID_SETUP --\u003e DOCKER_SETUP\n    \n    PIP_INSTALL --\u003e IDE_SETUP[\"Configure IDE\"]\n    DOCKER_RUN --\u003e IDE_SETUP\n    \n    IDE_SETUP --\u003e DEV_READY[\"Development Environment Ready\"]\n    \n    DEV_READY --\u003e CODE[\"Start Coding\"]\n    DEV_READY --\u003e TEST[\"Run Tests\"]\n    DEV_READY --\u003e DEBUG[\"Debug Issues\"]\n```\n\n**Sources:** [.gitignore:106-113](), [.gitignore:145-149]()\n\n## Environment Configuration Files\n\nThe framework uses several configuration files that developers need to understand for proper environment setup.\n\n### Git Configuration\n\nThe `.gitignore` file defines comprehensive ignore patterns for development artifacts:\n\n| Pattern Category | Examples | Purpose |\n|------------------|----------|---------|\n| Python Runtime | `__pycache__/`, `*.pyc`, `*.py[cod]` | Compiled Python files |\n| Virtual Environments | `venv/`, `.env`, `ENV/` | Environment directories |\n| IDE Files | `.vscode/`, `.idea/`, `.spyderproject` | Editor-specific settings |\n| Dependencies | `pip-wheel-metadata/`, `.eggs/` | Package management artifacts |\n| Testing | `.pytest_cache/`, `.coverage`, `htmlcov/` | Test execution artifacts |\n| Framework-Specific | `heroku*.session*`, `database-*.json` | Runtime configuration files |\n\n### Framework-Specific Patterns\n\n```mermaid\ngraph LR\n    subgraph \"Runtime Files (Ignored)\"\n        SESSION[\"heroku*.session*\u003cbr/\u003eTelegram Sessions\"]\n        CONFIG[\"config*.json\u003cbr/\u003eUser Configuration\"]\n        DATABASE[\"database-*.json\u003cbr/\u003eRuntime Database\"]\n        MODULES[\"loaded_modules\u003cbr/\u003eModule Cache\"]\n    end\n    \n    subgraph \"Development Files (Ignored)\"\n        CACHE[\"*cache*.json\u003cbr/\u003eApplication Cache\"]\n        LOGS[\"heroku.log.*\u003cbr/\u003eApplication Logs\"]\n        ERRORS[\"unknown_errors.txt\u003cbr/\u003eError Logs\"]\n        MEDIA[\"*.webp, *.mp4, *.tgs\u003cbr/\u003eMedia Files\"]\n    end\n    \n    subgraph \"Deployment Files (Ignored)\"\n        HEROKU_DIR[\".heroku/\u003cbr/\u003eHeroku Platform\"]\n        APT[\".apt/\u003cbr/\u003eSystem Packages\"]\n        VENDOR[\"vendor/\u003cbr/\u003eBundled Dependencies\"]\n        PROFILE[\".profile.d/\u003cbr/\u003eEnvironment Scripts\"]\n    end\n```\n\n**Sources:** [.gitignore:136-174]()\n\n## IDE and Editor Configuration\n\nThe framework supports multiple development environments with specific configuration patterns.\n\n### VS Code Configuration\n\nThe `.vscode/` directory (ignored by git) contains:\n- Workspace settings for Python development\n- Debugging configurations\n- Extension recommendations\n- Task definitions for common operations\n\n### IntelliJ/PyCharm Configuration\n\nThe `.idea/` directory (ignored by git) includes:\n- Project structure definitions\n- Code style settings\n- Run/debug configurations\n- Plugin configurations\n\n### Development File Structure\n\n```mermaid\ngraph TB\n    subgraph \"Working Directory\"\n        ROOT[\"/\"] --\u003e HEROKU[\"heroku/\u003cbr/\u003eCore Package\"]\n        ROOT --\u003e CONFIGS[\"Configuration Files\"]\n        ROOT --\u003e SCRIPTS[\"Setup Scripts\"]\n    end\n    \n    subgraph \"Generated (Ignored)\"\n        VENV[\"venv/\u003cbr/\u003eVirtual Environment\"]\n        PYCACHE[\"__pycache__/\u003cbr/\u003ePython Cache\"]\n        COVERAGE[\".coverage\u003cbr/\u003eTest Coverage\"]\n        PYTEST[\".pytest_cache/\u003cbr/\u003eTest Cache\"]\n    end\n    \n    subgraph \"IDE (Ignored)\"\n        VSCODE_DIR[\".vscode/\u003cbr/\u003eVS Code Settings\"]\n        IDEA_DIR[\".idea/\u003cbr/\u003eIntelliJ Settings\"]\n        CACHE_DIR[\".cache\u003cbr/\u003eTool Cache\"]\n    end\n    \n    subgraph \"Runtime (Ignored)\"\n        SESSIONS[\"heroku*.session*\u003cbr/\u003eActive Sessions\"]\n        DBFILES[\"database-*.json\u003cbr/\u003eRuntime DB\"]\n        LOGS[\"*.log\u003cbr/\u003eApplication Logs\"]\n    end\n```\n\n**Sources:** [.gitignore:134-174](), [.gitignore:145-149]()\n\n## Local Development Workflow\n\nThe development workflow accommodates both standalone and containerized development approaches.\n\n### Standalone Development\n\n1. **Environment Activation**: Activate virtual environment using `venv/` or equivalent\n2. **Dependency Installation**: Install requirements from `requirements.txt`\n3. **Configuration Setup**: Create local configuration files (excluded from git)\n4. **Development Server**: Run development instance for testing\n\n### Containerized Development\n\n1. **Container Build**: Build development image with dependencies\n2. **Volume Mounting**: Mount source code for live reloading\n3. **Port Mapping**: Expose port 8080 for web interface testing\n4. **Debug Access**: Configure container for debugging access\n\n### Testing Environment\n\n```mermaid\ngraph LR\n    subgraph \"Test Infrastructure\"\n        PYTEST[\".pytest_cache/\u003cbr/\u003eTest Cache\"]\n        COV[\".coverage\u003cbr/\u003eCoverage Data\"]\n        HTMLCOV[\"htmlcov/\u003cbr/\u003eCoverage Reports\"]\n        TOX[\".tox/\u003cbr/\u003eMulti-env Testing\"]\n    end\n    \n    subgraph \"Test Types\"\n        UNIT[\"Unit Tests\u003cbr/\u003eModule Testing\"]\n        INTEGRATION[\"Integration Tests\u003cbr/\u003eSystem Testing\"]\n        E2E[\"End-to-End Tests\u003cbr/\u003eFull Workflow\"]\n    end\n    \n    subgraph \"Coverage Analysis\"\n        COLLECT[\"Coverage Collection\"]\n        REPORT[\"HTML Reports\"]\n        THRESHOLD[\"Coverage Thresholds\"]\n    end\n    \n    PYTEST --\u003e UNIT\n    COV --\u003e COLLECT\n    HTMLCOV --\u003e REPORT\n    TOX --\u003e INTEGRATION\n```\n\n**Sources:** [.gitignore:42-54](), [.gitignore:144-148]()\n\n## Environment Variables and Secrets\n\nDevelopment requires careful handling of sensitive configuration data that must be excluded from version control.\n\n### Protected Configuration Files\n\n| File Pattern | Purpose | Security Level |\n|--------------|---------|----------------|\n| `.env` | Environment variables | Sensitive |\n| `api_token.txt` | API credentials | Critical |\n| `config.ini` | Application configuration | Sensitive |\n| `heroku*.session*` | Telegram sessions | Critical |\n| `database-*.json` | Runtime database | Sensitive |\n\n### Development Security\n\n- All session files are automatically excluded from git\n- Configuration files use local-only patterns\n- API tokens require separate secure storage\n- Database files remain environment-specific\n\n**Sources:** [.gitignore:106-108](), [.gitignore:136-155]()"])</script><script>self.__next_f.push([1,"28:T2d69,"])</script><script>self.__next_f.push([1,"# Dependency Management\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [banner.sh](banner.sh)\n- [docker.sh](docker.sh)\n- [poetry.lock](poetry.lock)\n- [requirements.txt](requirements.txt)\n\n\u003c/details\u003e\n\n\n\nThis document covers the dependency management system for the Heroku Telegram userbot framework, including package installation, version control, and deployment considerations across different platforms. The framework uses a dual approach with both Poetry and traditional requirements.txt files to handle Python dependencies.\n\nFor information about development environment setup, see [Development Environment](#6.1). For deployment-specific configurations, see [Deployment and Maintenance](#8).\n\n## Overview\n\nThe Heroku userbot framework employs a comprehensive dependency management strategy that supports multiple deployment environments from local development to containerized cloud deployments. The system uses Poetry as the primary dependency management tool while maintaining compatibility with traditional pip-based workflows through `requirements.txt`.\n\n### Primary Dependency Management Tools\n\n| Tool | Purpose | Primary Use Case |\n|------|---------|------------------|\n| Poetry | Development dependency management | Local development, version locking |\n| pip + requirements.txt | Production deployment | Docker containers, cloud platforms |\n| docker-compose | Container orchestration | Automated deployment environments |\n\nSources: [requirements.txt:1-5](), [poetry.lock:1-974](), [docker.sh:38-42]()\n\n## Core Dependency Architecture\n\nThe framework's dependencies are organized into several functional categories that support different aspects of the userbot system:\n\n```mermaid\ngraph TB\n    subgraph \"Dependency Categories\"\n        TELEGRAM[\"Telegram Integration\"]\n        WEB[\"Web Framework\"]\n        ASYNC[\"Async Runtime\"]\n        CRYPTO[\"Cryptography\"]\n        UTILS[\"Utilities\"]\n        DEV[\"Development Tools\"]\n    end\n    \n    subgraph \"Telegram Integration\"\n        HEROKU_TL[\"heroku-tl-new==1.1.3\"]\n        AIOGRAM[\"aiogram==2.19\"]\n        TGCRYPTO[\"tgcrypto==1.2.5\"]\n        PYAES[\"pyaes==1.6.1\"]\n        RSA[\"rsa==4.9\"]\n    end\n    \n    subgraph \"Web Framework\"\n        AIOHTTP[\"aiohttp==3.8.3\"]\n        JINJA2[\"jinja2==3.0.3\"]\n        AIOHTTP_JINJA2[\"aiohttp-jinja2==1.5\"]\n        WERKZEUG[\"werkzeug==2.2.2\"]\n    end\n    \n    subgraph \"Async Runtime\"\n        AIOFILE[\"aiofile==3.8.1\"]\n        CAIO[\"caio==0.9.13\"]\n        AIOSIGNAL[\"aiosignal==1.3.1\"]\n        ASYNC_TIMEOUT[\"async-timeout==4.0.3\"]\n    end\n    \n    subgraph \"Utilities\"\n        REQUESTS[\"requests==2.27.1\"]\n        PSUTIL[\"psutil==5.9.4\"]\n        PILLOW[\"Pillow\"]\n        PYCLOUDFLARED[\"pycloudflared==0.2.0\"]\n        RUAMEL_YAML[\"ruamel-yaml==0.17.21\"]\n        GITPYTHON[\"gitpython==3.1.27\"]\n    end\n    \n    TELEGRAM --\u003e HEROKU_TL\n    TELEGRAM --\u003e AIOGRAM\n    TELEGRAM --\u003e TGCRYPTO\n    WEB --\u003e AIOHTTP\n    WEB --\u003e JINJA2\n    ASYNC --\u003e AIOFILE\n    UTILS --\u003e PILLOW\n    UTILS --\u003e PYCLOUDFLARED\n```\n\nSources: [requirements.txt:1-5](), [poetry.lock:397-410](), [poetry.lock:20-37](), [poetry.lock:786-848]()\n\n## Dependency Installation Workflows\n\n### Poetry-Based Development Workflow\n\nThe framework uses Poetry for comprehensive dependency management with precise version locking:\n\n```mermaid\nflowchart TD\n    START[\"poetry install\"] --\u003e LOCK_CHECK{\"poetry.lock exists?\"}\n    LOCK_CHECK --\u003e|Yes| INSTALL_LOCKED[\"Install exact versions from lock\"]\n    LOCK_CHECK --\u003e|No| RESOLVE_DEPS[\"Resolve dependencies\"]\n    RESOLVE_DEPS --\u003e CREATE_LOCK[\"Generate poetry.lock\"]\n    CREATE_LOCK --\u003e INSTALL_LOCKED\n    INSTALL_LOCKED --\u003e VENV_READY[\"Virtual environment ready\"]\n    \n    UPDATE[\"poetry update\"] --\u003e RESOLVE_NEW[\"Resolve latest compatible versions\"]\n    RESOLVE_NEW --\u003e UPDATE_LOCK[\"Update poetry.lock\"]\n    UPDATE_LOCK --\u003e VENV_READY\n    \n    ADD_DEP[\"poetry add package\"] --\u003e UPDATE_PYPROJECT[\"Update pyproject.toml\"]\n    UPDATE_PYPROJECT --\u003e RESOLVE_NEW\n```\n\n### Docker-Based Production Workflow\n\nThe Docker deployment process handles dependency installation automatically:\n\n```mermaid\nflowchart TD\n    DOCKER_BUILD[\"docker-compose build\"] --\u003e COPY_REQS[\"Copy requirements.txt\"]\n    COPY_REQS --\u003e PIP_INSTALL[\"pip install -r requirements.txt\"]\n    PIP_INSTALL --\u003e INSTALL_COMPOSE{\"docker-compose installed?\"}\n    INSTALL_COMPOSE --\u003e|No| INSTALL_DOCKER_COMPOSE[\"pip install -U docker-compose\"]\n    INSTALL_COMPOSE --\u003e|Yes| CONTAINER_READY[\"Container ready\"]\n    INSTALL_DOCKER_COMPOSE --\u003e CONTAINER_READY\n    \n    subgraph \"Platform Detection\"\n        DEBIAN[\"apt-get install dependencies\"]\n        ARCH[\"pacman -Syu docker\"]\n        RHEL[\"yum install dependencies\"]\n    end\n    \n    CONTAINER_READY --\u003e PLATFORM_DEPS[\"Install platform dependencies\"]\n    PLATFORM_DEPS --\u003e DEBIAN\n    PLATFORM_DEPS --\u003e ARCH  \n    PLATFORM_DEPS --\u003e RHEL\n```\n\nSources: [docker.sh:11-45](), [docker.sh:38-42]()\n\n## Core Dependencies Analysis\n\n### Telegram Integration Stack\n\nThe framework's Telegram functionality depends on a custom Telethon fork and aiogram:\n\n| Package | Version | Purpose |\n|---------|---------|---------|\n| `heroku-tl-new` | 1.1.3 | Custom Telethon fork for userbot functionality |\n| `aiogram` | 2.19 | Alternative Telegram bot framework |\n| `tgcrypto` | 1.2.5 | Fast cryptography for Telegram |\n| `pyaes` | 1.6.1 | AES encryption implementation |\n| `rsa` | 4.9 | RSA cryptography for Telegram auth |\n\nThe `heroku-tl-new` package is a specialized fork that provides userbot-specific features not available in standard Telethon.\n\nSources: [requirements.txt:1](), [poetry.lock:397-410](), [poetry.lock:786-848]()\n\n### Web Framework Dependencies\n\nThe web interface relies on an asyncio-based HTTP stack:\n\n```mermaid\ngraph TB\n    subgraph \"Web Stack\"\n        AIOHTTP_CORE[\"aiohttp==3.8.3\u003cbr/\u003eCore HTTP framework\"]\n        JINJA2_ENGINE[\"jinja2==3.0.3\u003cbr/\u003eTemplate engine\"]\n        AIOHTTP_JINJA2_INTEGRATION[\"aiohttp-jinja2==1.5\u003cbr/\u003eTemplate integration\"]\n        WERKZEUG_UTILS[\"werkzeug==2.2.2\u003cbr/\u003eWSGI utilities\"]\n    end\n    \n    subgraph \"Supporting Libraries\"\n        AIOSIGNAL_CORE[\"aiosignal==1.3.1\u003cbr/\u003eSignal handling\"]\n        ASYNC_TIMEOUT_CORE[\"async-timeout==4.0.3\u003cbr/\u003eTimeout management\"]\n        MULTIDICT_CORE[\"multidict==6.0.4\u003cbr/\u003eMulti-value dictionaries\"]\n        YARL_CORE[\"yarl==1.9.2\u003cbr/\u003eURL parsing\"]\n    end\n    \n    AIOHTTP_CORE --\u003e AIOSIGNAL_CORE\n    AIOHTTP_CORE --\u003e MULTIDICT_CORE\n    AIOHTTP_CORE --\u003e YARL_CORE\n    JINJA2_ENGINE --\u003e AIOHTTP_JINJA2_INTEGRATION\n    AIOHTTP_JINJA2_INTEGRATION --\u003e AIOHTTP_CORE\n```\n\nSources: [poetry.lock:40-143](), [poetry.lock:425-440](), [poetry.lock:147-161]()\n\n### Asynchronous I/O Dependencies\n\nFile operations and async utilities form a critical foundation:\n\n| Package | Version | Core Functionality |\n|---------|---------|-------------------|\n| `aiofile` | 3.8.1 | Asynchronous file operations |\n| `caio` | 0.9.13 | C-based async I/O backend |\n| `async-timeout` | 4.0.3 | Timeout context managers |\n\nThe `caio` package provides platform-specific optimized I/O for Linux, macOS, and Windows environments.\n\nSources: [poetry.lock:3-17](), [poetry.lock:220-245](), [poetry.lock:177-185]()\n\n## Platform-Specific Dependency Handling\n\n### Docker Installation Process\n\nThe Docker setup script handles dependency installation across multiple Linux distributions:\n\n```mermaid\nflowchart TD\n    CHECK_DOCKER[\"Check docker-compose availability\"] --\u003e DISTRO_DETECT{\"Detect Linux distribution\"}\n    \n    DISTRO_DETECT --\u003e|/etc/debian_version| DEBIAN_INSTALL[\"Install via apt-get\u003cbr/\u003edocker-ce, docker-ce-cli, containerd.io\"]\n    DISTRO_DETECT --\u003e|/etc/arch-release| ARCH_INSTALL[\"Install via pacman\u003cbr/\u003edocker --noconfirm\"]\n    DISTRO_DETECT --\u003e|/etc/redhat-release| RHEL_INSTALL[\"Install via yum\u003cbr/\u003edocker-ce from repo\"]\n    \n    DEBIAN_INSTALL --\u003e INSTALL_COMPOSE[\"pip install -U docker-compose\"]\n    ARCH_INSTALL --\u003e INSTALL_COMPOSE\n    RHEL_INSTALL --\u003e INSTALL_COMPOSE\n    \n    INSTALL_COMPOSE --\u003e SET_PERMISSIONS[\"chmod +x /usr/local/bin/docker-compose\"]\n    SET_PERMISSIONS --\u003e BUILD_IMAGE[\"docker-compose up -d --build\"]\n```\n\nSources: [docker.sh:11-45]()\n\n### Python Version Compatibility\n\nThe framework maintains compatibility across Python versions with specific constraints:\n\n| Component | Python Requirement | Notes |\n|-----------|-------------------|-------|\n| Core framework | \u003e=3.9 | Specified in requirements.txt |\n| Poetry environment | ^3.8 | Broader compatibility for development |\n| aiogram | * | No specific version constraint |\n| aiohttp | \u003e=3.6 | Minimum for async features |\n\nSources: [requirements.txt:5](), [poetry.lock:972]()\n\n## Dependency Security and Version Management\n\n### Version Pinning Strategy\n\nThe framework employs different version pinning strategies based on deployment context:\n\n```mermaid\ngraph TB\n    subgraph \"Production Dependencies\"\n        PINNED[\"Exact versions\u003cbr/\u003eheroku-tl-new==1.1.3\"]\n        FLEXIBLE[\"Flexible versions\u003cbr/\u003ePillow (latest)\"]\n    end\n    \n    subgraph \"Development Dependencies\"\n        POETRY_LOCK[\"poetry.lock\u003cbr/\u003eExact hashes and versions\"]\n        CONSTRAINTS[\"Version constraints\u003cbr/\u003eCompatible ranges\"]\n    end\n    \n    subgraph \"Security Considerations\"\n        CRYPTO_PINNED[\"Crypto libraries\u003cbr/\u003eFixed versions for security\"]\n        PLATFORM_SPECIFIC[\"Platform wheels\u003cbr/\u003eVerified binary distributions\"]\n    end\n    \n    PINNED --\u003e CRYPTO_PINNED\n    POETRY_LOCK --\u003e PLATFORM_SPECIFIC\n```\n\n### Critical Dependencies\n\nSeveral dependencies require careful version management due to security implications:\n\n| Package | Security Importance | Version Control |\n|---------|-------------------|-----------------|\n| `tgcrypto` | High - Telegram encryption | Pinned to 1.2.5 |\n| `rsa` | High - Authentication | Pinned to 4.9 |\n| `pyaes` | High - Encryption backend | Pinned to 1.6.1 |\n| `aiohttp` | Medium - Web security | Constrained to 3.8.x |\n| `requests` | Medium - HTTP security | Constrained to 2.27.x |\n\nSources: [poetry.lock:786-848](), [poetry.lock:684-695](), [poetry.lock:631-638]()\n\n## Development and Production Separation\n\n### Environment-Specific Dependencies\n\nThe framework separates development and production dependencies through Poetry's dependency groups:\n\n```mermaid\nflowchart TB\n    subgraph \"Development Only\"\n        DEV_TOOLS[\"Development tools\u003cbr/\u003eTesting, linting, debugging\"]\n        DEV_SERVERS[\"Development servers\u003cbr/\u003eHot reload, debugging\"]\n    end\n    \n    subgraph \"Production Core\"\n        RUNTIME_DEPS[\"Runtime dependencies\u003cbr/\u003erequirements.txt\"]\n        PLATFORM_DEPS[\"Platform libraries\u003cbr/\u003eDocker, cloud-specific\"]\n    end\n    \n    subgraph \"Shared Dependencies\"\n        CORE_FRAMEWORK[\"Core framework\u003cbr/\u003eTelegram, web, async\"]\n        UTILITIES[\"Utility libraries\u003cbr/\u003eFile I/O, crypto, networking\"]\n    end\n    \n    DEV_TOOLS --\u003e SHARED_DEPENDENCIES\n    RUNTIME_DEPS --\u003e SHARED_DEPENDENCIES\n    SHARED_DEPENDENCIES --\u003e CORE_FRAMEWORK\n    SHARED_DEPENDENCIES --\u003e UTILITIES\n```\n\n### Deployment Optimization\n\nDifferent deployment targets optimize dependency installation:\n\n| Deployment Type | Optimization Strategy | Dependencies Source |\n|----------------|----------------------|-------------------|\n| Local Development | Full dependency tree with dev tools | `poetry install` |\n| Docker Production | Minimal runtime dependencies | `requirements.txt` |\n| Cloud Deployment | Platform-optimized binaries | `poetry.lock` constraints |\n| Mobile (Termux) | Lightweight dependency subset | Platform-specific requirements |\n\nSources: [requirements.txt:1-5](), [poetry.lock:970-974](), [docker.sh:40-42]()"])</script><script>self.__next_f.push([1,"29:T2d36,"])</script><script>self.__next_f.push([1,"# Extending Heroku\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [CHANGELOG.md](CHANGELOG.md)\n- [LICENSE](LICENSE)\n- [README.md](README.md)\n\n\u003c/details\u003e\n\n\n\nThis document provides a comprehensive guide for developers who want to extend the Heroku Telegram userbot framework with custom modules and features. It covers the framework's extensibility architecture, module system design, security model, and development patterns that enable safe and powerful customizations.\n\nFor specific implementation details about creating custom modules, see [Creating Modules](#7.1). For database operations in extensions, see [Working with the Database](#7.3). For security guidelines and performance optimization, see [Best Practices](#7.4).\n\n## Framework Extensibility Overview\n\nThe Heroku framework is designed as an extensible platform that supports multiple types of extensions while maintaining security and compatibility. The core architecture separates the framework's essential systems from user-extensible components through well-defined interfaces and security boundaries.\n\n```mermaid\ngraph TB\n    subgraph \"Extension Categories\"\n        CUSTOM_MODULES[\"Custom Modules\u003cbr/\u003eUser-developed functionality\"]\n        LEGACY_MODULES[\"Legacy Modules\u003cbr/\u003eFTG/GeekTG/Hikka compatible\"]\n        CORE_MODULES[\"Core Modules\u003cbr/\u003eFramework essentials\"]\n        LIBRARIES[\"Libraries\u003cbr/\u003eShared functionality\"]\n    end\n    \n    subgraph \"Extension APIs\"\n        LOADER_API[\"loader module\u003cbr/\u003e@loader.command decorators\"]\n        UTILS_API[\"utils module\u003cbr/\u003eHelper functions\"]\n        DATABASE_API[\"database.Database\u003cbr/\u003eData persistence\"]\n        INLINE_API[\"inline module\u003cbr/\u003eInteractive elements\"]\n        CLIENT_API[\"TelegramClient\u003cbr/\u003eTelegram API access\"]\n    end\n    \n    subgraph \"Security Layer\"\n        MODULE_VALIDATOR[\"Module Validator\u003cbr/\u003eCode analysis\"]\n        SECURITY_GROUPS[\"Security Groups\u003cbr/\u003ePermission system\"]\n        SCAM_PROTECTION[\"Scam Protection\u003cbr/\u003eMalicious code detection\"]\n    end\n    \n    subgraph \"Runtime Environment\"\n        DISPATCHER[\"Command Dispatcher\u003cbr/\u003eEvent processing\"]\n        MODULE_MANAGER[\"Module Manager\u003cbr/\u003eLifecycle management\"]\n        CONFIG_SYSTEM[\"Configuration System\u003cbr/\u003eSettings management\"]\n    end\n    \n    CUSTOM_MODULES --\u003e SECURITY_LAYER\n    LEGACY_MODULES --\u003e SECURITY_LAYER\n    LIBRARIES --\u003e SECURITY_LAYER\n    \n    SECURITY_LAYER --\u003e LOADER_API\n    SECURITY_LAYER --\u003e UTILS_API\n    SECURITY_LAYER --\u003e DATABASE_API\n    SECURITY_LAYER --\u003e INLINE_API\n    SECURITY_LAYER --\u003e CLIENT_API\n    \n    LOADER_API --\u003e RUNTIME_ENVIRONMENT\n    UTILS_API --\u003e RUNTIME_ENVIRONMENT\n    DATABASE_API --\u003e RUNTIME_ENVIRONMENT\n    INLINE_API --\u003e RUNTIME_ENVIRONMENT\n    CLIENT_API --\u003e RUNTIME_ENVIRONMENT\n    \n    CORE_MODULES --\u003e RUNTIME_ENVIRONMENT\n```\n\n*Sources: CHANGELOG.md:1-200, README.md:40-50*\n\n## Module System Architecture\n\nThe Heroku module system provides a robust foundation for extending functionality through a decorator-based API and comprehensive lifecycle management. Modules are Python classes that inherit from a base module interface and use decorators to register commands, watchers, and handlers.\n\n### Module Loading and Registration Flow\n\n```mermaid\nflowchart TD\n    MODULE_SOURCE[\"Module Source\u003cbr/\u003ePython file or URL\"]\n    \n    MODULE_SOURCE --\u003e VALIDATION[\"Module Validation\u003cbr/\u003eSecurity checks\"]\n    VALIDATION --\u003e PARSING[\"AST Parsing\u003cbr/\u003eExtract class definition\"]\n    PARSING --\u003e INSTANTIATION[\"Module Instantiation\u003cbr/\u003eCreate module object\"]\n    \n    INSTANTIATION --\u003e DECORATOR_PROCESSING[\"Decorator Processing\u003cbr/\u003e@loader.command registration\"]\n    DECORATOR_PROCESSING --\u003e DEPENDENCY_CHECK[\"Dependency Check\u003cbr/\u003eRequirements validation\"]\n    DEPENDENCY_CHECK --\u003e REGISTRATION[\"Command Registration\u003cbr/\u003eAdd to dispatcher\"]\n    \n    REGISTRATION --\u003e CONFIG_INIT[\"Configuration Init\u003cbr/\u003eSetup module config\"]\n    CONFIG_INIT --\u003e DATABASE_INIT[\"Database Init\u003cbr/\u003eAllocate storage\"]\n    DATABASE_INIT --\u003e READY[\"Module Ready\u003cbr/\u003eAvailable for use\"]\n    \n    VALIDATION --\u003e|\"Security violation\"| REJECTION[\"Module Rejection\u003cbr/\u003eLoad failed\"]\n    DEPENDENCY_CHECK --\u003e|\"Missing deps\"| AUTO_INSTALL[\"Auto Installation\u003cbr/\u003epip install\"]\n    AUTO_INSTALL --\u003e REGISTRATION\n```\n\n*Sources: CHANGELOG.md:400-460, CHANGELOG.md:800-850*\n\n### Module API Structure\n\nThe framework provides several key APIs for module development:\n\n| API Category | Primary Classes | Key Methods | Purpose |\n|--------------|----------------|-------------|---------|\n| Command System | `loader` | `@loader.command`, `@loader.watcher` | Register commands and event handlers |\n| Data Persistence | `database.Database` | `get()`, `set()`, `pointer()` | Store and retrieve module data |\n| Telegram Integration | `CustomTelegramClient` | `send_message()`, `get_entity()` | Interact with Telegram API |\n| User Interface | `inline.InlineManager` | `form()`, `gallery()`, `list()` | Create interactive elements |\n| Utility Functions | `utils` | `answer()`, `get_chat_id()` | Common operations |\n\n*Sources: CHANGELOG.md:350-400, CHANGELOG.md:450-500*\n\n## Security and Compatibility Model\n\nThe framework implements a multi-layered security model that protects users while enabling powerful extensions. This includes module source verification, code analysis, and runtime permission controls.\n\n### Security Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Module Sources\"\n        OFFICIAL_REPO[\"Official Repository\u003cbr/\u003eVerified and trusted\"]\n        TRUSTED_DEVS[\"Trusted Developers\u003cbr/\u003eCommunity verified\"]\n        UNKNOWN_SOURCE[\"Unknown Sources\u003cbr/\u003eHigh risk modules\"]\n        LEGACY_COMPAT[\"Legacy Compatibility\u003cbr/\u003eFTG/GeekTG/Hikka\"]\n    end\n    \n    subgraph \"Security Validation\"\n        SOURCE_CHECK[\"Source Verification\u003cbr/\u003eRepository trust level\"]\n        CODE_ANALYSIS[\"Static Analysis\u003cbr/\u003eMalicious pattern detection\"]\n        PERMISSION_CHECK[\"Permission Validation\u003cbr/\u003eAPI access control\"]\n        SANDBOX_TEST[\"Sandbox Testing\u003cbr/\u003eRuntime behavior check\"]\n    end\n    \n    subgraph \"Runtime Security\"\n        SECURITY_GROUPS[\"Security Groups\u003cbr/\u003eUser permission levels\"]\n        API_LIMITER[\"API Rate Limiting\u003cbr/\u003eFlood protection\"]\n        TARGETED_RULES[\"Targeted Security\u003cbr/\u003eCommand-specific rules\"]\n        ENTITY_CACHE[\"Entity Caching\u003cbr/\u003eReduced API calls\"]\n    end\n    \n    OFFICIAL_REPO --\u003e SOURCE_CHECK\n    TRUSTED_DEVS --\u003e SOURCE_CHECK\n    UNKNOWN_SOURCE --\u003e SOURCE_CHECK\n    LEGACY_COMPAT --\u003e SOURCE_CHECK\n    \n    SOURCE_CHECK --\u003e CODE_ANALYSIS\n    CODE_ANALYSIS --\u003e PERMISSION_CHECK\n    PERMISSION_CHECK --\u003e SANDBOX_TEST\n    \n    SANDBOX_TEST --\u003e SECURITY_GROUPS\n    SECURITY_GROUPS --\u003e API_LIMITER\n    API_LIMITER --\u003e TARGETED_RULES\n    TARGETED_RULES --\u003e ENTITY_CACHE\n```\n\n*Sources: CHANGELOG.md:100-150, CHANGELOG.md:300-350*\n\n## Development Patterns and APIs\n\n### Decorator-Based Command Registration\n\nThe framework uses Python decorators to register module functionality:\n\n```python\n@loader.command(\n    ru_doc=\"Команда на русском\",\n    alias=\"shortcmd\"\n)\nasync def example_command(self, message):\n    \"\"\"Command documentation\"\"\"\n    await utils.answer(message, \"Response\")\n\n@loader.watcher(\n    tags=[\"no_pm\", \"only_groups\"]\n)\nasync def message_watcher(self, message):\n    \"\"\"Handle incoming messages\"\"\"\n    pass\n```\n\n### Configuration System Integration\n\nModules can define configuration options using the validator system:\n\n```python\ndef __init__(self):\n    self.config = {\n        \"api_key\": loader.validators.String(\n            doc=\"API key for service\",\n            validator=loader.validators.Hidden()\n        ),\n        \"max_results\": loader.validators.Integer(\n            default=10,\n            minimum=1,\n            maximum=100\n        )\n    }\n```\n\n*Sources: CHANGELOG.md:600-650, CHANGELOG.md:250-300*\n\n## Extension Integration Points\n\n### Database Integration\n\nThe framework provides a flexible database abstraction that supports multiple backends:\n\n```mermaid\ngraph LR\n    subgraph \"Module Data Access\"\n        MODULE_CONFIG[\"Module Config\u003cbr/\u003eself.config\"]\n        MODULE_DB[\"Module Database\u003cbr/\u003eself.db\"]\n        SHARED_STORAGE[\"Shared Storage\u003cbr/\u003eutils.asset_channel\"]\n    end\n    \n    subgraph \"Database Backends\"\n        POSTGRESQL[\"PostgreSQL\u003cbr/\u003eHeroku/Production\"]\n        REDIS[\"Redis\u003cbr/\u003eCaching layer\"]\n        SQLITE[\"SQLite\u003cbr/\u003eLocal development\"]\n        JSON_FILE[\"JSON Files\u003cbr/\u003eFallback storage\"]\n    end\n    \n    MODULE_CONFIG --\u003e DATABASE_API[\"Database API\u003cbr/\u003eget/set/pointer\"]\n    MODULE_DB --\u003e DATABASE_API\n    SHARED_STORAGE --\u003e DATABASE_API\n    \n    DATABASE_API --\u003e POSTGRESQL\n    DATABASE_API --\u003e REDIS\n    DATABASE_API --\u003e SQLITE\n    DATABASE_API --\u003e JSON_FILE\n```\n\n### Inline System Integration\n\nThe inline system provides rich user interface components that modules can leverage:\n\n```mermaid\ngraph TB\n    subgraph \"Inline Components\"\n        FORMS[\"Forms\u003cbr/\u003eButton-based input\"]\n        GALLERIES[\"Galleries\u003cbr/\u003eImage collections\"]\n        LISTS[\"Lists\u003cbr/\u003ePaginated data\"]\n        CUSTOM_MARKUP[\"Custom Markup\u003cbr/\u003eArbitrary buttons\"]\n    end\n    \n    subgraph \"Inline API\"\n        INLINE_MANAGER[\"InlineManager\u003cbr/\u003eComponent coordination\"]\n        CALLBACK_HANDLER[\"Callback Handler\u003cbr/\u003eButton press events\"]\n        QUERY_PROCESSOR[\"Query Processor\u003cbr/\u003eInline queries\"]\n        UNIT_MANAGER[\"Unit Manager\u003cbr/\u003eLifecycle management\"]\n    end\n    \n    subgraph \"Telegram Integration\"\n        INLINE_BOT[\"Inline Bot\u003cbr/\u003e@username interface\"]\n        CALLBACK_QUERIES[\"Callback Queries\u003cbr/\u003eButton interactions\"]\n        INLINE_QUERIES[\"Inline Queries\u003cbr/\u003e@bot search\"]\n    end\n    \n    FORMS --\u003e INLINE_MANAGER\n    GALLERIES --\u003e INLINE_MANAGER\n    LISTS --\u003e INLINE_MANAGER\n    CUSTOM_MARKUP --\u003e INLINE_MANAGER\n    \n    INLINE_MANAGER --\u003e CALLBACK_HANDLER\n    CALLBACK_HANDLER --\u003e QUERY_PROCESSOR\n    QUERY_PROCESSOR --\u003e UNIT_MANAGER\n    \n    UNIT_MANAGER --\u003e INLINE_BOT\n    INLINE_BOT --\u003e CALLBACK_QUERIES\n    CALLBACK_QUERIES --\u003e INLINE_QUERIES\n```\n\n*Sources: CHANGELOG.md:850-900, CHANGELOG.md:950-1000*\n\n## Module Lifecycle and Hooks\n\nThe framework provides several lifecycle hooks that modules can implement:\n\n| Hook Method | Purpose | When Called |\n|-------------|---------|-------------|\n| `__init__()` | Module initialization | During module loading |\n| `client_ready()` | Client connection established | After Telegram auth |\n| `on_dlmod()` | Module installation | After successful download |\n| `on_unload()` | Module cleanup | Before module removal |\n| `on_lib_update()` | Library version change | During library updates |\n\n### Module State Management\n\n```mermaid\nstateDiagram-v2\n    [*] --\u003e Loading: Module file loaded\n    Loading --\u003e Validating: Security checks\n    Validating --\u003e Failed: Security violation\n    Validating --\u003e Installing: Dependencies\n    Installing --\u003e Registering: Commands/handlers\n    Registering --\u003e Configured: Config setup\n    Configured --\u003e Ready: client_ready() called\n    Ready --\u003e Updating: Module update\n    Ready --\u003e Unloading: User request\n    Updating --\u003e Ready: Update complete\n    Unloading --\u003e [*]: Cleanup complete\n    Failed --\u003e [*]: Load failed\n```\n\n*Sources: CHANGELOG.md:400-450, CHANGELOG.md:700-750*\n\nThe extensibility architecture of Heroku provides developers with powerful tools to create sophisticated Telegram userbot modules while maintaining security and compatibility with existing ecosystems. The framework's modular design, comprehensive APIs, and robust security model enable safe innovation and community-driven development."])</script><script>self.__next_f.push([1,"2a:T30ab,"])</script><script>self.__next_f.push([1,"# Creating Modules\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [CHANGELOG.md](CHANGELOG.md)\n\n\u003c/details\u003e\n\n\n\nThis document provides a detailed guide for developing custom modules for the Heroku Telegram Userbot. It covers the module structure, registration mechanisms, command handlers, and best practices for extending the framework functionality.\n\nFor information about using inline features in modules, see [7.2](). For working with the database in modules, see [7.3](). For best practices and security guidelines, see [7.4]().\n\n## Module Fundamentals\n\nModules are the building blocks of Heroku Userbot's functionality. Each module is a Python class that inherits from the `Module` base class and provides specific features through commands, watchers, inline handlers, and other mechanisms.\n\n```mermaid\nflowchart TD\n    A[\"loader.Module\"] --\u003e B[\"@loader.command\"]\n    A --\u003e C[\"@loader.watcher\"]\n    A --\u003e D[\"@loader.inline_handler\"]\n    A --\u003e E[\"@loader.callback_handler\"]\n    A --\u003e F[\"@loader.raw_handler\"]\n    A --\u003e G[\"loader.ModuleConfig\"]\n    A --\u003e H[\"strings dict\"]\n    \n    B --\u003e I[\"CommandDispatcher\"]\n    C --\u003e J[\"EventDispatcher\"]\n    D --\u003e K[\"InlineManager\"]\n    E --\u003e L[\"InlineManager\"]\n    F --\u003e M[\"TelegramClient\"]\n    G --\u003e N[\"Configurator\"]\n    H --\u003e O[\"Translator\"]\n```\n\nSources: [heroku/loader.py](), [heroku/modules/loader.py]()\n\n## Creating a Basic Module\n\nA basic module requires inheriting from the `Module` base class and defining at least a `strings` dictionary with a `name` entry. Commands are defined as methods decorated with `@loader.command`.\n\nHere's the structure of a simple module:\n\n```mermaid\nclassDiagram\n    class loader_Module {\n        +strings: dict\n        +config: ModuleConfig\n        +internal_init()\n        +config_complete()\n        +client_ready()\n        +on_unload()\n        +command_handler()\n    }\n    \n    class CustomModule {\n        +strings: dict\n        +@loader_command command_handler()\n    }\n    \n    loader_Module \u003c|-- CustomModule\n```\n\nSources: [heroku/loader.py](), [heroku/modules/loader.py]()\n\n### Minimal Module Example\n\nA minimal module would have the following structure:\n\n1. Import the loader\n2. Define a class inheriting from `loader.Module`\n3. Define a `strings` dictionary with at least a `name` entry\n4. Define command methods decorated with `@loader.command`\n\nThe module will be automatically registered when loaded and its commands will be available to users.\n\nSources: [heroku/loader.py](), [heroku/modules/loader.py]()\n\n## Module Registration Process\n\nWhen a module is loaded, it goes through several registration steps:\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant LoaderMod\n    participant Modules\n    participant Module\n    \n    User-\u003e\u003eLoaderModule: .loadmod/.dlmod command\n    LoaderModule-\u003e\u003eModules: register_module(spec)\n    Modules-\u003e\u003eModuleInstance: Create instance\n    ModuleInstance-\u003e\u003eModuleInstance: internal_init()\n    Modules-\u003e\u003eModuleInstance: config_complete()\n    Modules-\u003e\u003eModuleInstance: client_ready()\n    Modules-\u003e\u003eCommandDispatcher: register_commands()\n    Modules-\u003e\u003eCommandDispatcher: register_watchers()\n    Modules-\u003e\u003eInlineManager: register_inline_stuff()\n    Modules-\u003e\u003eTelegramClient: register_raw_handlers()\n```\n\nSources: [heroku/loader.py](), [heroku/modules/loader.py]()\n\n## Command Registration\n\nCommands are the primary way users interact with modules. They are registered using the `@loader.command` decorator.\n\n```mermaid\nflowchart LR\n    A[\"@loader.command()\"] --\u003e B[\"command_method\"]\n    B --\u003e C[\"CommandDispatcher\"]\n    C --\u003e D[\"Security.check()\"]\n    D --\u003e E[\"utils.answer()\"]\n```\n\nSources: [heroku/loader.py](), [heroku/dispatcher.py]()\n\n### Command Example\n\nCommands are defined as methods in your module class and can include aliases for easier access:\n\n```python\n@loader.command(alias=\"hi\")\nasync def hello(self, message):\n    \"\"\"Says hello to the user\"\"\"\n    await utils.answer(message, \"Hello!\")\n```\n\nThe `alias` parameter allows you to define alternative commands that will trigger the same handler. You can also use `@loader.tag` decorator to add additional metadata to your commands.\n\nSources: [heroku/loader.py]()\n\n## Event Watchers\n\nWatchers allow modules to process all events, not just commands. They are registered using the `@loader.watcher` decorator.\n\n```mermaid\nflowchart LR\n    A[\"@loader.watcher()\"] --\u003e B[\"watcher_method\"]\n    B --\u003e C[\"CommandDispatcher\"]\n    C --\u003e D[\"Event Filter\"]\n    D --\u003e E[\"Execute Watcher\"]\n```\n\nSources: [heroku/loader.py](), [heroku/dispatcher.py]()\n\n### Filtering Events with Tags\n\nYou can filter events in watchers using the `@loader.tag` decorator, which provides fine-grained control over which events are processed:\n\n```python\n@loader.watcher(only_messages=True, no_commands=True)\nasync def watch_messages(self, message):\n    \"\"\"Process non-command messages\"\"\"\n    # Process the message here\n```\n\nAvailable tags include:\n- `no_commands` - Ignore all userbot commands\n- `only_messages` - Capture only messages (not join events)\n- `out` - Capture only outgoing events\n- `in` - Capture only incoming events\n- And many more filtering options\n\nSources: [heroku/loader.py]()\n\n## Inline and Callback Handlers\n\nInline handlers process inline queries, while callback handlers process button clicks in inline interfaces.\n\n```mermaid\nflowchart TD\n    A[\"@loader.inline_handler()\"] --\u003e B[\"inline_method\"]\n    C[\"@loader.callback_handler()\"] --\u003e D[\"callback_method\"]\n    \n    B --\u003e E[\"InlineManager\"]\n    D --\u003e E\n    \n    E --\u003e F[\"aiogram.Bot\"]\n    F --\u003e G[\"Telegram API\"]\n```\n\nSources: [heroku/loader.py](), [heroku/inline/manager.py]()\n\n## Raw Event Handlers\n\nRaw handlers allow modules to process low-level Telegram events directly:\n\n```python\n@loader.raw_handler(UpdateChannelMessages, UpdateNewMessage)\nasync def handle_raw_events(self, event):\n    \"\"\"Process raw events\"\"\"\n    # Process the event here\n```\n\nThis provides more direct access to the underlying Telegram API events but requires careful management.\n\nSources: [heroku/loader.py](), [heroku/dispatcher.py]()\n\n## Module Configuration\n\nModules can define configuration options that users can modify:\n\n```mermaid\nclassDiagram\n    class loader_ModuleConfig {\n        +_config: dict\n        +getdef(option)\n        +getdoc(option)\n        +__getitem__(option)\n        +__setitem__(option, value)\n    }\n    \n    class loader_ConfigValue {\n        +validator\n        +doc\n        +default\n    }\n    \n    loader_ModuleConfig \"1\" *-- \"many\" loader_ConfigValue\n```\n\nSources: [heroku/loader.py](), [heroku/configurator.py]()\n\n### Configuration Example\n\n```python\ndef __init__(self):\n    self.config = loader.ModuleConfig(\n        loader.ConfigValue(\n            \"API_KEY\",\n            \"default_key\",\n            lambda: \"API Key for external service\",\n            validator=loader.validators.String()\n        ),\n        loader.ConfigValue(\n            \"ENABLED\",\n            True,\n            lambda: \"Enable this feature\",\n            validator=loader.validators.Boolean()\n        )\n    )\n```\n\nAccess configuration values with `self.config[\"OPTION_NAME\"]` and the system will handle persistent storage and validation.\n\nSources: [heroku/loader.py](), [heroku/configurator.py]()\n\n## Translation Support\n\nModules can support multiple languages through the `strings` dictionary:\n\n```mermaid\nflowchart TD\n    A[\"strings dict\"] --\u003e B[\"name key\"]\n    A --\u003e C[\"@loader.tds docstrings\"]\n    A --\u003e D[\"translation keys\"]\n    \n    B --\u003e E[\"Translator.getkey()\"]\n    C --\u003e E\n    D --\u003e E\n    \n    E --\u003e F[\"localized output\"]\n```\n\nSources: [heroku/loader.py](), [heroku/translations/core.py]()\n\n### Translatable Docstrings\n\nUse the `@loader.tds` decorator to make docstrings translatable:\n\n```python\n@loader.tds\nclass MyModule(loader.Module):\n    \"\"\"Module description that can be translated\"\"\"\n    strings = {\"name\": \"ModuleName\"}\n    \n    @loader.command\n    async def cmd(self, message):\n        \"\"\"Command description that can be translated\"\"\"\n        await utils.answer(message, self.strings(\"some_string\"))\n```\n\nThe `tds` decorator extracts docstrings and makes them available for translation.\n\nSources: [heroku/loader.py](), [heroku/translations/]()\n\n## Module Lifecycle Hooks\n\nModules have several lifecycle hooks for initialization and cleanup:\n\n```mermaid\nsequenceDiagram\n    participant Modules\n    participant ModuleInstance\n    \n    Modules-\u003e\u003eModuleInstance: Create instance\n    ModuleInstance-\u003e\u003eModuleInstance: __init__()\n    ModuleInstance-\u003e\u003eModuleInstance: internal_init()\n    Modules-\u003e\u003eModuleInstance: config_complete()\n    Modules-\u003e\u003eModuleInstance: client_ready()\n    \n    Note over ModuleInstance: Module runs...\n    \n    Modules-\u003e\u003eModuleInstance: on_unload()\n```\n\nThe key lifecycle methods are:\n\n1. `__init__()` - Initial setup, define configs\n2. `internal_init()` - Set up internal state\n3. `config_complete()` - Config has been loaded\n4. `client_ready()` - Client is connected and ready\n5. `on_unload()` - Module is being unloaded\n\nSources: [heroku/loader.py](), [heroku/modules/loader.py]()\n\n### Self-Suspension and Self-Unload\n\nModules can trigger their own unloading or suspension:\n\n- Raise `SelfUnload` to remove the module\n- Raise `SelfSuspend` to temporarily disable the module\n\n```python\nasync def client_ready(self):\n    if not some_requirement_met:\n        raise loader.SelfUnload(\"Required dependency not available\")\n```\n\nSources: [heroku/loader.py](), [heroku/modules/loader.py]()\n\n## Creating Infinite Loops\n\nFor tasks that need to run periodically, use the `@loader.loop` decorator:\n\n```python\n@loader.loop(interval=60, autostart=True)\nasync def check_something(self):\n    \"\"\"Check something every minute\"\"\"\n    # Do something periodically\n```\n\nThe loop will be managed by the module system, automatically starting and stopping with the module.\n\nSources: [heroku/loader.py]()\n\n## Best Practices\n\n### Security Decorators\n\nUse security decorators to restrict access to commands:\n\n- `@loader.owner` - Only the bot owner can use\n- `@loader.group_owner` - Only the group owner can use\n- `@loader.group_admin` - Only group admins can use\n- `@loader.pm` - Only usable in private messages\n- `@loader.unrestricted` - Anyone can use\n\n```python\n@loader.command\n@loader.owner\nasync def sensitive_command(self, message):\n    \"\"\"Only the owner can use this command\"\"\"\n    # Command implementation\n```\n\nSources: [heroku/loader.py](), [heroku/security.py]()\n\n### Error Handling\n\nProperly handle errors to prevent your module from crashing:\n\n```python\n@loader.command\nasync def risky_command(self, message):\n    \"\"\"Command that might fail\"\"\"\n    try:\n        # Risky operation\n    except Exception as e:\n        await utils.answer(message, f\"Error: {e}\")\n        logger.exception(\"Error in risky_command\")\n```\n\nSources: [heroku/loader.py](), [heroku/utils.py]()\n\n### Module Metadata\n\nAdd metadata to make your module more user-friendly:\n\n```python\n# meta developer: @username\n# scope: heroku_min 1.3.0\n# requires: requests pillow\n```\n\nThese comments are processed during module loading to handle dependencies, version requirements, and developer attribution.\n\nSources: [heroku/modules/loader.py]()\n\n## Publishing Modules\n\nModules can be distributed:\n\n1. As standalone `.py` files that users can load with `.loadmod`\n2. Through repositories that users can add with `.addrepo`\n3. By sharing links to GitHub or GitLab repositories\n\nMake sure to include proper documentation and handle dependencies appropriately.\n\nSources: [heroku/modules/loader.py]()\n\n## Module Loading Methods\n\nThere are several ways to load modules:\n\n```mermaid\nflowchart TD\n    A[\"Load Module\"] --\u003e|\".loadmod file.py\"| B[\"LoaderModule.loadmod()\"]\n    A --\u003e|\".dlmod module_name\"| C[\"LoaderModule.dlmod()\"]\n    A --\u003e|\".loadmod URL\"| D[\"LoaderModule.loadmod()\"]\n    \n    B --\u003e E[\"Modules.register_module()\"]\n    C --\u003e E\n    D --\u003e E\n    \n    E --\u003e F[\"Module Instance\"]\n```\n\nSources: [heroku/modules/loader.py]()\n\n## Summary\n\nCreating a module for Heroku involves:\n\n1. Creating a class that inherits from `loader.Module`\n2. Defining a `strings` dictionary with at least a `name` entry\n3. Adding commands with the `@loader.command` decorator\n4. Optionally adding watchers, inline handlers, and callback handlers\n5. Optionally defining configuration options\n6. Implementing lifecycle hooks as needed\n\nWith this knowledge, you can extend Hikka Userbot with your own custom functionality."])</script><script>self.__next_f.push([1,"2b:T3036,"])</script><script>self.__next_f.push([1,"# Using Inline Features\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [CHANGELOG.md](CHANGELOG.md)\n\n\u003c/details\u003e\n\n\n\nThis document provides a comprehensive guide for developers implementing inline functionality in custom Heroku userbot modules. It covers the practical aspects of creating inline handlers, interactive components, and managing user interactions through the inline bot system.\n\nFor general information about the inline system architecture, see [Inline System](#4). For detailed technical documentation of specific components, see [Inline Manager](#4.1), [Forms](#4.2), [Galleries](#4.3), and [Lists](#4.4).\n\n## Overview\n\nThe Heroku framework provides a sophisticated inline bot system that enables rich user interactions through Telegram's inline functionality. This system allows modules to create interactive interfaces with buttons, forms, galleries, and lists that respond to user input in real-time.\n\n## Inline System Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Module Development Layer\"\n        DEV_MODULE[\"Custom Module\"]\n        INLINE_HANDLERS[\"@loader.inline_handler\"]\n        CALLBACK_HANDLERS[\"@loader.callback_handler\"]\n        COMPONENT_CALLS[\"self.inline.form/gallery/list\"]\n    end\n    \n    subgraph \"Inline Manager Core\"\n        INLINE_MANAGER[\"InlineManager\"]\n        QUERY_PROCESSOR[\"Query Processor\"]\n        CALLBACK_PROCESSOR[\"Callback Processor\"]\n        SECURITY_CHECKER[\"Security Checker\"]\n    end\n    \n    subgraph \"Interactive Components\"\n        FORMS[\"Forms System\"]\n        GALLERIES[\"Galleries System\"]\n        LISTS[\"Lists System\"]\n        CUSTOM_MARKUP[\"Custom Markup Generator\"]\n    end\n    \n    subgraph \"Telegram Integration\"\n        INLINE_BOT[\"Inline Bot\"]\n        INLINE_QUERIES[\"Inline Queries\"]\n        CALLBACK_QUERIES[\"Callback Queries\"]\n        TELEGRAM_API[\"Telegram Bot API\"]\n    end\n    \n    DEV_MODULE --\u003e INLINE_HANDLERS\n    DEV_MODULE --\u003e CALLBACK_HANDLERS\n    DEV_MODULE --\u003e COMPONENT_CALLS\n    \n    INLINE_HANDLERS --\u003e INLINE_MANAGER\n    CALLBACK_HANDLERS --\u003e INLINE_MANAGER\n    COMPONENT_CALLS --\u003e INLINE_MANAGER\n    \n    INLINE_MANAGER --\u003e QUERY_PROCESSOR\n    INLINE_MANAGER --\u003e CALLBACK_PROCESSOR\n    INLINE_MANAGER --\u003e SECURITY_CHECKER\n    \n    QUERY_PROCESSOR --\u003e FORMS\n    QUERY_PROCESSOR --\u003e GALLERIES\n    QUERY_PROCESSOR --\u003e LISTS\n    CALLBACK_PROCESSOR --\u003e CUSTOM_MARKUP\n    \n    FORMS --\u003e INLINE_BOT\n    GALLERIES --\u003e INLINE_BOT\n    LISTS --\u003e INLINE_BOT\n    CUSTOM_MARKUP --\u003e INLINE_BOT\n    \n    INLINE_BOT --\u003e INLINE_QUERIES\n    INLINE_BOT --\u003e CALLBACK_QUERIES\n    INLINE_QUERIES --\u003e TELEGRAM_API\n    CALLBACK_QUERIES --\u003e TELEGRAM_API\n```\n\nSources: [CHANGELOG.md:956-958]()\n\n## Core Components\n\n### InlineManager\n\nThe `InlineManager` serves as the central coordinator for all inline functionality. It handles query processing, callback management, and component lifecycle.\n\n| Component | Purpose | Key Methods |\n|-----------|---------|-------------|\n| `InlineManager` | Central inline bot controller | `form()`, `gallery()`, `list()` |\n| `Query Processor` | Handles inline query routing | `_process_query()` |\n| `Callback Processor` | Manages button callbacks | `_process_callback()` |\n| `Security Checker` | Validates permissions | `_check_inline_security()` |\n\nSources: [CHANGELOG.md:211](), [CHANGELOG.md:956-958]()\n\n### Handler Decorators\n\nThe framework provides specific decorators for inline functionality:\n\n```mermaid\ngraph TB\n    subgraph \"Handler Types\"\n        INLINE_HANDLER[\"@loader.inline_handler\"]\n        CALLBACK_HANDLER[\"@loader.callback_handler\"]\n        INLINE_EVERYONE[\"@loader.inline_everyone\"]\n    end\n    \n    subgraph \"Security Levels\"\n        OWNER[\"Owner Only\"]\n        SUDO[\"Sudo Users\"]\n        SUPPORT[\"Support Users\"]\n        EVERYONE[\"Everyone\"]\n    end\n    \n    subgraph \"Query Processing\"\n        QUERY_ROUTER[\"Query Router\"]\n        PERMISSION_CHECK[\"Permission Check\"]\n        HANDLER_EXECUTION[\"Handler Execution\"]\n    end\n    \n    INLINE_HANDLER --\u003e QUERY_ROUTER\n    CALLBACK_HANDLER --\u003e QUERY_ROUTER\n    INLINE_EVERYONE --\u003e EVERYONE\n    \n    OWNER --\u003e PERMISSION_CHECK\n    SUDO --\u003e PERMISSION_CHECK\n    SUPPORT --\u003e PERMISSION_CHECK\n    EVERYONE --\u003e PERMISSION_CHECK\n    \n    QUERY_ROUTER --\u003e PERMISSION_CHECK\n    PERMISSION_CHECK --\u003e HANDLER_EXECUTION\n```\n\nSources: [CHANGELOG.md:409](), [CHANGELOG.md:854](), [CHANGELOG.md:915]()\n\n## Creating Inline Handlers\n\n### Basic Inline Handler\n\nInline handlers respond to inline queries sent to the bot:\n\n```python\n@loader.inline_handler()\nasync def sample_query(self, query):\n    \"\"\"Handle inline queries for this module\"\"\"\n    # Process query.query for search terms\n    # Return results or use self.inline components\n    pass\n```\n\n### Callback Handler\n\nCallback handlers process button presses and user interactions:\n\n```python\n@loader.callback_handler()\nasync def button_callback(self, call):\n    \"\"\"Handle button callbacks\"\"\"\n    # Process call.data for button information\n    # Update interface or perform actions\n    pass\n```\n\nSources: [CHANGELOG.md:409]()\n\n## Interactive Components\n\n### Forms System\n\nForms provide structured input interfaces with buttons and media:\n\n```mermaid\ngraph LR\n    FORM_CALL[\"self.inline.form()\"] --\u003e FORM_CONFIG[\"Form Configuration\"]\n    FORM_CONFIG --\u003e BUTTONS[\"Button Layout\"]\n    FORM_CONFIG --\u003e MEDIA[\"Media Attachment\"]\n    FORM_CONFIG --\u003e TEXT[\"Message Text\"]\n    \n    BUTTONS --\u003e CALLBACK[\"Callback Handling\"]\n    MEDIA --\u003e DISPLAY[\"Media Display\"]\n    TEXT --\u003e FORMATTING[\"HTML Formatting\"]\n```\n\n**Form Parameters:**\n\n| Parameter | Type | Purpose |\n|-----------|------|---------|\n| `text` | `str` | Main message text |\n| `reply_markup` | `list` | Button configuration |\n| `photo` | `str/bytes` | Photo attachment |\n| `gif` | `str/bytes` | GIF attachment |\n| `file` | `str/bytes` | File attachment |\n| `video` | `str/bytes` | Video attachment |\n| `audio` | `str/bytes` | Audio attachment |\n| `location` | `tuple` | Location coordinates |\n| `ttl` | `int` | Time to live in seconds |\n| `silent` | `bool` | Silent notification |\n\nSources: [CHANGELOG.md:622](), [CHANGELOG.md:859-860]()\n\n### Galleries System\n\nGalleries display scrollable collections of media with navigation:\n\n```mermaid\ngraph TB\n    GALLERY_INIT[\"self.inline.gallery()\"] --\u003e ITEMS[\"Gallery Items\"]\n    ITEMS --\u003e NAVIGATION[\"Navigation Buttons\"]\n    ITEMS --\u003e SLIDESHOW[\"Slideshow Mode\"]\n    ITEMS --\u003e MEMOIZATION[\"State Memoization\"]\n    \n    NAVIGATION --\u003e PREV_NEXT[\"Previous/Next\"]\n    NAVIGATION --\u003e CLOSE[\"Close Button\"]\n    SLIDESHOW --\u003e AUTO_ADVANCE[\"Auto Advance\"]\n    MEMOIZATION --\u003e STATE_RESTORE[\"State Restoration\"]\n```\n\n**Gallery Features:**\n- Media preloading for smooth navigation\n- Automatic slideshow functionality\n- State memoization for returning users\n- Custom button integration\n- GIF support\n\nSources: [CHANGELOG.md:489-491](), [CHANGELOG.md:930](), [CHANGELOG.md:967](), [CHANGELOG.md:977]()\n\n### Lists System\n\nLists present structured data with pagination and custom actions:\n\n**List Components:**\n- Paginated data display\n- Custom action buttons\n- Search and filtering\n- Item-specific callbacks\n\nSources: [CHANGELOG.md:490](), [CHANGELOG.md:895]()\n\n## Button System and Callbacks\n\n### Button Configuration\n\nThe framework supports various button types and actions:\n\n```mermaid\ngraph TB\n    BUTTON_DEF[\"Button Definition\"] --\u003e BUTTON_TYPES[\"Button Types\"]\n    BUTTON_TYPES --\u003e URL_BUTTON[\"URL Button\"]\n    BUTTON_TYPES --\u003e CALLBACK_BUTTON[\"Callback Button\"]\n    BUTTON_TYPES --\u003e SWITCH_INLINE[\"Switch Inline\"]\n    BUTTON_TYPES --\u003e WEBAPP_BUTTON[\"WebApp Button\"]\n    \n    CALLBACK_BUTTON --\u003e ACTIONS[\"Button Actions\"]\n    ACTIONS --\u003e CLOSE_ACTION[\"close\"]\n    ACTIONS --\u003e UNLOAD_ACTION[\"unload\"]\n    ACTIONS --\u003e ANSWER_ACTION[\"answer\"]\n    ACTIONS --\u003e CUSTOM_ACTION[\"Custom Callback\"]\n```\n\n**Button Actions:**\n\n| Action | Purpose | Implementation |\n|--------|---------|----------------|\n| `close` | Close inline form | Automatic handling |\n| `unload` | Unload from memory | Automatic cleanup |\n| `answer` | Show callback answer | Text or alert display |\n| Custom | Module-specific logic | Developer-defined callback |\n\nSources: [CHANGELOG.md:519](), [CHANGELOG.md:550](), [CHANGELOG.md:778-779](), [CHANGELOG.md:85]()\n\n### Markup Generation\n\nThe `_generate_markup` system handles button layout and callback routing:\n\n```python\n# Example button configuration\nbuttons = [\n    [{\"text\": \"Action\", \"callback\": \"custom_action\"}],\n    [{\"text\": \"URL\", \"url\": \"https://example.com\"}],\n    [{\"text\": \"Close\", \"action\": \"close\"}]\n]\n```\n\nSources: [CHANGELOG.md:798-799](), [CHANGELOG.md:861]()\n\n## Security Considerations\n\n### Inline Security Model\n\n```mermaid\ngraph TB\n    INLINE_QUERY[\"Inline Query\"] --\u003e SECURITY_CHECK[\"Security Validation\"]\n    SECURITY_CHECK --\u003e PERMISSION_LEVELS[\"Permission Levels\"]\n    \n    PERMISSION_LEVELS --\u003e OWNER_LEVEL[\"Owner\"]\n    PERMISSION_LEVELS --\u003e SUDO_LEVEL[\"Sudo\"]\n    PERMISSION_LEVELS --\u003e SUPPORT_LEVEL[\"Support\"]\n    PERMISSION_LEVELS --\u003e EVERYONE_LEVEL[\"Everyone\"]\n    \n    SECURITY_CHECK --\u003e TARGETED_RULES[\"Targeted Security Rules\"]\n    TARGETED_RULES --\u003e USER_SPECIFIC[\"User-Specific Rules\"]\n    TARGETED_RULES --\u003e CHAT_SPECIFIC[\"Chat-Specific Rules\"]\n    \n    SECURITY_CHECK --\u003e EXECUTION[\"Handler Execution\"]\n```\n\n**Security Features:**\n- Per-handler permission levels\n- Targeted security rules for specific users/chats\n- Automatic permission inheritance\n- Security group integration\n\nSources: [CHANGELOG.md:153](), [CHANGELOG.md:854](), [CHANGELOG.md:915](), [CHANGELOG.md:941]()\n\n### Disabling Security\n\nFor public interfaces, security can be disabled:\n\n```python\n# In component calls\nawait self.inline.form(\n    text=\"Public form\",\n    reply_markup=buttons,\n    disable_security=True\n)\n```\n\nSources: [CHANGELOG.md:875](), [CHANGELOG.md:803]()\n\n## Advanced Features\n\n### Media Editing\n\nComponents support dynamic media updates:\n\n**Supported Media Types:**\n- Photos\n- Videos  \n- GIFs\n- Audio files\n- Documents\n- Locations\n\nSources: [CHANGELOG.md:571]()\n\n### Query Gallery Integration\n\nGalleries can be invoked directly through inline queries:\n\n```python\n# Enable query-accessible galleries\nawait self.inline.query_gallery(\n    query=query,\n    items=gallery_items,\n    caption=\"Gallery Caption\"\n)\n```\n\nSources: [CHANGELOG.md:946-947]()\n\n### Error Handling\n\nThe framework provides structured error responses:\n\n```python\n# Query error responses\nquery.e404()  # No results found\nquery.e500()  # Internal error\n```\n\nSources: [CHANGELOG.md:926](), [CHANGELOG.md:947]()\n\n## Integration Patterns\n\n### Module Integration\n\n```mermaid\ngraph TB\n    MODULE_CLASS[\"Module Class\"] --\u003e INLINE_METHODS[\"Inline Methods\"]\n    INLINE_METHODS --\u003e FORM_CREATION[\"Form Creation\"]\n    INLINE_METHODS --\u003e GALLERY_CREATION[\"Gallery Creation\"]\n    INLINE_METHODS --\u003e LIST_CREATION[\"List Creation\"]\n    \n    MODULE_CLASS --\u003e HANDLERS[\"Handler Methods\"]\n    HANDLERS --\u003e QUERY_HANDLER[\"Query Handler\"]\n    HANDLERS --\u003e CALLBACK_HANDLER[\"Callback Handler\"]\n    \n    FORM_CREATION --\u003e USER_INTERACTION[\"User Interaction\"]\n    GALLERY_CREATION --\u003e USER_INTERACTION\n    LIST_CREATION --\u003e USER_INTERACTION\n    \n    USER_INTERACTION --\u003e CALLBACK_HANDLER\n    CALLBACK_HANDLER --\u003e STATE_UPDATE[\"State Update\"]\n    STATE_UPDATE --\u003e FORM_CREATION\n```\n\n### Response Flow\n\nThe typical inline interaction follows this pattern:\n\n1. User sends inline query\n2. Handler processes query\n3. Component (form/gallery/list) is created\n4. User interacts with buttons\n5. Callback handler processes interaction\n6. Interface updates or new component is shown\n\nSources: [CHANGELOG.md:844](), [CHANGELOG.md:570]()\n\n## Best Practices\n\n### Performance Optimization\n\n- Use memoization for galleries with large datasets\n- Implement proper TTL values for temporary interfaces\n- Optimize media preloading for smooth user experience\n\n### User Experience\n\n- Provide clear navigation controls\n- Implement proper error handling and user feedback\n- Use appropriate media types for content\n- Design responsive button layouts\n\n### Security\n\n- Apply appropriate permission levels to handlers\n- Use targeted security rules for sensitive operations\n- Validate user input in callback handlers\n- Implement proper session management\n\nSources: [CHANGELOG.md:940](), [CHANGELOG.md:967](), [CHANGELOG.md:570]()"])</script><script>self.__next_f.push([1,"2c:T2f6a,"])</script><script>self.__next_f.push([1,"# Working with the Database\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [CHANGELOG.md](CHANGELOG.md)\n\n\u003c/details\u003e\n\n\n\nThis document covers database integration patterns and best practices for developers creating custom modules for the Heroku userbot system. It explains how to store and retrieve persistent data, work with the pointer system, and integrate with the multi-backend database architecture.\n\nFor information about the core database system architecture, see [Database System](#2.4). For module development fundamentals, see [Creating Modules](#7.1).\n\n## Database Architecture Overview\n\nThe Heroku system implements a multi-backend database architecture that automatically handles persistence across different storage systems based on deployment environment and configuration.\n\n### Supported Storage Backends\n\nThe system supports three primary storage backends:\n\n| Backend | Use Case | Deployment Context |\n|---------|----------|-------------------|\n| PostgreSQL | Production deployments | Heroku, cloud platforms |\n| Redis | Session data, caching | External Redis instances |\n| JSON Files | Local development, fallback | File system storage |\n\n### Database Manager Structure\n\n```mermaid\ngraph TB\n    subgraph \"Module Interface\"\n        MOD[\"Module Instance\"]\n        POINTER[\"self.pointer\"]\n        CONFIG[\"self.config\"]\n    end\n    \n    subgraph \"Database Layer\"\n        DB_MGR[\"Database Manager\"]\n        POINTER_SYS[\"Pointer System\"]\n        CONFIG_MGR[\"Config Manager\"]\n    end\n    \n    subgraph \"Storage Backends\"\n        POSTGRES[(\"PostgreSQL\u003cbr/\u003eProduction Data\")]\n        REDIS[(\"Redis\u003cbr/\u003eCache \u0026 Sessions\")]\n        JSON[(\"JSON Files\u003cbr/\u003eLocal Storage\")]\n    end\n    \n    MOD --\u003e POINTER\n    MOD --\u003e CONFIG\n    POINTER --\u003e POINTER_SYS\n    CONFIG --\u003e CONFIG_MGR\n    \n    POINTER_SYS --\u003e DB_MGR\n    CONFIG_MGR --\u003e DB_MGR\n    \n    DB_MGR --\u003e POSTGRES\n    DB_MGR --\u003e REDIS\n    DB_MGR --\u003e JSON\n    \n    style MOD fill:#f9f9f9\n    style DB_MGR fill:#e3f2fd\n    style POSTGRES fill:#fff3e0\n```\n\n**Database Backend Selection**: The system automatically selects the appropriate backend based on environment detection and available credentials.\n\nSources: CHANGELOG.md:522, CHANGELOG.md:453, CHANGELOG.md:456\n\n## Module Database Access Patterns\n\n### Basic Database Operations\n\nModules access the database through two primary interfaces: the pointer system for structured data and direct database access for simple key-value operations.\n\n```mermaid\nsequenceDiagram\n    participant Module\n    participant PointerSystem as \"Pointer System\"\n    participant DatabaseManager as \"Database Manager\"\n    participant Backend as \"Storage Backend\"\n    \n    Note over Module,Backend: Data Storage Operation\n    Module-\u003e\u003ePointerSystem: self.pointer[\"key\"] = value\n    PointerSystem-\u003e\u003eDatabaseManager: Store pointer data\n    DatabaseManager-\u003e\u003eBackend: Write to storage\n    Backend-\u003e\u003eDatabaseManager: Confirm write\n    DatabaseManager-\u003e\u003ePointerSystem: Update cache\n    \n    Note over Module,Backend: Data Retrieval Operation\n    Module-\u003e\u003ePointerSystem: value = self.pointer[\"key\"]\n    PointerSystem-\u003e\u003eDatabaseManager: Check cache\n    alt Cache Hit\n        DatabaseManager-\u003e\u003ePointerSystem: Return cached value\n    else Cache Miss\n        DatabaseManager-\u003e\u003eBackend: Read from storage\n        Backend-\u003e\u003eDatabaseManager: Return data\n        DatabaseManager-\u003e\u003ePointerSystem: Update cache\n    end\n    PointerSystem-\u003e\u003eModule: Return value\n```\n\n**Automatic Persistence**: All database operations are automatically persisted across the configured storage backends without requiring explicit save operations.\n\nSources: CHANGELOG.md:340, CHANGELOG.md:341\n\n### Pointer System Integration\n\nThe pointer system provides a high-level interface for managing structured data within modules.\n\n#### Pointer Data Types\n\nThe system supports multiple data types through the pointer interface:\n\n| Type | Usage | Example |\n|------|-------|---------|\n| `PointerList` | Ordered collections | User lists, message queues |\n| `PointerDict` | Key-value mappings | Settings, cached data |\n| `NamedTuple` | Structured objects | Complex data models |\n| Raw Data | Direct pointer access | Binary data, serialized objects |\n\n#### Pointer Access Methods\n\n```mermaid\ngraph LR\n    subgraph \"Pointer Interface\"\n        BASIC[\"self.pointer['key']\u003cbr/\u003eBasic Access\"]\n        DATA[\"self.pointer.data\u003cbr/\u003eRaw Data Access\"]\n        TYPED[\"db.pointer(item_type=X)\u003cbr/\u003eTyped Access\"]\n    end\n    \n    subgraph \"Storage Operations\"\n        READ[\"Read Operation\"]\n        WRITE[\"Write Operation\"]\n        DELETE[\"Delete Operation\"]\n    end\n    \n    subgraph \"Data Processing\"\n        SERIALIZE[\"Serialization\"]\n        VALIDATE[\"Validation\"]\n        CACHE[\"Caching\"]\n    end\n    \n    BASIC --\u003e READ\n    BASIC --\u003e WRITE\n    DATA --\u003e READ\n    DATA --\u003e WRITE\n    TYPED --\u003e READ\n    TYPED --\u003e WRITE\n    \n    READ --\u003e SERIALIZE\n    WRITE --\u003e VALIDATE\n    WRITE --\u003e CACHE\n    DELETE --\u003e CACHE\n    \n    style BASIC fill:#f9f9f9\n    style DATA fill:#e8f5e8\n    style TYPED fill:#fff3e0\n```\n\n**Typed Pointer Access**: Use `db.pointer(item_type=NamedTuple)` for structured data that requires type validation and serialization.\n\nSources: CHANGELOG.md:98, CHANGELOG.md:117, CHANGELOG.md:339\n\n## Configuration Storage\n\n### Automatic Configuration Persistence\n\nThe system automatically persists module configuration changes to the database without requiring explicit save operations.\n\n#### Configuration Value Types\n\nModule configurations support various data types with automatic type conversion and validation:\n\n```mermaid\ngraph TB\n    subgraph \"Config Input\"\n        USER_INPUT[\"User Input\"]\n        DEFAULT_VAL[\"Default Values\"]\n        VALIDATOR[\"Validator Rules\"]\n    end\n    \n    subgraph \"Processing Pipeline\"\n        TYPE_CONV[\"Type Conversion\"]\n        VALIDATION[\"Validation\"]\n        STORAGE[\"Storage\"]\n    end\n    \n    subgraph \"Storage Targets\"\n        MODULE_CONFIG[\"self.config[key]\"]\n        DB_STORAGE[\"Database Storage\"]\n        AUTO_SAVE[\"Automatic Save\"]\n    end\n    \n    USER_INPUT --\u003e TYPE_CONV\n    DEFAULT_VAL --\u003e TYPE_CONV\n    VALIDATOR --\u003e VALIDATION\n    \n    TYPE_CONV --\u003e VALIDATION\n    VALIDATION --\u003e STORAGE\n    \n    STORAGE --\u003e MODULE_CONFIG\n    MODULE_CONFIG --\u003e DB_STORAGE\n    DB_STORAGE --\u003e AUTO_SAVE\n    \n    style TYPE_CONV fill:#f9f9f9\n    style VALIDATION fill:#e8f5e8\n    style AUTO_SAVE fill:#fff3e0\n```\n\n**Automatic Saving**: Configuration values are automatically saved to the database when modified through `self.config[option] = value`.\n\nSources: CHANGELOG.md:731, CHANGELOG.md:611\n\n### Configuration Data Flow\n\nThe configuration system integrates with the database layer to provide seamless persistence and retrieval:\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant Module\n    participant ConfigManager as \"Config Manager\"\n    participant Database\n    participant Validator\n    \n    Note over User,Validator: Configuration Update\n    User-\u003e\u003eModule: Set config value\n    Module-\u003e\u003eConfigManager: self.config[key] = value\n    ConfigManager-\u003e\u003eValidator: Validate input\n    Validator-\u003e\u003eConfigManager: Validation result\n    \n    alt Valid Input\n        ConfigManager-\u003e\u003eDatabase: Store config value\n        Database-\u003e\u003eConfigManager: Confirm storage\n        ConfigManager-\u003e\u003eModule: Update successful\n    else Invalid Input\n        ConfigManager-\u003e\u003eModule: Reset to default\n        ConfigManager-\u003e\u003eDatabase: Store default value\n    end\n    \n    Note over User,Validator: Configuration Retrieval\n    Module-\u003e\u003eConfigManager: Get config value\n    ConfigManager-\u003e\u003eDatabase: Retrieve stored value\n    Database-\u003e\u003eConfigManager: Return value\n    ConfigManager-\u003e\u003eModule: Processed value\n```\n\n**Validation and Fallback**: Invalid configuration values automatically trigger a reset to default values to prevent system instability.\n\nSources: CHANGELOG.md:608, CHANGELOG.md:713\n\n## Database Error Handling and Recovery\n\n### Automatic Database Recovery\n\nThe system implements automatic database recovery mechanisms to handle corrupted data and ensure system stability.\n\n#### Recovery Process\n\n```mermaid\nflowchart TD\n    START[\"Database Operation\"]\n    ERROR_CHECK{\"Error Detected?\"}\n    BACKUP_CHECK{\"Backup Available?\"}\n    ROLLBACK[\"Rollback to Backup\"]\n    DEFAULT_RESET[\"Reset to Defaults\"]\n    RETRY[\"Retry Operation\"]\n    SUCCESS[\"Operation Complete\"]\n    FAIL[\"Log Error \u0026 Continue\"]\n    \n    START --\u003e ERROR_CHECK\n    ERROR_CHECK --\u003e|No| SUCCESS\n    ERROR_CHECK --\u003e|Yes| BACKUP_CHECK\n    BACKUP_CHECK --\u003e|Yes| ROLLBACK\n    BACKUP_CHECK --\u003e|No| DEFAULT_RESET\n    ROLLBACK --\u003e RETRY\n    DEFAULT_RESET --\u003e RETRY\n    RETRY --\u003e ERROR_CHECK\n    ERROR_CHECK --\u003e|Persistent Error| FAIL\n    \n    style ROLLBACK fill:#f9f9f9\n    style DEFAULT_RESET fill:#e8f5e8\n    style FAIL fill:#ffebee\n```\n\n**Automatic Recovery**: The system automatically attempts to recover from database errors by rolling back to previous states or resetting to default values.\n\nSources: CHANGELOG.md:713, CHANGELOG.md:608\n\n### Database Integrity Checks\n\nThe system performs integrity checks to ensure data consistency across storage backends:\n\n| Check Type | Frequency | Action on Failure |\n|------------|-----------|-------------------|\n| Schema Validation | Module Load | Reset affected tables |\n| Data Serialization | Every Write | Fallback to default |\n| Connection Health | Periodic | Switch backends |\n| Corruption Detection | On Read | Trigger recovery |\n\nSources: CHANGELOG.md:713, CHANGELOG.md:522\n\n## Best Practices for Module Developers\n\n### Data Structure Design\n\nWhen designing data structures for database storage, follow these patterns:\n\n#### Recommended Patterns\n\n```mermaid\ngraph TB\n    subgraph \"Good Practices\"\n        SIMPLE[\"Use Simple Types\u003cbr/\u003estr, int, bool, list, dict\"]\n        SERIALIZE[\"Ensure Serializability\u003cbr/\u003eJSON-compatible data\"]\n        VALIDATE[\"Implement Validation\u003cbr/\u003eType checking\"]\n        CACHE[\"Minimize DB Calls\u003cbr/\u003eCache frequently accessed data\"]\n    end\n    \n    subgraph \"Avoid Anti-Patterns\"\n        COMPLEX[\"Complex Objects\u003cbr/\u003eNon-serializable types\"]\n        FREQUENT[\"Frequent Small Writes\u003cbr/\u003eDatabase thrashing\"]\n        LARGE[\"Large Binary Data\u003cbr/\u003eStore as files instead\"]\n        CIRCULAR[\"Circular References\u003cbr/\u003eBreaks serialization\"]\n    end\n    \n    style SIMPLE fill:#e8f5e8\n    style SERIALIZE fill:#e8f5e8\n    style VALIDATE fill:#e8f5e8\n    style CACHE fill:#e8f5e8\n    \n    style COMPLEX fill:#ffebee\n    style FREQUENT fill:#ffebee\n    style LARGE fill:#ffebee\n    style CIRCULAR fill:#ffebee\n```\n\n**Serialization Check**: The system performs automatic serialization checks to prevent JSON serialization problems with non-serializable objects.\n\nSources: CHANGELOG.md:899, CHANGELOG.md:733\n\n### Database Access Optimization\n\nOptimize database access patterns for better performance and reliability:\n\n#### Performance Guidelines\n\n| Pattern | Good Practice | Avoid |\n|---------|---------------|-------|\n| **Batching** | Group related operations | Individual writes per item |\n| **Caching** | Cache frequently read data | Repeated database queries |\n| **Validation** | Validate before storing | Store invalid data |\n| **Cleanup** | Remove unused data | Accumulate stale entries |\n\n#### Error Resilience\n\nImplement error handling that works with the automatic recovery system:\n\n```mermaid\nsequenceDiagram\n    participant Module\n    participant Database\n    participant Recovery as \"Recovery System\"\n    \n    Note over Module,Recovery: Robust Database Operation\n    Module-\u003e\u003eDatabase: Attempt operation\n    \n    alt Success\n        Database-\u003e\u003eModule: Return result\n    else Recoverable Error\n        Database-\u003e\u003eRecovery: Trigger recovery\n        Recovery-\u003e\u003eDatabase: Apply fix\n        Database-\u003e\u003eModule: Retry successful\n    else Permanent Error\n        Database-\u003e\u003eModule: Return default/fallback\n        Module-\u003e\u003eModule: Log error, continue\n    end\n```\n\n**Graceful Degradation**: Design modules to continue functioning even when database operations fail by providing sensible defaults.\n\nSources: CHANGELOG.md:713, CHANGELOG.md:608, CHANGELOG.md:899"])</script><script>self.__next_f.push([1,"2d:T352f,"])</script><script>self.__next_f.push([1,"# Best Practices\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [CHANGELOG.md](CHANGELOG.md)\n- [LICENSE](LICENSE)\n- [README.md](README.md)\n\n\u003c/details\u003e\n\n\n\nThis document provides comprehensive guidelines for developing secure, efficient, and maintainable modules and extensions for the Heroku Telegram userbot framework. It covers security considerations, performance optimization, code quality standards, and proper framework API usage patterns.\n\nFor information about creating custom modules, see [Creating Modules](#7.1). For database operations guidance, see [Working with the Database](#7.3). For inline functionality implementation, see [Using Inline Features](#7.2).\n\n## Security Best Practices\n\nSecurity is paramount when developing modules for the Heroku framework. The system includes multiple protection mechanisms that developers must understand and respect.\n\n### Module Security Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Security Validation Pipeline\"\n        ModuleSource[Module Source] --\u003e SecurityValidator[\"Security Validator\"]\n        SecurityValidator --\u003e ScamDetection[\"Scam Detection\"]\n        ScamDetection --\u003e PermissionCheck[\"Permission Check\"]\n        PermissionCheck --\u003e LoadDecision[\"Load Decision\"]\n    end\n    \n    subgraph \"Security Groups\"\n        Owner[\"Owner (0x1)\"]\n        Sudo[\"Sudo (0x2)\"]\n        Support[\"Support (0x4)\"]\n        Everyone[\"Everyone (0x8)\"]\n    end\n    \n    subgraph \"Targeted Security Rules\"\n        UserRules[\"User-specific Rules\"]\n        ChatRules[\"Chat-specific Rules\"]\n        CommandRules[\"Command-specific Rules\"]\n        InlineRules[\"Inline-specific Rules\"]\n    end\n    \n    SecurityValidator --\u003e SecurityGroups\n    PermissionCheck --\u003e TargetedRules\n    \n    LoadDecision --\u003e SafeModule[\"Safe Module Execution\"]\n    LoadDecision --\u003e BlockModule[\"Block Malicious Module\"]\n```\n\nSources: [CHANGELOG.md:106-107](), [CHANGELOG.md:120](), [CHANGELOG.md:153-154]()\n\n### Core Security Guidelines\n\n| Security Area | Best Practice | Implementation |\n|---------------|---------------|----------------|\n| **API Access** | Use flood protection | Enable `api_fw_protection` in configuration |\n| **User Permissions** | Implement granular security | Use `@loader.owner`, `@loader.sudo` decorators |\n| **External Requests** | Validate all inputs | Sanitize URLs and user data before processing |\n| **Database Access** | Use framework methods | Always use `self.db.get()` and `self.db.set()` |\n| **Module Sources** | Trust verification | Only install from official or trusted repositories |\n\n### Security Decorator Usage\n\n```mermaid\nflowchart TD\n    Command[Command Execution] --\u003e CheckDecorator{\"Security Decorator?\"}\n    CheckDecorator --\u003e|@loader.owner| OwnerCheck[\"Owner Validation\"]\n    CheckDecorator --\u003e|@loader.sudo| SudoCheck[\"Sudo Level Check\"]\n    CheckDecorator --\u003e|@loader.inline_everyone| InlinePublic[\"Public Inline Access\"]\n    CheckDecorator --\u003e|None| DefaultSecurity[\"Default Security Rules\"]\n    \n    OwnerCheck --\u003e SecurityMap[\"Security Map Validation\"]\n    SudoCheck --\u003e SecurityMap\n    InlinePublic --\u003e SecurityMap\n    DefaultSecurity --\u003e SecurityMap\n    \n    SecurityMap --\u003e Execute[\"Execute Command\"]\n    SecurityMap --\u003e Block[\"Block Execution\"]\n```\n\nSources: [CHANGELOG.md:853-856](), [CHANGELOG.md:914-916]()\n\n## Performance Optimization\n\nPerformance optimization ensures responsive user experience and efficient resource utilization across different deployment environments.\n\n### Resource Management Pipeline\n\n```mermaid\ngraph LR\n    subgraph \"Memory Management\"\n        EntityCache[\"Entity Cache\"]\n        FullUserCache[\"FullUser Cache\"]\n        PermsCache[\"Permissions Cache\"]\n        ModuleCache[\"Module Cache\"]\n    end\n    \n    subgraph \"API Optimization\"\n        APILimiter[\"API Limiter\"]\n        FloodProtection[\"Flood Protection\"]\n        RequestQueue[\"Request Queue\"]\n    end\n    \n    subgraph \"Database Optimization\"\n        DatabasePointer[\"Database Pointer\"]\n        AutoSave[\"Auto Save\"]\n        SerializationCheck[\"Serialization Check\"]\n    end\n    \n    UserRequest[User Request] --\u003e EntityCache\n    EntityCache --\u003e APILimiter\n    APILimiter --\u003e DatabasePointer\n    DatabasePointer --\u003e Response[Response]\n```\n\nSources: [CHANGELOG.md:289-290](), [CHANGELOG.md:363-367](), [CHANGELOG.md:915-917]()\n\n### Performance Best Practices\n\n| Area | Best Practice | Implementation Details |\n|------|---------------|----------------------|\n| **Caching** | Use built-in entity caching | Leverage `client.get_entity`, `client.get_perms_cached` |\n| **Database** | Minimize database operations | Batch reads/writes, use `db.pointer` for complex data |\n| **API Calls** | Respect rate limits | Use `APILimiter` configuration, avoid unnecessary requests |\n| **Memory Usage** | Clean up resources | Properly handle file uploads/downloads, close connections |\n| **Async Operations** | Use proper async patterns | Avoid blocking operations in event loops |\n\n### Database Performance Patterns\n\n```mermaid\nsequenceDiagram\n    participant Module\n    participant Database\n    participant Cache\n    \n    Module-\u003e\u003eDatabase: Check if data exists\n    Database-\u003e\u003eCache: Query cache first\n    Cache--\u003e\u003eDatabase: Cache miss\n    Database-\u003e\u003eDatabase: Read from storage\n    Database-\u003e\u003eCache: Update cache\n    Database--\u003e\u003eModule: Return data\n    \n    Note over Module,Cache: Subsequent requests use cache\n    Module-\u003e\u003eDatabase: Request same data\n    Database-\u003e\u003eCache: Query cache\n    Cache--\u003e\u003eModule: Return cached data\n```\n\nSources: [CHANGELOG.md:916-917](), [CHANGELOG.md:729-736]()\n\n## Code Quality and Development Standards\n\nMaintaining high code quality ensures maintainability, readability, and compatibility with the framework's evolution.\n\n### Development Standards Framework\n\n```mermaid\ngraph TB\n    subgraph \"Code Quality Tools\"\n        BlackFormatter[\"Black Formatter\"]\n        RuffLinter[\"Ruff Linter\"]\n        TypeHints[\"Type Hints\"]\n        Docstrings[\"Docstrings\"]\n    end\n    \n    subgraph \"Framework Compliance\"\n        LoaderDecorators[\"Loader Decorators\"]\n        ConfigValidators[\"Config Validators\"]\n        TranslationSupport[\"Translation Support\"]\n        BackwardCompat[\"Backward Compatibility\"]\n    end\n    \n    subgraph \"Testing Standards\"\n        ErrorHandling[\"Error Handling\"]\n        LoggingPatterns[\"Logging Patterns\"]\n        SecurityValidation[\"Security Validation\"]\n    end\n    \n    DeveloperCode[Developer Code] --\u003e BlackFormatter\n    BlackFormatter --\u003e LoaderDecorators\n    LoaderDecorators --\u003e ErrorHandling\n    ErrorHandling --\u003e QualityModule[Quality Module]\n```\n\nSources: [CHANGELOG.md:84](), [CHANGELOG.md:287-288](), [CHANGELOG.md:438]()\n\n### Module Structure Best Practices\n\n| Component | Standard | Example |\n|-----------|----------|---------|\n| **Class Naming** | PascalCase with 'Mod' suffix | `WeatherMod`, `DatabaseMod` |\n| **Method Naming** | snake_case with descriptive names | `get_weather_data`, `format_response` |\n| **Config Variables** | Clear validation and documentation | Use `loader.validators.*` classes |\n| **Error Messages** | User-friendly and translatable | Support multiple languages |\n| **Documentation** | Comprehensive docstrings | Include usage examples |\n\n## Framework API Usage Guidelines\n\nProper API usage ensures compatibility, security, and optimal performance when interacting with framework components.\n\n### API Usage Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Core APIs\"\n        ModuleAPI[\"Module API\u003cbr/\u003eself.lookup, self.allmodules\"]\n        DatabaseAPI[\"Database API\u003cbr/\u003eself.db.get, self.db.set\"]\n        ClientAPI[\"Client API\u003cbr/\u003eself.client.*\"]\n        UtilsAPI[\"Utils API\u003cbr/\u003eutils.answer, utils.get_entity_url\"]\n    end\n    \n    subgraph \"Inline APIs\"\n        FormAPI[\"Form API\u003cbr/\u003eself.inline.form\"]\n        GalleryAPI[\"Gallery API\u003cbr/\u003eself.inline.gallery\"]\n        ListAPI[\"List API\u003cbr/\u003eself.inline.list\"]\n    end\n    \n    subgraph \"Advanced APIs\"\n        LoopAPI[\"Loop API\u003cbr/\u003e@loader.loop\"]\n        WatcherAPI[\"Watcher API\u003cbr/\u003e@loader.watcher\"]\n        SecurityAPI[\"Security API\u003cbr/\u003e@loader.owner\"]\n    end\n    \n    ModuleCode[Module Code] --\u003e ModuleAPI\n    ModuleCode --\u003e DatabaseAPI\n    ModuleCode --\u003e InlineAPIs\n    ModuleCode --\u003e AdvancedAPIs\n```\n\nSources: [CHANGELOG.md:409-410](), [CHANGELOG.md:824](), [CHANGELOG.md:853-856]()\n\n### API Usage Patterns\n\n| API Category | Correct Usage | Anti-patterns to Avoid |\n|--------------|---------------|----------------------|\n| **Database** | `self.db.get(\"key\", default)` | Direct database manipulation |\n| **Client** | `await self.client.get_entity(user)` | Bypassing entity cache |\n| **Utils** | `utils.answer(message, text)` | Manual message sending |\n| **Config** | `self.config[\"option\"]` | Direct config dictionary access |\n| **Inline** | `await self.inline.form(...)` | Manual inline bot handling |\n\n## Error Handling and Logging\n\nRobust error handling and comprehensive logging facilitate debugging and maintain system stability.\n\n### Error Handling Pipeline\n\n```mermaid\nflowchart TD\n    ModuleExecution[Module Execution] --\u003e ExceptionOccurs{\"Exception Occurs?\"}\n    ExceptionOccurs --\u003e|No| Success[Successful Execution]\n    ExceptionOccurs --\u003e|Yes| ExceptionType{\"Exception Type\"}\n    \n    ExceptionType --\u003e|RPCError| RPCHandler[\"RPC Error Handler\"]\n    ExceptionType --\u003e|FloodWait| FloodHandler[\"Flood Wait Handler\"]\n    ExceptionType --\u003e|NetworkError| NetworkHandler[\"Network Error Handler\"]\n    ExceptionType --\u003e|Module Error| ModuleHandler[\"Module Error Handler\"]\n    \n    RPCHandler --\u003e LogError[\"Log Error Details\"]\n    FloodHandler --\u003e LogError\n    NetworkHandler --\u003e LogError\n    ModuleHandler --\u003e LogError\n    \n    LogError --\u003e UserFeedback[\"Provide User Feedback\"]\n    UserFeedback --\u003e SafetyRecovery[\"Attempt Safe Recovery\"]\n```\n\nSources: [CHANGELOG.md:201-202](), [CHANGELOG.md:442-443]()\n\n### Logging Best Practices\n\n| Logging Level | Use Case | Example |\n|---------------|----------|---------|\n| **DEBUG** | Development information | Function entry/exit, variable values |\n| **INFO** | Normal operation events | Module loaded, command executed |\n| **WARNING** | Recoverable problems | Deprecated API usage, config issues |\n| **ERROR** | Error conditions | Exception handling, failed operations |\n| **CRITICAL** | System failure events | Security breaches, framework crashes |\n\n## Database and Data Management\n\nEfficient data management ensures data integrity, performance, and proper resource utilization.\n\n### Database Management Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Database Abstraction Layer\"\n        DatabaseInterface[\"Database Interface\"]\n        SQLiteBackend[\"SQLite Backend\"]\n        PostgreSQLBackend[\"PostgreSQL Backend\"]\n        RedisBackend[\"Redis Backend\"]\n    end\n    \n    subgraph \"Data Validation\"\n        SerializationCheck[\"Serialization Check\"]\n        TypeValidation[\"Type Validation\"]\n        SizeLimit[\"Size Limit Check\"]\n    end\n    \n    subgraph \"Data Operations\"\n        AutoSave[\"Auto Save\"]\n        PointerSystem[\"Pointer System\"]\n        BackupSystem[\"Backup System\"]\n    end\n    \n    ModuleData[Module Data] --\u003e DatabaseInterface\n    DatabaseInterface --\u003e SerializationCheck\n    SerializationCheck --\u003e AutoSave\n    AutoSave --\u003e BackendStorage[Backend Storage]\n```\n\nSources: [CHANGELOG.md:915-917](), [CHANGELOG.md:355-358](), [CHANGELOG.md:729-736]()\n\n### Data Management Guidelines\n\n| Practice | Implementation | Benefits |\n|----------|----------------|----------|\n| **Use Pointers** | `self.pointer(\"complex_data\")` | Efficient complex data handling |\n| **Validate Serialization** | Check `utils.is_serializable()` | Prevent JSON serialization errors |\n| **Auto-save Detection** | Use `self.config[option] = value` | Automatic configuration persistence |\n| **Backup Integration** | Follow framework backup patterns | Data recovery capabilities |\n| **Type Safety** | Use proper validators | Data integrity assurance |\n\n## Deployment and Maintenance Considerations\n\nProper deployment practices ensure reliable operation across different environments and platforms.\n\n### Deployment Environment Matrix\n\n```mermaid\ngraph TB\n    subgraph \"Local Development\"\n        LocalDocker[\"Local Docker\"]\n        VPSInstall[\"VPS Installation\"]\n        TermuxAndroid[\"Termux Android\"]\n    end\n    \n    subgraph \"Cloud Platforms\"\n        HerokuCloud[\"Heroku Cloud\"]\n        OktetoCloud[\"Okteto Cloud\"]\n        DockerCloud[\"Docker Cloud\"]\n    end\n    \n    subgraph \"Configuration Management\"\n        EnvironmentVars[\"Environment Variables\"]\n        ConfigFiles[\"Configuration Files\"]\n        SecretsManagement[\"Secrets Management\"]\n    end\n    \n    DevelopmentCode[Development Code] --\u003e LocalDevelopment\n    LocalDevelopment --\u003e Testing[Testing Phase]\n    Testing --\u003e CloudPlatforms\n    CloudPlatforms --\u003e Production[Production Deployment]\n    \n    ConfigManagement --\u003e AllEnvironments[All Environments]\n```\n\nSources: [CHANGELOG.md:921-923](), [CHANGELOG.md:879](), [CHANGELOG.md:143-144]()\n\n### Deployment Best Practices\n\n| Environment | Considerations | Best Practices |\n|-------------|---------------|----------------|\n| **Docker** | Container optimization | Use multi-stage builds, minimize image size |\n| **Cloud** | Resource limits | Configure appropriate memory/CPU limits |\n| **Mobile** | Resource constraints | Optimize for limited resources |\n| **VPS** | System dependencies | Document all required system packages |\n| **Security** | Secrets management | Use environment variables for sensitive data |\n\nSources: [CHANGELOG.md:670-675](), [CHANGELOG.md:514-515](), [CHANGELOG.md:143-144]()"])</script><script>self.__next_f.push([1,"2e:T29d0,"])</script><script>self.__next_f.push([1,"# Deployment and Maintenance\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [Dockerfile](Dockerfile)\n- [banner.sh](banner.sh)\n- [docker-compose.yml](docker-compose.yml)\n- [docker.sh](docker.sh)\n- [poetry.lock](poetry.lock)\n- [pyproject.toml](pyproject.toml)\n\n\u003c/details\u003e\n\n\n\nThis document covers the deployment strategies, containerization, dependency management, and ongoing maintenance procedures for the Heroku Telegram userbot framework. It provides comprehensive guidance for deploying the framework across various environments including Docker containers, cloud platforms, and mobile devices.\n\nFor information about initial setup and configuration, see [Getting Started](#1.3). For cloud-specific deployment guides, see [Cloud Platform Deployment](#8.2). For mobile deployment specifics, see [Mobile and Termux Deployment](#8.3).\n\n## Deployment Architecture Overview\n\nThe framework supports multiple deployment strategies, each optimized for different use cases and environments:\n\n```mermaid\ngraph TB\n    subgraph \"Source Management\"\n        REPO[\"GitHub Repository\u003cbr/\u003ecoddrago/Heroku\"]\n        DEPS[\"Dependencies\u003cbr/\u003epyproject.toml\u003cbr/\u003epoetry.lock\"]\n    end\n    \n    subgraph \"Build Process\"\n        DOCKER_BUILD[\"Docker Build\u003cbr/\u003eDockerfile\"]\n        POETRY_INSTALL[\"Poetry Install\u003cbr/\u003erequirements.txt\"]\n        ASSET_BUNDLE[\"Asset Bundling\u003cbr/\u003ebanner.txt\"]\n    end\n    \n    subgraph \"Deployment Methods\"\n        DOCKER_DEPLOY[\"Docker Deployment\u003cbr/\u003edocker.sh\u003cbr/\u003edocker-compose.yml\"]\n        MANUAL_DEPLOY[\"Manual Installation\u003cbr/\u003epip install\"]\n        CLOUD_DEPLOY[\"Cloud Platforms\u003cbr/\u003eHeroku/Okteto\"]\n        MOBILE_DEPLOY[\"Termux Deployment\u003cbr/\u003etermux.sh\"]\n    end\n    \n    subgraph \"Runtime Environment\"\n        WEB_SERVER[\"Web Interface\u003cbr/\u003ePort 8080\"]\n        TELEGRAM_CLIENT[\"Telegram Client\u003cbr/\u003eAPI Integration\"]\n        TUNNEL_SERVICE[\"SSH Tunnel\u003cbr/\u003elocalhost.run\"]\n    end\n    \n    REPO --\u003e DOCKER_BUILD\n    DEPS --\u003e POETRY_INSTALL\n    DOCKER_BUILD --\u003e DOCKER_DEPLOY\n    POETRY_INSTALL --\u003e MANUAL_DEPLOY\n    DOCKER_BUILD --\u003e CLOUD_DEPLOY\n    POETRY_INSTALL --\u003e MOBILE_DEPLOY\n    \n    DOCKER_DEPLOY --\u003e WEB_SERVER\n    MANUAL_DEPLOY --\u003e WEB_SERVER\n    CLOUD_DEPLOY --\u003e WEB_SERVER\n    MOBILE_DEPLOY --\u003e TELEGRAM_CLIENT\n    \n    WEB_SERVER --\u003e TUNNEL_SERVICE\n```\n\n**Sources:** [Dockerfile:1-53](), [docker-compose.yml:1-13](), [docker.sh:1-53](), [pyproject.toml:1-36]()\n\n## Docker Containerization\n\nThe framework uses a multi-stage Docker build process optimized for production deployment:\n\n### Container Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Docker Build Stages\"\n        PYTHON_BASE[\"python:3.10\u003cbr/\u003eBase Image\"]\n        BUILDER_BASE[\"Builder Stage\u003cbr/\u003eDependencies\"]\n        RUNTIME[\"Runtime Stage\u003cbr/\u003eApplication\"]\n    end\n    \n    subgraph \"System Dependencies\"\n        APT_PACKAGES[\"System Packages\u003cbr/\u003ebuild-essential\u003cbr/\u003effmpeg\u003cbr/\u003egit\u003cbr/\u003enodejs\"]\n        PYTHON_DEPS[\"Python Dependencies\u003cbr/\u003erequirements.txt\"]\n    end\n    \n    subgraph \"Application Structure\"\n        DATA_DIR[\"/data\u003cbr/\u003eWorking Directory\"]\n        HEROKU_DIR[\"/data/Heroku\u003cbr/\u003eApplication Code\"]\n        PRIVATE_DIR[\"/data/private\u003cbr/\u003eUser Data\"]\n        PORT_8080[\"Port 8080\u003cbr/\u003eWeb Interface\"]\n    end\n    \n    PYTHON_BASE --\u003e BUILDER_BASE\n    BUILDER_BASE --\u003e RUNTIME\n    APT_PACKAGES --\u003e BUILDER_BASE\n    PYTHON_DEPS --\u003e BUILDER_BASE\n    RUNTIME --\u003e DATA_DIR\n    DATA_DIR --\u003e HEROKU_DIR\n    DATA_DIR --\u003e PRIVATE_DIR\n    RUNTIME --\u003e PORT_8080\n```\n\nThe Dockerfile implements several optimization strategies:\n\n- **Environment Variables**: [Dockerfile:4-16]() sets `PYTHONUNBUFFERED=1`, `PYTHONDONTWRITEBYTECODE=1`, and `AIOHTTP_NO_EXTENSIONS=1` for performance\n- **System Dependencies**: [Dockerfile:18-36]() installs multimedia processing tools (`ffmpeg`), development tools (`build-essential`, `gcc`), and Node.js for web interface components\n- **Application Setup**: [Dockerfile:43-48]() clones the repository and ensures the latest master branch\n- **Runtime Configuration**: [Dockerfile:52-53]() exposes port 8080 and runs the application with `--root` flag\n\n**Sources:** [Dockerfile:1-53]()\n\n### Docker Compose Configuration\n\nThe Docker Compose setup provides simplified container orchestration:\n\n```mermaid\ngraph LR\n    subgraph \"Docker Compose Services\"\n        WORKER[\"worker\u003cbr/\u003eService\"]\n        VOLUME[\"worker\u003cbr/\u003eVolume\"]\n        PORT_MAP[\"Port Mapping\u003cbr/\u003e${EXTERNAL_PORT:-8080}:8080\"]\n    end\n    \n    subgraph \"Configuration\"\n        ENV_FILE[\".env\u003cbr/\u003eEXTERNAL_PORT=3429\"]\n        RESTART[\"restart: unless-stopped\"]\n        SIGNAL[\"stop_signal: SIGINT\"]\n    end\n    \n    ENV_FILE --\u003e PORT_MAP\n    RESTART --\u003e WORKER\n    SIGNAL --\u003e WORKER\n    VOLUME --\u003e WORKER\n```\n\nKey features include:\n- **Persistent Storage**: [docker-compose.yml:6-7]() mounts a named volume to preserve data across container restarts\n- **Graceful Shutdown**: [docker-compose.yml:7]() uses `SIGINT` for clean application termination\n- **Auto-restart**: [docker-compose.yml:8]() ensures service availability with `unless-stopped` policy\n- **Port Configuration**: [docker-compose.yml:10]() allows external port customization via environment variables\n\n**Sources:** [docker-compose.yml:1-13]()\n\n## Automated Installation System\n\nThe automated installation script provides cross-platform Docker setup:\n\n### Installation Flow\n\n```mermaid\nflowchart TD\n    START[\"Installation Start\"] --\u003e CLONE[\"git clone\u003cbr/\u003eRepository\"]\n    CLONE --\u003e CHECK_DOCKER{\"Docker Installed?\"}\n    \n    CHECK_DOCKER --\u003e|No| DETECT_OS[\"Detect OS\u003cbr/\u003eDistribution\"]\n    CHECK_DOCKER --\u003e|Yes| BUILD[\"Build Container\"]\n    \n    DETECT_OS --\u003e DEBIAN[\"Debian/Ubuntu\u003cbr/\u003eInstallation\"]\n    DETECT_OS --\u003e ARCH[\"Arch Linux\u003cbr/\u003eInstallation\"]\n    DETECT_OS --\u003e REDHAT[\"RHEL/CentOS\u003cbr/\u003eInstallation\"]\n    \n    DEBIAN --\u003e INSTALL_COMPOSE[\"Install\u003cbr/\u003edocker-compose\"]\n    ARCH --\u003e INSTALL_COMPOSE\n    REDHAT --\u003e INSTALL_COMPOSE\n    \n    INSTALL_COMPOSE --\u003e BUILD\n    BUILD --\u003e TUNNEL[\"Setup SSH Tunnel\u003cbr/\u003elocalhost.run\"]\n    TUNNEL --\u003e SUCCESS[\"Installation Complete\"]\n```\n\nThe installation script handles multiple Linux distributions:\n\n- **Debian/Ubuntu**: [docker.sh:13-27]() uses `apt-get` with Docker's official repository\n- **Arch Linux**: [docker.sh:28-29]() uses `pacman` package manager\n- **RHEL/CentOS**: [docker.sh:30-36]() configures Docker CE repository and installs via `yum`\n\n**Port Configuration**: [docker.sh:3-4]() sets the default external port to 3429 and creates a `.env` file for Docker Compose.\n\n**SSH Tunneling**: [docker.sh:52]() establishes a public tunnel using `localhost.run` service for remote access.\n\n**Sources:** [docker.sh:1-53]()\n\n## Dependency Management\n\nThe framework uses Poetry for robust dependency management with version locking:\n\n### Dependency Structure\n\n```mermaid\ngraph TB\n    subgraph \"Core Dependencies\"\n        AIOHTTP[\"aiohttp==3.8.3\u003cbr/\u003eHTTP Server\"]\n        JINJA2[\"jinja2==3.0.3\u003cbr/\u003eTemplate Engine\"]\n        AIOGRAM[\"aiogram==2.19\u003cbr/\u003eTelegram Bot API\"]\n    end\n    \n    subgraph \"Telegram Integration\"\n        HEROKU_TL[\"heroku-tl-new==1.1.3\u003cbr/\u003eTelegram Client\"]\n        TGCRYPTO[\"tgcrypto==1.2.5\u003cbr/\u003eCryptography\"]\n        RSA[\"rsa==4.9\u003cbr/\u003eEncryption\"]\n    end\n    \n    subgraph \"Utility Libraries\"\n        REQUESTS[\"requests==2.27.1\u003cbr/\u003eHTTP Client\"]\n        PSUTIL[\"psutil==5.9.4\u003cbr/\u003eSystem Monitoring\"]\n        RUAMEL_YAML[\"ruamel-yaml==0.17.21\u003cbr/\u003eYAML Processing\"]\n        GITPYTHON[\"gitpython==3.1.27\u003cbr/\u003eGit Operations\"]\n    end\n    \n    subgraph \"Development Tools\"\n        MEVAL[\"meval==2.5\u003cbr/\u003eCode Evaluation\"]\n        EMOJI[\"emoji==2.1.0\u003cbr/\u003eUnicode Support\"]\n        GRAPHEME[\"grapheme==0.6.0\u003cbr/\u003eText Processing\"]\n    end\n```\n\n**Python Version**: [pyproject.toml:14]() requires Python 3.9 or higher\n\n**Core Web Stack**: The framework uses `aiohttp` for the web server, `aiohttp-jinja2` for templating, and `werkzeug` for additional web utilities.\n\n**Telegram Integration**: Custom `heroku-tl-new` library provides Telegram client functionality, supplemented by `aiogram` for bot API and `tgcrypto` for performance optimization.\n\n**Sources:** [pyproject.toml:13-31](), [poetry.lock:1-974]()\n\n## Runtime Monitoring and Visual Feedback\n\nThe framework provides visual feedback systems for deployment status monitoring:\n\n### Banner Display System\n\n```mermaid\ngraph LR\n    subgraph \"Runtime Feedback\"\n        BANNER_SCRIPT[\"banner.sh\u003cbr/\u003eStatus Display\"]\n        BANNER_ASSET[\"assets/banner.txt\u003cbr/\u003eASCII Art\"]\n        CLEAR_SCREEN[\"Terminal Clear\u003cbr/\u003e\\\\033[2J\\\\033[3;1f\"]\n        SUCCESS_MSG[\"Success Message\u003cbr/\u003e\\\\033[1;32m\"]\n    end\n    \n    BANNER_SCRIPT --\u003e CLEAR_SCREEN\n    CLEAR_SCREEN --\u003e BANNER_ASSET\n    BANNER_ASSET --\u003e SUCCESS_MSG\n```\n\nThe banner system provides immediate visual confirmation of successful deployment:\n\n- **Screen Clearing**: [banner.sh:3]() uses ANSI escape sequences to clear the terminal\n- **Asset Display**: [banner.sh:4]() displays the ASCII banner from `assets/banner.txt`\n- **Status Indication**: [banner.sh:5]() shows a green success message using ANSI color codes\n\n**Sources:** [banner.sh:1-6]()\n\n### Application Runtime Configuration\n\nThe main application entry point provides several runtime options:\n\n- **Root Mode**: [Dockerfile:53]() runs with `--root` flag for containerized environments\n- **Port Binding**: The application binds to port 8080 for web interface access\n- **Data Persistence**: Uses `/data` directory for persistent storage across restarts\n\n**Sources:** [Dockerfile:43-53]()\n\n## Maintenance Operations\n\n### Container Lifecycle Management\n\nFor ongoing maintenance, the Docker setup supports:\n\n1. **Volume Persistence**: User data survives container recreation via named volumes\n2. **Graceful Shutdown**: `SIGINT` handling ensures clean application termination\n3. **Automatic Restart**: `unless-stopped` policy maintains service availability\n4. **Log Management**: Docker handles log rotation and storage\n\n### Dependency Updates\n\nThe Poetry lock file ensures reproducible builds while allowing controlled updates:\n\n- **Version Pinning**: All dependencies have exact version specifications\n- **Hash Verification**: [poetry.lock]() contains SHA256 hashes for integrity checking\n- **Platform Support**: Multiple platform wheels for cross-platform compatibility\n\n### Monitoring and Troubleshooting\n\nThe framework includes several monitoring capabilities:\n\n- **System Resource Monitoring**: `psutil` library provides system metrics\n- **Git Integration**: `gitpython` enables repository status checking\n- **Process Management**: Container health monitoring via Docker\n\n**Sources:** [docker-compose.yml:7-8](), [pyproject.toml:26](), [poetry.lock:605-625]()"])</script><script>self.__next_f.push([1,"2f:T2485,"])</script><script>self.__next_f.push([1,"# Docker Deployment\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [Dockerfile](Dockerfile)\n- [banner.sh](banner.sh)\n- [docker-compose.yml](docker-compose.yml)\n- [docker.sh](docker.sh)\n- [poetry.lock](poetry.lock)\n- [pyproject.toml](pyproject.toml)\n\n\u003c/details\u003e\n\n\n\nThis page provides detailed documentation on deploying the Heroku Telegram Userbot Framework using Docker. Docker offers a streamlined, consistent deployment method that isolates the application from the host system. For cloud platform deployment, see [Cloud Platform Deployment](#8.2).\n\n## Overview\n\nDocker deployment provides several advantages for running Heroku Telegram Userbot:\n\n- Consistent runtime environment\n- Isolation from host system\n- Simplified dependency management\n- Easy updates and rollbacks\n- Cross-platform compatibility\n\nThe Heroku project includes ready-to-use Docker configuration files and automated deployment scripts that facilitate quick deployment on any system with Docker installed.\n\nSources: [Dockerfile:1-49](), [docker-compose.yml:1-13]()\n\n## Docker Architecture\n\nThe Docker deployment uses a multi-stage build process to create an optimized container image.\n\n```mermaid\nflowchart TD\n    subgraph \"Build Stage\"\n        A[\"python:3.10-slim Base Image\"] --\u003e B[\"Install Build Dependencies\"]\n        B --\u003e C[\"Clone Repository\"]\n        C --\u003e D[\"Create Python venv\"]\n        D --\u003e E[\"Install Requirements\"]\n    end\n    \n    subgraph \"Final Stage\"\n        F[\"python:3.10-slim Base Image\"] --\u003e G[\"Install Runtime Dependencies\"]\n        G --\u003e H[\"Install Node.js\"]\n        H --\u003e I[\"Copy App \u0026 venv from Build Stage\"]\n        I --\u003e J[\"Set Environment Variables\"]\n        J --\u003e K[\"Set Working Directory\"]\n        K --\u003e L[\"Expose Port 8080\"]\n    end\n    \n    E --\u003e I\n```\n\nThe multi-stage build approach significantly reduces the final container size by:\n\n1. Using a builder stage to compile and prepare dependencies\n2. Creating a clean final image with only runtime necessities\n\nSources: [Dockerfile:3-19](), [Dockerfile:20-49]()\n\n## Container Components\n\nThe Docker container includes all necessary components to run the Heroku Telegram Userbot Framework.\n\n```mermaid\ngraph TD\n    A[\"Docker Container\"] --\u003e B[\"heroku Module\"]\n    A --\u003e C[\"Python 3.10 Environment\"]\n    A --\u003e D[\"Runtime Dependencies\"]\n    A --\u003e E[\"Node.js 18.x\"]\n    \n    B --\u003e F[\"Web Interface Port 8080\"]\n    B --\u003e G[\"python -m heroku --root\"]\n    \n    subgraph \"Runtime Dependencies\"\n        H[\"ffmpeg\"]\n        I[\"git\"]\n        J[\"libcairo2\"]\n        K[\"libavcodec-dev\"]\n        L[\"wkhtmltopdf\"]\n        M[\"openssh-server\"]\n    end\n    \n    D --\u003e H\n    D --\u003e I\n    D --\u003e J\n    D --\u003e K\n    D --\u003e L\n    D --\u003e M\n```\n\nSources: [Dockerfile:18-36](), [Dockerfile:53]()\n\n## Deployment Options\n\n### Option 1: Automated Deployment Script (Recommended)\n\nThe `docker.sh` script provides the most streamlined deployment experience with automatic Docker installation and tunnel setup.\n\n1. Download and run the automated script:\n   ```bash\n   curl -s https://raw.githubusercontent.com/coddrago/Heroku/master/docker.sh | bash\n   ```\n\n   Or manually:\n   ```bash\n   git clone https://github.com/coddrago/Heroku.git\n   cd Heroku\n   bash docker.sh\n   ```\n\nThe script automatically:\n- Detects your Linux distribution and installs Docker if needed\n- Installs `docker-compose` via pip\n- Sets up the environment with default port 3429\n- Builds and starts the container\n- Creates an SSH tunnel via `localhost.run` for external access\n\n| Configuration Parameter | Default Value | Description |\n|-------------------------|---------------|-------------|\n| PORT | 3429 | The port used by docker.sh script |\n| EXTERNAL_PORT | 8080 | The port exposed by docker-compose |\n\nSources: [docker.sh:1-53]()\n\n### Option 2: Using Docker Compose\n\nDocker Compose provides manual deployment with persistent data storage.\n\n1. Clone the repository:\n   ```bash\n   git clone https://github.com/coddrago/Heroku.git\n   cd Heroku\n   ```\n\n2. Configure the external port (optional):\n   ```bash\n   echo \"EXTERNAL_PORT=8080\" \u003e .env\n   ```\n\n3. Start the container:\n   ```bash\n   docker-compose up -d --build\n   ```\n\nThis setup automatically:\n- Builds the Docker image if needed\n- Creates a persistent volume for data storage\n- Maps your configured port to the container\n- Configures proper restart policies\n\nSources: [docker-compose.yml:1-13]()\n\n### Option 3: Using Docker Directly\n\nFor more customized deployments, you can build and run the container manually:\n\n1. Clone the repository:\n   ```bash\n   git clone https://github.com/coddrago/Heroku.git\n   cd Heroku\n   ```\n\n2. Build the image:\n   ```bash\n   docker build -t heroku-userbot .\n   ```\n\n3. Create a volume:\n   ```bash\n   docker volume create heroku-data\n   ```\n\n4. Run the container:\n   ```bash\n   docker run -d --name heroku-userbot -p 8080:8080 -v heroku-data:/data --restart unless-stopped heroku-userbot\n   ```\n\nSources: [Dockerfile:1-53]()\n\n## Environment Variables\n\nThe Docker container is configured with several environment variables that affect its behavior:\n\n| Variable | Value | Purpose |\n|----------|-------|---------|\n| PYTHONUNBUFFERED | 1 | Ensures Python output is not buffered |\n| PYTHONDONTWRITEBYTECODE | 1 | Prevents Python from writing .pyc files |\n| PIP_NO_CACHE_DIR | off | Disables pip caching during build |\n| PIP_DISABLE_PIP_VERSION_CHECK | on | Disables pip version warnings |\n| AIOHTTP_NO_EXTENSIONS | 1 | Disables aiohttp C extensions for compatibility |\n| DOCKER | true | Indicates container is running in Docker environment |\n| GIT_PYTHON_REFRESH | quiet | Suppresses Git-related warnings |\n\nThese variables are pre-configured in the Dockerfile and generally don't need to be modified.\n\nSources: [Dockerfile:4-16]()\n\n## Data Persistence\n\nAll user data, including:\n- Telegram sessions\n- Module configurations\n- Database files\n\nAre stored persistently using Docker volumes. With Docker Compose, a named volume `worker` is automatically created and managed.\n\n```mermaid\nflowchart LR\n    A[\"Docker Container\"] \u003c--\u003e B[\"Docker Volume: worker\"]\n    \n    subgraph \"Container Filesystem\"\n        C[\"/data Directory\"]\n    end\n    \n    subgraph \"Persistent Volume\"\n        D[\"Telegram Sessions\"]\n        E[\"Configuration Files\"]\n        F[\"Database Data\"]\n    end\n    \n    C \u003c--\u003e B\n    B --- D\n    B --- E\n    B --- F\n```\n\nSources: [docker-compose.yml:3-7](), [docker-compose.yml:12-13]()\n\n## Accessing the Web Interface\n\nAfter deployment, the Heroku web interface is accessible at:\n\n**With Automated Script:**\n- The script automatically creates an SSH tunnel and displays the public URL\n- Look for the \"tunneled\" output showing your public access URL\n\n**With Manual Deployment:**\n```\nhttp://your-server-ip:8080\n```\n\nFollow the on-screen instructions to set up your Telegram account.\n\nSources: [docker.sh:51-52]()\n\n## Updating the Userbot\n\nTo update your Docker deployment:\n\n1. Pull the latest code:\n   ```bash\n   git pull\n   ```\n\n2. Rebuild and restart the container:\n   ```bash\n   docker-compose down\n   docker-compose up -d --build\n   ```\n\nYour existing data and sessions will be preserved.\n\n## Docker Build Process\n\nThe build process follows a specific sequence to ensure all dependencies are properly installed:\n\n```mermaid\nflowchart TD\n    A[\"FROM python:3.10\"] --\u003e B[\"Set Environment Variables\"]\n    B --\u003e C[\"Install System Dependencies\"]\n    C --\u003e D[\"Install Node.js 18.x\"]\n    D --\u003e E[\"Create /data Directory\"]\n    E --\u003e F[\"Clone Repository\"]\n    F --\u003e G[\"Checkout master Branch\"]\n    G --\u003e H[\"Install Python Requirements\"]\n    H --\u003e I[\"Expose Port 8080\"]\n    I --\u003e J[\"CMD python -m heroku --root\"]\n    \n    subgraph \"System Dependencies\"\n        K[\"build-essential\"]\n        L[\"ffmpeg\"]\n        M[\"git\"]\n        N[\"libavcodec-dev\"]\n        O[\"openssh-server\"]\n        P[\"wkhtmltopdf\"]\n    end\n    \n    C --\u003e K\n    C --\u003e L\n    C --\u003e M\n    C --\u003e N\n    C --\u003e O\n    C --\u003e P\n```\n\nThe container automatically detects the Docker environment through the `DOCKER=true` environment variable, which enables Docker-specific optimizations and bypasses certain host-specific checks.\n\nSources: [Dockerfile:1-53](), [Dockerfile:15]()\n\n## Troubleshooting\n\n### Container Won't Start\n\nCheck the logs for detailed error messages:\n```bash\ndocker-compose logs worker\n```\n\nFor the automated script, check the installation log:\n```bash\ncat heroku-install.log\n```\n\n### Web Interface Not Accessible\n\nWith automated script: Check if the SSH tunnel is active and look for the tunneled URL in the output.\n\nWith manual deployment: Verify port mapping:\n```bash\ndocker-compose ps\n```\n\nEnsure that your firewall allows traffic on the configured port.\n\n### Session Issues\n\nIf you experience issues with Telegram sessions after a container restart, check the volume permissions:\n```bash\ndocker volume inspect Heroku_worker\n```\n\nThe session data should be properly persisted in the Docker volume.\n\nSources: [docker.sh:9](), [docker-compose.yml:12]()\n\n## Security Considerations\n\n- The Docker container runs the application as the root user inside the container, which is standard practice for Docker but may have security implications.\n- The web interface is exposed on port 8080, so ensure proper network security.\n- Consider placing the web interface behind a reverse proxy with HTTPS for additional security."])</script><script>self.__next_f.push([1,"30:T2c1a,"])</script><script>self.__next_f.push([1,"# Cloud Platform Deployment\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [Dockerfile](Dockerfile)\n- [docker-compose.yml](docker-compose.yml)\n- [pyproject.toml](pyproject.toml)\n\n\u003c/details\u003e\n\n\n\nThis document covers deployment of the Heroku Telegram userbot framework to cloud platforms including Heroku, Okteto, and Virtual Private Servers (VPS). It focuses on platform-specific configurations, environment setup, and production deployment considerations.\n\nFor containerized deployment using Docker, see [Docker Deployment](#8.1). For mobile and Android deployments, see [Mobile and Termux Deployment](#8.3).\n\n## Supported Cloud Platforms\n\nThe Heroku framework supports deployment across multiple cloud platforms through its containerized architecture and flexible configuration system. Each platform has specific requirements and deployment procedures.\n\n### Platform Overview\n\n| Platform | Deployment Method | Container Support | Database Options | Web Interface |\n|----------|------------------|-------------------|------------------|---------------|\n| Heroku | Git push / Container Registry | Yes | PostgreSQL, Redis | Dynos on custom port |\n| Okteto | Kubernetes manifests | Yes | Persistent volumes | LoadBalancer service |\n| VPS/Cloud VM | Direct installation / Docker | Optional | SQLite, PostgreSQL | Direct port access |\n| Railway | Dockerfile | Yes | PostgreSQL, Redis | Automatic HTTPS |\n\n**Cloud Platform Deployment Architecture**\n\n```mermaid\ngraph TB\n    subgraph \"Source Repository\"\n        GITHUB[\"GitHub Repository\u003cbr/\u003ecoddrago/Heroku\"]\n        DOCKERFILE[\"Dockerfile\u003cbr/\u003ePython 3.10 + Dependencies\"]\n        COMPOSE[\"docker-compose.yml\u003cbr/\u003eService Configuration\"]\n    end\n    \n    subgraph \"Cloud Platforms\"\n        HEROKU[\"Heroku Platform\u003cbr/\u003eWeb Dynos\"]\n        OKTETO[\"Okteto Cloud\u003cbr/\u003eKubernetes Pods\"]\n        RAILWAY[\"Railway\u003cbr/\u003eContainer Service\"]\n        VPS[\"VPS/Cloud VM\u003cbr/\u003eDocker/Direct\"]\n    end\n    \n    subgraph \"Application Components\"\n        WEB_SERVER[\"Web Interface\u003cbr/\u003ePort 8080\"]\n        TG_CLIENT[\"Telegram Client\u003cbr/\u003eheroku-tl-new\"]\n        DATABASE[\"Database Layer\u003cbr/\u003ePostgreSQL/SQLite\"]\n        MODULE_SYS[\"Module System\u003cbr/\u003eDynamic Loading\"]\n    end\n    \n    subgraph \"External Dependencies\"\n        TG_API[\"Telegram API\u003cbr/\u003eapi.telegram.org\"]\n        CLOUDFLARE[\"Cloudflare Tunnel\u003cbr/\u003epycloudflared\"]\n        GITHUB_API[\"GitHub API\u003cbr/\u003eModule Sources\"]\n    end\n    \n    GITHUB --\u003e HEROKU\n    DOCKERFILE --\u003e OKTETO\n    COMPOSE --\u003e RAILWAY\n    GITHUB --\u003e VPS\n    \n    HEROKU --\u003e WEB_SERVER\n    OKTETO --\u003e WEB_SERVER\n    RAILWAY --\u003e WEB_SERVER\n    VPS --\u003e WEB_SERVER\n    \n    WEB_SERVER --\u003e TG_CLIENT\n    WEB_SERVER --\u003e DATABASE\n    TG_CLIENT --\u003e MODULE_SYS\n    \n    TG_CLIENT --\u003e TG_API\n    WEB_SERVER --\u003e CLOUDFLARE\n    MODULE_SYS --\u003e GITHUB_API\n```\n\nSources: [Dockerfile:1-53](), [docker-compose.yml:1-13](), [pyproject.toml:1-36]()\n\n## Heroku Platform Deployment\n\nHeroku is the primary target platform for this userbot framework, as indicated by the project name and specialized integration.\n\n### Heroku Configuration\n\nThe framework includes specific Heroku integration through the `heroku-tl-new` dependency, which handles platform-specific optimizations and deployment procedures.\n\n**Heroku Deployment Flow**\n\n```mermaid\nflowchart TD\n    START[\"Developer Initiates Deploy\"] --\u003e METHOD{Deployment Method}\n    \n    METHOD --\u003e|Git Push| GIT_DEPLOY[\"git push heroku main\"]\n    METHOD --\u003e|Container| CONTAINER_DEPLOY[\"heroku container:push web\"]\n    \n    GIT_DEPLOY --\u003e BUILDPACK[\"Heroku Python Buildpack\"]\n    CONTAINER_DEPLOY --\u003e REGISTRY[\"Heroku Container Registry\"]\n    \n    BUILDPACK --\u003e PYTHON_INSTALL[\"pip install -r requirements.txt\"]\n    REGISTRY --\u003e DOCKER_BUILD[\"Docker Build Process\"]\n    \n    PYTHON_INSTALL --\u003e PROCFILE[\"Process Type: web\"]\n    DOCKER_BUILD --\u003e PROCFILE\n    \n    PROCFILE --\u003e DYNO_START[\"heroku run python -m heroku --root\"]\n    DYNO_START --\u003e PORT_BIND[\"Bind to $PORT (Dynamic)\"]\n    \n    PORT_BIND --\u003e WEB_INTERFACE[\"Web Setup Interface Active\"]\n    WEB_INTERFACE --\u003e TG_AUTH[\"Telegram Authentication\"]\n    TG_AUTH --\u003e USERBOT_READY[\"Userbot Operational\"]\n    \n    subgraph \"Heroku Resources\"\n        DYNO[\"Web Dyno\u003cbr/\u003ePython Process\"]\n        POSTGRES[\"Heroku Postgres\u003cbr/\u003eDatabase Add-on\"]\n        REDIS[\"Heroku Redis\u003cbr/\u003eCaching Layer\"]\n    end\n    \n    DYNO_START --\u003e DYNO\n    WEB_INTERFACE --\u003e POSTGRES\n    WEB_INTERFACE --\u003e REDIS\n```\n\n### Environment Variables\n\nCritical environment variables for Heroku deployment:\n\n| Variable | Purpose | Required | Default |\n|----------|---------|----------|---------|\n| `PORT` | Web interface port | Yes (Heroku sets) | 8080 |\n| `DATABASE_URL` | PostgreSQL connection | Optional | SQLite fallback |\n| `REDIS_URL` | Redis cache connection | Optional | Memory cache |\n| `DOCKER` | Container detection | Auto-set | `true` in container |\n\nSources: [Dockerfile:15-16](), [Dockerfile:52-53](), [pyproject.toml:28]()\n\n## Okteto Cloud Deployment\n\nOkteto provides Kubernetes-based deployment with development-friendly features and persistent storage.\n\n### Okteto Configuration\n\nOkteto deployment utilizes the containerized approach with Kubernetes manifests for service definition and resource allocation.\n\n**Okteto Kubernetes Architecture**\n\n```mermaid\ngraph TB\n    subgraph \"Okteto Namespace\"\n        DEPLOYMENT[\"Deployment\u003cbr/\u003eheroku-userbot\"]\n        SERVICE[\"Service\u003cbr/\u003eLoadBalancer Type\"]\n        PVC[\"PersistentVolumeClaim\u003cbr/\u003eData Storage\"]\n        CONFIGMAP[\"ConfigMap\u003cbr/\u003eEnvironment Config\"]\n    end\n    \n    subgraph \"Pod Specification\"\n        CONTAINER[\"Container\u003cbr/\u003epython:3.10 + App\"]\n        VOLUME_MOUNT[\"Volume Mount\u003cbr/\u003e/data/private\"]\n        ENV_VARS[\"Environment Variables\u003cbr/\u003eFrom ConfigMap\"]\n        PORT_8080[\"Container Port 8080\"]\n    end\n    \n    subgraph \"External Access\"\n        OKTETO_URL[\"Okteto Public URL\u003cbr/\u003ehttps://userbot-namespace.okteto.dev\"]\n        TUNNEL_SERVICE[\"Tunnel Service\u003cbr/\u003eCloudFlare Integration\"]\n    end\n    \n    DEPLOYMENT --\u003e CONTAINER\n    SERVICE --\u003e PORT_8080\n    PVC --\u003e VOLUME_MOUNT\n    CONFIGMAP --\u003e ENV_VARS\n    \n    SERVICE --\u003e OKTETO_URL\n    CONTAINER --\u003e TUNNEL_SERVICE\n    VOLUME_MOUNT --\u003e PVC\n```\n\n### Okteto Manifest Example\n\n```yaml\n# okteto.yml\nbuild:\n  app:\n    context: .\n    dockerfile: Dockerfile\n\ndeploy:\n  - kubectl apply -f k8s/\n\ndev:\n  app:\n    image: okteto.dev/heroku-userbot:latest\n    command: [\"python\", \"-m\", \"heroku\", \"--root\"]\n    volumes:\n      - /data/private\n    ports:\n      - 8080:8080\n```\n\nSources: [Dockerfile:43-53](), [docker-compose.yml:6-10]()\n\n## VPS and Cloud VM Deployment\n\nVirtual Private Server deployment offers maximum control and customization options for advanced users.\n\n### Direct Installation Method\n\nVPS deployment can use either direct Python installation or Docker containerization, depending on system preferences and requirements.\n\n**VPS Deployment Options**\n\n```mermaid\ngraph LR\n    VPS[\"VPS Instance\u003cbr/\u003eUbuntu/Debian/CentOS\"] --\u003e INSTALL_METHOD{Installation Method}\n    \n    INSTALL_METHOD --\u003e|Direct| DIRECT_INSTALL[\"Direct Python Installation\"]\n    INSTALL_METHOD --\u003e|Container| DOCKER_INSTALL[\"Docker Installation\"]\n    \n    subgraph \"Direct Installation Steps\"\n        SYSTEM_DEPS[\"apt install python3 git\u003cbr/\u003eSystem Dependencies\"]\n        CLONE_REPO[\"git clone\u003cbr/\u003eGitHub Repository\"]\n        PIP_INSTALL[\"pip install -r requirements.txt\u003cbr/\u003ePython Dependencies\"]\n        SYSTEMD[\"systemctl enable heroku\u003cbr/\u003eService Management\"]\n    end\n    \n    subgraph \"Docker Installation Steps\"\n        DOCKER_ENGINE[\"Install Docker Engine\"]\n        COMPOSE_SETUP[\"docker-compose.yml\u003cbr/\u003eConfiguration\"]\n        CONTAINER_RUN[\"docker-compose up -d\u003cbr/\u003eService Start\"]\n        NGINX_PROXY[\"nginx reverse proxy\u003cbr/\u003eOptional HTTPS\"]\n    end\n    \n    DIRECT_INSTALL --\u003e SYSTEM_DEPS\n    SYSTEM_DEPS --\u003e CLONE_REPO\n    CLONE_REPO --\u003e PIP_INSTALL\n    PIP_INSTALL --\u003e SYSTEMD\n    \n    DOCKER_INSTALL --\u003e DOCKER_ENGINE\n    DOCKER_ENGINE --\u003e COMPOSE_SETUP\n    COMPOSE_SETUP --\u003e CONTAINER_RUN\n    CONTAINER_RUN --\u003e NGINX_PROXY\n```\n\n### System Service Configuration\n\nFor production VPS deployment, the userbot should run as a system service:\n\n```ini\n# /etc/systemd/system/heroku-userbot.service\n[Unit]\nDescription=Heroku Telegram Userbot\nAfter=network.target\n\n[Service]\nType=simple\nUser=heroku\nWorkingDirectory=/home/heroku/Heroku\nExecStart=/usr/bin/python3 -m heroku --root\nRestart=always\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\n```\n\nSources: [Dockerfile:46-53](), [pyproject.toml:13-31]()\n\n## Database Configuration\n\nCloud deployments require appropriate database configuration based on platform capabilities and persistence requirements.\n\n### Database Backend Selection\n\n| Platform | Recommended Database | Configuration Method | Persistence |\n|----------|---------------------|---------------------|-------------|\n| Heroku | PostgreSQL (Add-on) | `DATABASE_URL` env var | Managed |\n| Okteto | PostgreSQL (Pod) | Kubernetes Secret | Persistent Volume |\n| VPS | PostgreSQL/SQLite | Direct configuration | Local storage |\n| Railway | PostgreSQL (Service) | Environment injection | Managed |\n\n**Database Integration Architecture**\n\n```mermaid\ngraph TB\n    subgraph \"Application Layer\"\n        APP[\"heroku.__main__\u003cbr/\u003eApplication Entry\"]\n        DB_LAYER[\"Database Layer\u003cbr/\u003eSQLAlchemy/Native\"]\n        CONFIG_MGR[\"Configuration Manager\u003cbr/\u003eYAML/JSON Storage\"]\n    end\n    \n    subgraph \"Database Backends\"\n        SQLITE[\"SQLite\u003cbr/\u003eLocal File\"]\n        POSTGRES[\"PostgreSQL\u003cbr/\u003eNetwork Service\"]\n        REDIS[\"Redis\u003cbr/\u003eCache Layer\"]\n    end\n    \n    subgraph \"Platform Integration\"\n        HEROKU_DB[\"Heroku Postgres\u003cbr/\u003eDATABASE_URL\"]\n        OKTETO_PVC[\"Okteto PVC\u003cbr/\u003eMounted Volume\"]\n        VPS_LOCAL[\"VPS Local\u003cbr/\u003eDirect File System\"]\n    end\n    \n    APP --\u003e DB_LAYER\n    DB_LAYER --\u003e CONFIG_MGR\n    \n    CONFIG_MGR --\u003e SQLITE\n    CONFIG_MGR --\u003e POSTGRES\n    CONFIG_MGR --\u003e REDIS\n    \n    POSTGRES --\u003e HEROKU_DB\n    SQLITE --\u003e OKTETO_PVC\n    SQLITE --\u003e VPS_LOCAL\n```\n\nSources: [pyproject.toml:15-30](), [Dockerfile:43-44]()\n\n## Monitoring and Maintenance\n\nCloud deployments require ongoing monitoring and maintenance procedures to ensure reliable operation.\n\n### Health Monitoring\n\nThe web interface on port 8080 serves as the primary health check endpoint for cloud platforms:\n\n- **Health Check Path**: `/` (web setup interface)\n- **Expected Response**: HTTP 200 with setup UI\n- **Timeout**: 30 seconds maximum\n- **Restart Policy**: Always restart on failure\n\n### Log Management\n\n| Platform | Log Access Method | Retention | Real-time Monitoring |\n|----------|------------------|-----------|-------------------|\n| Heroku | `heroku logs --tail` | 1500 lines | Yes |\n| Okteto | `kubectl logs -f pod/` | Pod lifetime | Yes |\n| VPS | `journalctl -f -u heroku-userbot` | Configurable | Yes |\n| Railway | Web dashboard | 30 days | Yes |\n\n### Update Procedures\n\nCloud deployments support automated updates through platform-specific mechanisms:\n\n1. **Git-based**: Push to main branch triggers rebuild\n2. **Container-based**: Update container image and redeploy\n3. **Direct**: Pull repository changes and restart service\n\nSources: [Dockerfile:46-48](), [docker-compose.yml:7-8]()"])</script><script>self.__next_f.push([1,"31:T27e1,"])</script><script>self.__next_f.push([1,"# Mobile and Termux Deployment\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [LICENSE](LICENSE)\n- [README.md](README.md)\n- [banner.sh](banner.sh)\n- [docker.sh](docker.sh)\n- [poetry.lock](poetry.lock)\n\n\u003c/details\u003e\n\n\n\nThis section covers deploying the Heroku Telegram userbot framework on Android devices using Termux, a Linux terminal emulator. This deployment method enables running a full-featured userbot directly on mobile devices without requiring external servers or cloud platforms.\n\nFor cloud-based deployments, see [Cloud Platform Deployment](#8.2). For containerized deployments, see [Docker Deployment](#8.1).\n\n## Overview\n\nMobile deployment through Termux provides a self-contained userbot solution that runs entirely on Android devices. This approach offers portability and independence from external infrastructure while maintaining full compatibility with the framework's core features.\n\n## Termux Environment Architecture\n\n```mermaid\ngraph TB\n    subgraph \"Android Device\"\n        subgraph \"Termux Environment\"\n            TERMUX_PKG[\"Package Manager\u003cbr/\u003epkg/apt\"]\n            PYTHON_ENV[\"Python 3.9-3.13\u003cbr/\u003eRuntime Environment\"]\n            GIT_CLIENT[\"Git Client\u003cbr/\u003eRepository Access\"]\n            STORAGE_ACCESS[\"Storage Access\u003cbr/\u003e/data/data/com.termux\"]\n        end\n        \n        subgraph \"Heroku Framework\"\n            MAIN_MODULE[\"hikka.__main__\u003cbr/\u003eEntry Point\"]\n            DISPATCHER[\"hikka.dispatcher\u003cbr/\u003eMessage Handler\"]\n            WEB_INTERFACE[\"Web Interface\u003cbr/\u003ePort 8080\"]\n            CONFIG_SYSTEM[\"hikka.configurator\u003cbr/\u003eSetup System\"]\n        end\n        \n        subgraph \"Telegram Integration\"\n            TL_CLIENT[\"heroku-tl-new\u003cbr/\u003eTelegram Client\"]\n            AIOGRAM_BOT[\"aiogram\u003cbr/\u003eBot Framework\"]\n            AUTH_SYSTEM[\"Authentication\u003cbr/\u003eSession Management\"]\n        end\n    end\n    \n    subgraph \"External Services\"\n        TELEGRAM_API[\"Telegram API\u003cbr/\u003eapi.telegram.org\"]\n        LOCALHOST_TUNNEL[\"localhost.run\u003cbr/\u003eSSH Tunnel\"]\n    end\n    \n    TERMUX_PKG --\u003e PYTHON_ENV\n    TERMUX_PKG --\u003e GIT_CLIENT\n    PYTHON_ENV --\u003e MAIN_MODULE\n    GIT_CLIENT --\u003e MAIN_MODULE\n    \n    MAIN_MODULE --\u003e DISPATCHER\n    MAIN_MODULE --\u003e WEB_INTERFACE\n    MAIN_MODULE --\u003e CONFIG_SYSTEM\n    \n    DISPATCHER --\u003e TL_CLIENT\n    CONFIG_SYSTEM --\u003e AIOGRAM_BOT\n    TL_CLIENT --\u003e AUTH_SYSTEM\n    \n    TL_CLIENT --\u003e TELEGRAM_API\n    WEB_INTERFACE --\u003e LOCALHOST_TUNNEL\n    AUTH_SYSTEM --\u003e TELEGRAM_API\n```\n\nSources: [README.md:22-23](), architecture diagrams from context\n\n## Termux Installation Process\n\n### Environment Setup Flow\n\n```mermaid\nflowchart TD\n    START[\"Install Termux from F-Droid\"] --\u003e UPDATE_PACKAGES[\"pkg update \u0026\u0026 pkg upgrade\"]\n    UPDATE_PACKAGES --\u003e INSTALL_DEPS[\"Install Dependencies\u003cbr/\u003epkg install git python\"]\n    \n    INSTALL_DEPS --\u003e CLONE_REPO[\"git clone Repository\u003cbr/\u003egithub.com/coddrago/Heroku\"]\n    CLONE_REPO --\u003e ENTER_DIR[\"cd Heroku\"]\n    \n    ENTER_DIR --\u003e INSTALL_PYTHON_DEPS[\"pip install -r requirements.txt\"]\n    INSTALL_PYTHON_DEPS --\u003e RUN_FRAMEWORK[\"python3 -m hikka\"]\n    \n    RUN_FRAMEWORK --\u003e SETUP_METHOD{Choose Setup Method}\n    SETUP_METHOD --\u003e|Console| CONSOLE_SETUP[\"Console Configuration\u003cbr/\u003eTerminal Interface\"]\n    SETUP_METHOD --\u003e|Web| WEB_SETUP[\"Web Interface Setup\u003cbr/\u003elocalhost:8080\"]\n    \n    CONSOLE_SETUP --\u003e AUTH_FLOW[\"Authentication Flow\"]\n    WEB_SETUP --\u003e TUNNEL_SETUP[\"SSH Tunnel Setup\u003cbr/\u003elocalhost.run\"]\n    TUNNEL_SETUP --\u003e AUTH_FLOW\n    \n    AUTH_FLOW --\u003e PHONE_AUTH[\"Phone Number Input\"]\n    PHONE_AUTH --\u003e OTP_VERIFICATION[\"OTP Verification\"]\n    OTP_VERIFICATION --\u003e TWO_FA_CHECK{2FA Enabled?}\n    \n    TWO_FA_CHECK --\u003e|Yes| TWO_FA_INPUT[\"2FA Password Input\"]\n    TWO_FA_CHECK --\u003e|No| SESSION_CREATED[\"Session Created\"]\n    TWO_FA_INPUT --\u003e SESSION_CREATED\n    \n    SESSION_CREATED --\u003e USERBOT_RUNNING[\"✅ Userbot Running\"]\n```\n\nSources: [README.md:22-23]()\n\n## Package Dependencies\n\nThe framework requires specific Python packages optimized for mobile environments:\n\n| Category | Package | Purpose | Mobile Considerations |\n|----------|---------|---------|----------------------|\n| **Core Framework** | `heroku-tl-new` | Telegram client library | Optimized for mobile networks |\n| **Bot Framework** | `aiogram` | Telegram Bot API wrapper | Lightweight async operations |\n| **Web Server** | `aiohttp` | Async HTTP client/server | Low memory footprint |\n| **Template Engine** | `jinja2` | Web interface rendering | Minimal resource usage |\n| **Async Operations** | `aiofile` | Async file operations | Battery-efficient I/O |\n| **Cryptography** | `tgcrypto` | Fast crypto operations | Hardware-accelerated when available |\n| **Process Monitoring** | `psutil` | System resource monitoring | Mobile resource tracking |\n\nSources: [poetry.lock:397-404](), [poetry.lock:20-28](), [poetry.lock:40-48]()\n\n## Mobile-Specific Configuration\n\n### Resource Management\n\n```mermaid\ngraph LR\n    subgraph \"Mobile Resource Constraints\"\n        CPU_LIMIT[\"CPU Throttling\u003cbr/\u003eAndroid Power Management\"]\n        MEMORY_LIMIT[\"RAM Limitations\u003cbr/\u003e2-8GB Typical\"]\n        BATTERY_DRAIN[\"Battery Optimization\u003cbr/\u003eDoze Mode Handling\"]\n        NETWORK_SWITCHING[\"Network Changes\u003cbr/\u003eWiFi/Mobile Data\"]\n    end\n    \n    subgraph \"Framework Adaptations\"\n        ASYNC_OPERATIONS[\"Async I/O\u003cbr/\u003eaiofile, aiohttp\"]\n        LIGHTWEIGHT_POLLING[\"Efficient Polling\u003cbr/\u003eLong Polling Mode\"]\n        SESSION_PERSISTENCE[\"Session Management\u003cbr/\u003eAutomatic Reconnection\"]\n        RESOURCE_MONITORING[\"Resource Tracking\u003cbr/\u003epsutil Integration\"]\n    end\n    \n    CPU_LIMIT --\u003e ASYNC_OPERATIONS\n    MEMORY_LIMIT --\u003e LIGHTWEIGHT_POLLING\n    BATTERY_DRAIN --\u003e SESSION_PERSISTENCE\n    NETWORK_SWITCHING --\u003e SESSION_PERSISTENCE\n    \n    ASYNC_OPERATIONS --\u003e RESOURCE_MONITORING\n    LIGHTWEIGHT_POLLING --\u003e RESOURCE_MONITORING\n```\n\nSources: [poetry.lock:4-11](), [poetry.lock:605-625]()\n\n## Installation Commands\n\n### Basic Termux Setup\n\n```bash\n# Update Termux packages\npkg update \u0026\u0026 pkg upgrade\n\n# Install required packages  \npkg install git python\n\n# Clone repository\ngit clone https://github.com/coddrago/Heroku\n\n# Navigate to directory\ncd Heroku\n\n# Install Python dependencies\npip install -r requirements.txt\n\n# Run the framework\npython3 -m hikka\n```\n\n### Console-Only Setup\n\nFor devices with limited resources or when web interface is not needed:\n\n```bash\n# Run with console-only setup\npython3 -m hikka --no-web\n```\n\nSources: [README.md:22-23]()\n\n## Web Interface Access\n\nWhen running the web interface on mobile, the framework provides tunnel access for external configuration:\n\n### Tunnel Configuration\n\nThe system automatically establishes SSH tunnels for web interface access when needed. The tunnel setup integrates with `localhost.run` to provide external access to the local web server.\n\n| Component | Default Port | Access Method |\n|-----------|--------------|---------------|\n| Web Interface | 8080 | `localhost:8080` |\n| SSH Tunnel | Dynamic | `*.localhost.run` |\n| Console Interface | N/A | Direct terminal |\n\nSources: [docker.sh:52]()\n\n## Storage and Persistence\n\n### Data Storage Layout\n\n```mermaid\ngraph TB\n    subgraph \"Termux Storage Structure\"\n        TERMUX_HOME[\"/data/data/com.termux/files/home\"]\n        HEROKU_DIR[\"~/Heroku/\u003cbr/\u003eFramework Directory\"]\n        \n        subgraph \"Framework Files\"\n            HIKKA_MODULE[\"hikka/\u003cbr/\u003eCore Framework\"]\n            ASSETS_DIR[\"assets/\u003cbr/\u003eBanner and UI Files\"]\n            CONFIG_FILES[\"Configuration Files\u003cbr/\u003esessions, settings\"]\n        end\n        \n        subgraph \"User Data\"\n            SESSION_FILES[\"Session Files\u003cbr/\u003e.session files\"]\n            MODULE_DATA[\"Module Data\u003cbr/\u003eCustom modules\"]\n            LOG_FILES[\"Log Files\u003cbr/\u003eApplication logs\"]\n        end\n    end\n    \n    TERMUX_HOME --\u003e HEROKU_DIR\n    HEROKU_DIR --\u003e HIKKA_MODULE\n    HEROKU_DIR --\u003e ASSETS_DIR\n    HEROKU_DIR --\u003e CONFIG_FILES\n    \n    CONFIG_FILES --\u003e SESSION_FILES\n    CONFIG_FILES --\u003e MODULE_DATA\n    CONFIG_FILES --\u003e LOG_FILES\n```\n\nSources: [banner.sh:4]()\n\n## Performance Optimization\n\n### Mobile-Specific Considerations\n\n| Aspect | Optimization | Implementation |\n|--------|--------------|----------------|\n| **Battery Life** | Async operations | `aiohttp`, `aiofile` packages |\n| **Memory Usage** | Lightweight polling | Reduced polling intervals |\n| **Network Efficiency** | Connection reuse | Persistent HTTP connections |\n| **CPU Usage** | Hardware crypto | `tgcrypto` acceleration |\n| **Storage** | Efficient caching | Session file optimization |\n\n### Background Operation\n\nTo ensure continuous operation on Android:\n\n1. **Disable Battery Optimization**: Add Termux to battery optimization whitelist\n2. **Wake Lock Management**: Framework handles wake locks automatically  \n3. **Network State Handling**: Automatic reconnection on network changes\n4. **Doze Mode Compatibility**: Optimized for Android power management\n\nSources: [poetry.lock:786-848]()\n\n## Troubleshooting\n\n### Common Issues\n\n| Issue | Cause | Solution |\n|-------|-------|---------|\n| **Import Errors** | Missing dependencies | Run `pip install -r requirements.txt` |\n| **Permission Denied** | Termux storage access | Grant storage permission to Termux |\n| **Network Timeout** | Firewall/proxy | Check network connectivity |\n| **Session Invalid** | Corrupted session file | Delete `.session` files and re-authenticate |\n| **Web Interface Inaccessible** | Port binding failed | Use `--no-web` flag or change port |\n\n### Debug Commands\n\n```bash\n# Check Python version\npython3 --version\n\n# Verify package installation\npip list | grep -E \"(aiogram|aiohttp|heroku-tl)\"\n\n# Test network connectivity\ncurl -I https://api.telegram.org\n\n# Check available memory\nfree -h\n\n# Monitor process resources\ntop -p $(pgrep -f \"python.*hikka\")\n```\n\n### Log Analysis\n\nFramework logs provide detailed information for troubleshooting mobile-specific issues:\n\n- **Network connectivity problems**: Check for reconnection attempts\n- **Memory constraints**: Monitor memory usage patterns\n- **Battery optimization interference**: Look for unexpected shutdowns\n- **Permission issues**: Verify file system access logs\n\nSources: [README.md:22-23](), [poetry.lock:397-404]()"])</script><script>self.__next_f.push([1,"5:[\"$\",\"$L12\",null,{\"repoName\":\"coddrago/Heroku\",\"hasConfig\":false,\"canSteer\":true,\"children\":[\"$\",\"$L13\",null,{\"wiki\":{\"metadata\":{\"repo_name\":\"coddrago/Heroku\",\"commit_hash\":\"431b8e1a\",\"generated_at\":\"2025-08-21T21:56:43.684752\",\"config\":null,\"config_source\":\"none\"},\"pages\":[{\"page_plan\":{\"id\":\"1\",\"title\":\"Overview\"},\"content\":\"$14\"},{\"page_plan\":{\"id\":\"1.1\",\"title\":\"Installation Guide\"},\"content\":\"$15\"},{\"page_plan\":{\"id\":\"1.2\",\"title\":\"Core Architecture\"},\"content\":\"$16\"},{\"page_plan\":{\"id\":\"1.3\",\"title\":\"Getting Started\"},\"content\":\"$17\"},{\"page_plan\":{\"id\":\"2\",\"title\":\"Core Systems\"},\"content\":\"$18\"},{\"page_plan\":{\"id\":\"2.1\",\"title\":\"Main Module and Entry Point\"},\"content\":\"$19\"},{\"page_plan\":{\"id\":\"2.2\",\"title\":\"Module System\"},\"content\":\"$1a\"},{\"page_plan\":{\"id\":\"2.3\",\"title\":\"Command Dispatcher\"},\"content\":\"$1b\"},{\"page_plan\":{\"id\":\"2.4\",\"title\":\"Database System\"},\"content\":\"$1c\"},{\"page_plan\":{\"id\":\"2.5\",\"title\":\"Web Interface\"},\"content\":\"$1d\"},{\"page_plan\":{\"id\":\"2.6\",\"title\":\"Configuration and Visual Feedback\"},\"content\":\"$1e\"},{\"page_plan\":{\"id\":\"3\",\"title\":\"Security System\"},\"content\":\"$1f\"},{\"page_plan\":{\"id\":\"4\",\"title\":\"Inline System\"},\"content\":\"$20\"},{\"page_plan\":{\"id\":\"4.1\",\"title\":\"Inline Manager\"},\"content\":\"$21\"},{\"page_plan\":{\"id\":\"4.2\",\"title\":\"Forms\"},\"content\":\"$22\"},{\"page_plan\":{\"id\":\"4.3\",\"title\":\"Galleries\"},\"content\":\"$23\"},{\"page_plan\":{\"id\":\"4.4\",\"title\":\"Lists\"},\"content\":\"$24\"},{\"page_plan\":{\"id\":\"5\",\"title\":\"Translation and Internationalization\"},\"content\":\"$25\"},{\"page_plan\":{\"id\":\"6\",\"title\":\"Utility Systems\"},\"content\":\"$26\"},{\"page_plan\":{\"id\":\"6.1\",\"title\":\"Development Environment\"},\"content\":\"$27\"},{\"page_plan\":{\"id\":\"6.2\",\"title\":\"Dependency Management\"},\"content\":\"$28\"},{\"page_plan\":{\"id\":\"7\",\"title\":\"Extending Heroku\"},\"content\":\"$29\"},{\"page_plan\":{\"id\":\"7.1\",\"title\":\"Creating Modules\"},\"content\":\"$2a\"},{\"page_plan\":{\"id\":\"7.2\",\"title\":\"Using Inline Features\"},\"content\":\"$2b\"},{\"page_plan\":{\"id\":\"7.3\",\"title\":\"Working with the Database\"},\"content\":\"$2c\"},{\"page_plan\":{\"id\":\"7.4\",\"title\":\"Best Practices\"},\"content\":\"$2d\"},{\"page_plan\":{\"id\":\"8\",\"title\":\"Deployment and Maintenance\"},\"content\":\"$2e\"},{\"page_plan\":{\"id\":\"8.1\",\"title\":\"Docker Deployment\"},\"content\":\"$2f\"},{\"page_plan\":{\"id\":\"8.2\",\"title\":\"Cloud Platform Deployment\"},\"content\":\"$30\"},{\"page_plan\":{\"id\":\"8.3\",\"title\":\"Mobile and Termux Deployment\"},\"content\":\"$31\"}]},\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]\n"])</script><script>self.__next_f.push([1,"c:null\n10:[[\"$\",\"title\",\"0\",{\"children\":\"Creating Modules | coddrago/Heroku | DeepWiki\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"This document provides a detailed guide for developing custom modules for the Heroku Telegram Userbot. It covers the module structure, registration mechanisms, command handlers, and best practices for\"}],[\"$\",\"meta\",\"2\",{\"property\":\"og:title\",\"content\":\"Creating Modules | coddrago/Heroku | DeepWiki\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:description\",\"content\":\"This document provides a detailed guide for developing custom modules for the Heroku Telegram Userbot. It covers the module structure, registration mechanisms, command handlers, and best practices for\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:url\",\"content\":\"https://deepwiki.com/coddrago/Heroku/7.1-creating-modules\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:site_name\",\"content\":\"DeepWiki\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:title\",\"content\":\"Creating Modules | coddrago/Heroku | DeepWiki\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:description\",\"content\":\"This document provides a detailed guide for developing custom modules for the Heroku Telegram Userbot. It covers the module structure, registration mechanisms, command handlers, and best practices for\"}],[\"$\",\"link\",\"10\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"48x48\"}],[\"$\",\"link\",\"11\",{\"rel\":\"icon\",\"href\":\"/icon.png?66aaf51e0e68c818\",\"type\":\"image/png\",\"sizes\":\"16x16\"}],[\"$\",\"link\",\"12\",{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-icon.png?a4f658907db0ab87\",\"type\":\"image/png\",\"sizes\":\"180x180\"}]]\n"])</script><next-route-announcer style="position: absolute;"><template shadowrootmode="open"><div aria-live="assertive" id="__next-route-announcer__" role="alert" style="position: absolute; border: 0px; height: 1px; margin: -1px; padding: 0px; width: 1px; clip: rect(0px, 0px, 0px, 0px); overflow: hidden; white-space: nowrap; overflow-wrap: normal;"></div></template></next-route-announcer></body></html>